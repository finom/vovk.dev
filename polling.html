<!DOCTYPE html><!--5_Kg3rR_tv22RHAmxuizU--><html lang="en" dir="ltr"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/chunks/978f1fab870b13d4.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/bf1d75097829aaaf.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/221ce6682042a4f8.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/f581d842ac65ef6f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/945fab894dcb74b9.js"/><script src="/_next/static/chunks/d88c131c1055d76f.js" async=""></script><script src="/_next/static/chunks/00f62d5f9434c64a.js" async=""></script><script src="/_next/static/chunks/73a330e38f4c895c.js" async=""></script><script src="/_next/static/chunks/turbopack-836f216462bcc92d.js" async=""></script><script src="/_next/static/chunks/8a07e07106d6caa4.js" async=""></script><script src="/_next/static/chunks/e9a04dc7022658f6.js" async=""></script><script src="/_next/static/chunks/2f545f6d145a6a33.js" async=""></script><script src="/_next/static/chunks/f663ddeedb906bce.js" async=""></script><script src="/_next/static/chunks/b42e1f87491709ea.js" async=""></script><script src="/_next/static/chunks/18261f32c8b1cd5d.js" async=""></script><script src="/_next/static/chunks/442cfc44547bfe65.js" async=""></script><script src="/_next/static/chunks/1aa8e0a9a6fe0f6f.js" async=""></script><script src="/_next/static/chunks/a4f78601a5cf1eea.js" async=""></script><script src="/_next/static/chunks/7a896a6378983d41.js" async=""></script><title>Real-time polling (experimental) | Vovk.ts - Back-end for Next.js</title><meta property="og:title" content="Real-time polling (experimental) | Vovk.ts - Back-end for Next.js"/><meta property="og:description" content="Vovk.ts is a conceptual back-end meta-framework created on top of the Next.js App Router. Built for efficiency and an unprecedented developer experience."/><meta property="og:url" content="https://vovk.dev"/><meta property="og:site_name" content="Vovk.ts"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://vovk.dev/opengraph-image.png?opengraph-image.064a6db6.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="600"/><meta property="og:image:type" content="image/png"/><meta property="og:image:alt" content="Vovk.ts - back-end for Next.js"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Real-time polling (experimental) | Vovk.ts - Back-end for Next.js"/><meta name="twitter:description" content="Vovk.ts is a conceptual back-end meta-framework created on top of the Next.js App Router. Built for efficiency and an unprecedented developer experience."/><meta name="twitter:image" content="https://vovk.dev/opengraph-image.png?opengraph-image.064a6db6.png"/><meta name="twitter:image:width" content="1200"/><meta name="twitter:image:height" content="600"/><meta name="twitter:image:type" content="image/png"/><meta name="twitter:image:alt" content="Vovk.ts - back-end for Next.js"/><link rel="icon" href="/icon.svg" media="(prefers-color-scheme: light)"/><link rel="icon" href="/icon-white.svg" media="(prefers-color-scheme: dark)"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="rgb(250,250,250)"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="rgb(17,17,17)"/><style>:root {
  --nextra-primary-hue: 212deg;
  --nextra-primary-saturation: 100%;
  --nextra-primary-lightness: 45%;
  --nextra-bg: 250,250,250;
  --nextra-content-width: 90rem;
}
.dark {
  --nextra-primary-hue: 204deg;
  --nextra-primary-saturation: 100%;
  --nextra-primary-lightness: 55%;
  --nextra-bg: 17,17,17;
}
::selection {
  background: hsla(var(--nextra-primary-hue),var(--nextra-primary-saturation),var(--nextra-primary-lightness),.3);
}
html {
  background: rgb(var(--nextra-bg));
}</style><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],null,true,true)</script><a href="#nextra-skip-nav" class="nextra-skip-nav x:sr-only" type="button" data-headlessui-state="">Skip to Content</a><header class="nextra-navbar x:sticky x:top-0 x:z-30 x:w-full x:bg-transparent x:print:hidden x:max-md:[.nextra-banner:not([class$=hidden])~&amp;]:top-(--nextra-banner-height)"><div class="nextra-navbar-blur x:absolute x:-z-1 x:size-full nextra-border x:border-b x:backdrop-blur-md x:bg-nextra-bg/70"></div><nav style="height:var(--nextra-navbar-height)" class="x:mx-auto x:flex x:max-w-(--nextra-content-width) x:items-center x:gap-4 x:pl-[max(env(safe-area-inset-left),1.5rem)] x:pr-[max(env(safe-area-inset-right),1.5rem)] x:justify-end"><a class="x:flex x:items-center x:me-auto x:transition-opacity x:focus-visible:nextra-focus x:hover:opacity-75" aria-label="Home page" href="/"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="120" height="34.5" viewBox="0 0 320 92"><desc>Created with Fabric.js 5.3.0</desc><defs></defs><g transform="matrix(0.1737995768 0 0 0.1737995768 39.8512941892 44.8611051276)" id="k3p4mJoS6tEew0Q_1_q7m"><path style="stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill:currentColor;fill-rule:nonzero;opacity:1" transform=" translate(-255.9995, -256.0001872585)" d="M 483.009 360.176 C 481.58500000000004 347.11199999999997 479.659 334.54699999999997 477.31100000000004 322.562 C 471.36400000000003 291.575 462.48900000000003 264.261 453.355 241.397 C 433.66900000000004 192.478 412.31 163.831 412.31 163.831 C 412.31 163.831 422.196 149.589 424.794 96.31099999999999 C 425.042 92.62899999999999 425.125 88.85799999999999 425.21099999999996 84.833 C 426.299 41.525999999999996 409.799 12.879000000000005 396.81299999999993 3.495999999999995 C 390.95199999999994 -0.8560000000000052 385.8399999999999 -1.1920000000000046 383.40899999999993 2.742999999999995 C 380.31299999999993 7.520999999999995 369.17099999999994 23.937999999999995 356.27099999999996 42.532 C 355.097 44.128 353.92299999999994 45.805 352.753 47.562999999999995 C 331.72499999999997 77.969 307.683 112.311 307.683 112.311 L 256 112.311 L 204.316 112.311 C 204.316 112.311 180.274 77.97 159.247 47.563 C 158.07700000000003 45.805 156.90300000000002 44.128 155.73000000000002 42.532000000000004 C 142.829 23.94 131.687 7.522 128.591 2.744 C 126.162 -1.1909999999999998 121.049 -0.855 115.18700000000001 3.4970000000000003 C 102.20100000000001 12.879999999999999 85.70100000000001 41.527 86.78900000000002 84.834 C 86.87500000000001 88.85900000000001 86.95700000000002 92.63000000000001 87.20600000000002 96.312 C 89.80300000000001 149.59 99.68900000000002 163.832 99.68900000000002 163.832 C 99.68900000000002 163.832 78.33000000000001 192.48 58.64400000000002 241.398 C 49.511000000000024 264.262 40.63500000000002 291.576 34.68800000000002 322.563 C 32.341000000000015 334.54699999999997 30.414000000000016 347.113 28.991000000000017 360.17699999999996 C 28.90500000000002 360.76599999999996 28.90500000000002 361.43699999999995 28.823000000000018 362.02599999999995 L 29.997000000000018 361.936 L 30.66400000000002 361.85499999999996 L 31.67000000000002 361.85499999999996 L 78.74800000000002 358.92699999999996 L 72.46600000000002 409.68499999999995 L 122.05500000000002 401.9789999999999 L 130.43200000000002 438.2509999999999 L 166.741 419.1089999999999 C 178.348 450.25199999999995 193.609 489.7869999999999 199.99800000000002 500.1839999999999 C 210.936 518.0339999999999 235.01800000000003 512.9379999999999 252.532 502.7449999999999 C 253.829 501.98399999999987 254.90800000000002 501.2969999999999 255.87800000000001 500.6419999999999 C 256.84700000000004 501.2959999999999 257.91900000000004 501.98399999999987 259.232 502.7449999999999 C 276.742 512.9379999999999 300.817 518.0339999999999 311.75800000000004 500.1839999999999 C 318.14700000000005 489.7779999999999 333.50100000000003 450.2099999999999 345.182 419.0679999999999 L 381.56800000000004 438.25199999999995 L 389.94500000000005 401.97999999999996 L 439.53400000000005 409.686 L 433.25100000000003 358.928 L 480.32900000000006 361.856 L 481.33600000000007 361.856 L 482.00200000000007 361.937 L 483.17600000000004 362.027 C 483.094 361.436 483.094 360.765 483.009 360.176 z M 128.845 146.056 C 116.02199999999999 131.24200000000002 110.63499999999999 95.126 114.979 78.21700000000001 C 117.703 67.55700000000002 128.161 63.149000000000015 134.706 70.67500000000001 C 141.266 78.20900000000002 164.274 120.31300000000002 164.274 120.31300000000002 C 164.274 120.31300000000002 132.072 144.445 128.845 146.056 z M 168.045 329.386 C 168.045 329.386 154.08499999999998 300.06800000000004 151.29199999999997 288.90200000000004 C 186.19299999999998 288.90200000000004 200.15699999999998 308.44500000000005 205.73999999999998 314.03200000000004 L 214.11599999999999 332.184 L 168.045 329.386 z M 283.638 456.066 C 272.967 469.662 263.003 470.08799999999997 255.99599999999998 470.08799999999997 C 248.98999999999998 470.08799999999997 239.034 469.662 228.34999999999997 456.066 C 219.78899999999996 445.178 226.79099999999997 431.926 237.69999999999996 431.926 C 241.58999999999995 431.926 255.99499999999995 431.926 255.99499999999995 431.926 C 255.99499999999995 431.926 270.40899999999993 431.926 274.29799999999994 431.926 C 285.212 431.926 292.218 445.178 283.638 456.066 z M 343.955 329.386 L 297.883 332.184 L 306.26 314.03200000000004 C 311.843 308.44500000000005 325.807 288.90200000000004 360.70799999999997 288.90200000000004 C 357.915 300.067 343.955 329.386 343.955 329.386 z M 383.143 146.056 C 379.91999999999996 144.44500000000002 347.72299999999996 120.31300000000002 347.72299999999996 120.31300000000002 C 347.72299999999996 120.31300000000002 370.72599999999994 78.20900000000002 377.27799999999996 70.67500000000001 C 383.82599999999996 63.149000000000015 394.28099999999995 67.558 397.01699999999994 78.21700000000001 C 401.365 95.126 395.965 131.241 383.143 146.056 z" stroke-linecap="round"></path></g><g transform="matrix(1 0 0 1 173.721 48.725)" id="q3VBAixAcNxARl4zxvCDl"><path style="stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill:currentColor;fill-rule:nonzero;opacity:1" transform=" translate(-166.721, -48.725)" d="M 100.721 74.925 L 86.721 24.925 L 94.721 24.925 L 106.401 67.565 L 107.121 67.565 L 118.801 24.925 L 126.801 24.925 L 112.801 74.925 L 100.721 74.925 Z M 148.961 75.725 L 148.961 75.725 Q 143.681 75.725 140.321 74.805 Q 136.961 73.885 135.081 71.605 Q 133.201 69.325 132.401 65.245 Q 131.601 61.165 131.601 54.925 L 131.601 54.925 Q 131.601 48.605 132.401 44.565 Q 133.201 40.525 135.081 38.245 Q 136.961 35.965 140.321 35.045 Q 143.681 34.125 148.961 34.125 L 148.961 34.125 Q 154.241 34.125 157.641 35.005 Q 161.041 35.885 162.961 38.205 Q 164.881 40.525 165.601 44.565 Q 166.321 48.605 166.321 54.925 L 166.321 54.925 Q 166.321 61.165 165.561 65.245 Q 164.801 69.325 162.881 71.605 Q 160.961 73.885 157.601 74.805 Q 154.241 75.725 148.961 75.725 Z M 139.921 42.685 L 139.921 69.165 L 154.161 69.165 Q 156.401 69.165 157.201 68.765 Q 158.001 68.365 158.001 67.165 L 158.001 67.165 L 158.001 40.685 L 143.761 40.685 Q 141.441 40.685 140.681 41.085 Q 139.921 41.485 139.921 42.685 L 139.921 42.685 Z M 183.441 74.925 L 171.601 34.925 L 179.521 34.925 L 189.121 68.125 L 189.921 68.125 L 199.521 34.925 L 207.441 34.925 L 195.601 74.925 L 183.441 74.925 Z M 238.481 74.925 L 229.441 56.365 L 223.121 56.365 L 223.121 74.925 L 215.121 74.925 L 215.121 22.925 L 223.121 21.725 L 223.121 50.765 L 229.441 50.765 L 237.921 34.925 L 246.321 34.925 L 236.081 53.565 L 246.721 74.925 L 238.481 74.925 Z" stroke-linecap="round"></path></g><g transform="matrix(1 0 0 1 289.669 56.6795)" id="SAvuNLe2F3CeHCg_q6L8_"><path style="stroke:none;stroke-width:1;stroke-dasharray:none;stroke-linecap:butt;stroke-dashoffset:0;stroke-linejoin:miter;stroke-miterlimit:4;fill:currentColor;fill-rule:nonzero;opacity:1" transform=" translate(-280.669, -56.6795)" d="M 252.054 71.223 L 252.054 71.223 Q 252.054 69.099 252.762 68.125 Q 253.47 67.152 255.889 67.152 L 255.889 67.152 Q 258.249 67.152 258.987 68.125 Q 259.724 69.099 259.724 71.223 L 259.724 71.223 Q 259.724 73.406 258.987 74.32 Q 258.249 75.235 255.889 75.235 L 255.889 75.235 Q 253.47 75.235 252.762 74.32 Q 252.054 73.406 252.054 71.223 Z M 274.12 75.471 L 274.12 75.471 Q 271.937 75.471 270.846 74.379 Q 269.754 73.288 269.754 71.046 L 269.754 71.046 L 269.754 39.068 L 275.654 37.593 L 275.654 70.515 Q 276.48 70.574 277.424 70.662 Q 278.368 70.751 279.843 70.81 L 279.843 70.81 L 279.489 74.822 Q 277.66 75.176 276.333 75.323 Q 275.005 75.471 274.12 75.471 Z M 280.905 49.452 L 265.624 49.452 L 265.624 45.381 L 280.905 45.381 L 280.905 49.452 Z M 286.864 53.287 L 286.864 53.287 Q 286.864 48.744 289.549 46.62 Q 292.233 44.496 298.015 44.496 L 298.015 44.496 Q 300.67 44.496 303.03 44.791 Q 305.39 45.086 307.809 45.794 L 307.809 45.794 L 306.983 50.101 Q 305.508 49.688 303.532 49.422 Q 301.555 49.157 299.785 49.157 L 299.785 49.157 Q 297.897 49.157 296.127 49.304 Q 294.357 49.452 293.059 49.688 L 293.059 49.688 L 293.059 56.65 Q 298.192 57.358 301.378 58.125 Q 304.564 58.892 306.275 59.924 Q 307.986 60.957 308.635 62.55 Q 309.284 64.143 309.284 66.562 L 309.284 66.562 Q 309.284 69.925 308.075 71.931 Q 306.865 73.937 304.122 74.851 Q 301.378 75.766 296.894 75.766 L 296.894 75.766 Q 294.298 75.766 291.614 75.323 Q 288.929 74.881 286.215 74.055 L 286.215 74.055 L 287.159 69.335 Q 291.643 71.105 296.835 71.105 L 296.835 71.105 Q 298.605 71.105 299.933 70.957 Q 301.26 70.81 303.089 70.279 L 303.089 70.279 L 303.089 63.317 Q 297.661 62.55 294.416 61.842 Q 291.171 61.134 289.549 60.101 Q 287.926 59.069 287.395 57.446 Q 286.864 55.824 286.864 53.287 Z" stroke-linecap="round"></path></g></svg></a><div class="x:flex x:gap-4 x:overflow-x-auto nextra-scrollbar x:py-1.5 x:max-md:hidden"><a class="x:focus-visible:nextra-focus x:text-sm x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100 x:whitespace-nowrap x:text-gray-600 x:hover:text-black x:dark:text-gray-400 x:dark:hover:text-gray-200 x:ring-inset x:transition-colors x:aria-[current]:font-medium x:aria-[current]:subpixel-antialiased x:aria-[current]:text-current" href="/">Home</a></div><div class="x:max-md:hidden"><div class="nextra-search x:relative x:flex x:items-center x:text-gray-900 x:dark:text-gray-300 x:contrast-more:text-gray-800 x:contrast-more:dark:text-gray-300"><input spellCheck="false" autoComplete="off" class="x:rounded-lg x:px-3 x:py-2 x:transition-all x:w-full x:md:w-64 x:text-base x:leading-tight x:md:text-sm x:bg-black/[.05] x:dark:bg-gray-50/10 x:placeholder:text-gray-600 x:dark:placeholder:text-gray-400 x:contrast-more:border x:contrast-more:border-current x:[&amp;::-webkit-search-cancel-button]:appearance-none" placeholder="Search documentationâ€¦" id="headlessui-combobox-input-_R_5ml7lb_" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/><kbd class="x:absolute x:my-1.5 x:select-none x:pointer-events-none x:end-1.5 x:transition-all x:h-5 x:rounded x:bg-nextra-bg x:px-1.5 x:font-mono x:text-[11px] x:font-medium x:text-gray-600 x:dark:text-gray-400 x:border nextra-border x:contrast-more:text-current x:items-center x:gap-1 x:flex x:max-sm:hidden not-prose x:invisible x:opacity-0">CTRL K</kbd></div></div><a href="https://github.com/finom/vovk" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus"><svg fill="currentColor" viewBox="3 3 18 18" height="24" aria-label="Project repository"><path d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z"></path></svg></a><a href="https://discord.com/invite/qdT8WEHUuP" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus"><svg fill="currentColor" viewBox="0 5 30.67 23.25" width="24"><path d="M26.0015 6.9529C24.0021 6.03845 21.8787 5.37198 19.6623 5C19.3833 5.48048 19.0733 6.13144 18.8563 6.64292C16.4989 6.30193 14.1585 6.30193 11.8336 6.64292C11.6166 6.13144 11.2911 5.48048 11.0276 5C8.79575 5.37198 6.67235 6.03845 4.6869 6.9529C0.672601 12.8736 -0.41235 18.6548 0.130124 24.3585C2.79599 26.2959 5.36889 27.4739 7.89682 28.2489C8.51679 27.4119 9.07477 26.5129 9.55525 25.5675C8.64079 25.2265 7.77283 24.808 6.93587 24.312C7.15286 24.1571 7.36986 23.9866 7.57135 23.8161C12.6241 26.1255 18.0969 26.1255 23.0876 23.8161C23.3046 23.9866 23.5061 24.1571 23.7231 24.312C22.8861 24.808 22.0182 25.2265 21.1037 25.5675C21.5842 26.5129 22.1422 27.4119 22.7621 28.2489C25.2885 27.4739 27.8769 26.2959 30.5288 24.3585C31.1952 17.7559 29.4733 12.0212 26.0015 6.9529ZM10.2527 20.8402C8.73376 20.8402 7.49382 19.4608 7.49382 17.7714C7.49382 16.082 8.70276 14.7025 10.2527 14.7025C11.7871 14.7025 13.0425 16.082 13.0115 17.7714C13.0115 19.4608 11.7871 20.8402 10.2527 20.8402ZM20.4373 20.8402C18.9183 20.8402 17.6768 19.4608 17.6768 17.7714C17.6768 16.082 18.8873 14.7025 20.4373 14.7025C21.9717 14.7025 23.2271 16.082 23.1961 17.7714C23.1961 19.4608 21.9872 20.8402 20.4373 20.8402Z"></path></svg></a><button class="x:transition x:cursor-pointer nextra-hamburger x:md:hidden" aria-label="Menu" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" height="24" class=""><g><path d="M4 6h16"></path></g><path d="M4 12h16"></path><g><path d="M4 18h16"></path></g></svg></button></nav></header><aside class="nextra-mobile-nav x:flex x:flex-col x:fixed x:inset-0 x:pt-(--nextra-navbar-height) x:z-20 x:overscroll-contain x:[contain:layout_style] x:md:hidden x:[.nextra-banner:not([class$=hidden])~&amp;]:pt-[calc(var(--nextra-banner-height)+var(--nextra-navbar-height))] x:bg-nextra-bg x:[transform:translate3d(0,-100%,0)]"><div class="x:px-4 x:pt-4"><div class="nextra-search x:relative x:flex x:items-center x:text-gray-900 x:dark:text-gray-300 x:contrast-more:text-gray-800 x:contrast-more:dark:text-gray-300"><input spellCheck="false" autoComplete="off" class="x:rounded-lg x:px-3 x:py-2 x:transition-all x:w-full x:md:w-64 x:text-base x:leading-tight x:md:text-sm x:bg-black/[.05] x:dark:bg-gray-50/10 x:placeholder:text-gray-600 x:dark:placeholder:text-gray-400 x:contrast-more:border x:contrast-more:border-current x:[&amp;::-webkit-search-cancel-button]:appearance-none" placeholder="Search documentationâ€¦" id="headlessui-combobox-input-_R_mqrlb_" role="combobox" type="search" aria-expanded="false" aria-autocomplete="list" data-headlessui-state="" value=""/><kbd class="x:absolute x:my-1.5 x:select-none x:pointer-events-none x:end-1.5 x:transition-all x:h-5 x:rounded x:bg-nextra-bg x:px-1.5 x:font-mono x:text-[11px] x:font-medium x:text-gray-600 x:dark:text-gray-400 x:border nextra-border x:contrast-more:text-current x:items-center x:gap-1 x:flex x:max-sm:hidden not-prose x:invisible x:opacity-0">CTRL K</kbd></div></div><ul class="x:grid x:gap-1 x:p-4 x:overflow-y-auto nextra-scrollbar nextra-mask"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/">Home</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">About</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/about">About Vovk.ts</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/saas">Framework for SaaS Apps</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/performance">Overhead Performance</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Getting Started</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/quick-install">Quick Install ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/manual-install">Manual Install ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/hello-world">&quot;Hello World!&quot; Example ðŸš§</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Common</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/schema">Schema</a></li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation">Validation<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/client">Client-Side Validation</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/standard">Standard Schema</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/zod">Zod 3 and 4</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/dto">class-validator</a></li></ul></div></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/inference">Type Inference</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Server-Side</li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment">Segment<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment/static">Static Segment</a></li></ul></div></li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller">Controller<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/request">VovkRequest Type</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/service">Service</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/errors">Errors</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/headers">Headers</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/redirect">redirect and notFound</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/decorator">Decorators</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/jsonlines">JSON Lines</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/fn">Callable Handlers</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/meta">Request Meta</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/progressive">Progressive Response ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/formdata">FormData</a></li></ul></div></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">TypeScript Client</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/typescript">TypeScript RPC</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/composed">Composed Client</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segmented">Segmented Client</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/imports">Imports Customization</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Other Clients</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/python">Python RPC ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/rust">Rust RPC ðŸ§ª</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Config &amp; CLI</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/config">Config</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/cli">CLI</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/bundle"><code class="nextra-code">vovk bundle ðŸ§ª ðŸš§</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/dev"><code class="nextra-code">vovk dev</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/generate"><code class="nextra-code">vovk generate</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/init"><code class="nextra-code">vovk init</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/new"><code class="nextra-code">vovk new</code></a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">etc.</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/openapi">OpenAPI Specification</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/multitenant">Multitenancy ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/codegen">OpenAPI Codegen</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/templates">Client Templates</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/packages">Packages</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/api-ref">API Reference ðŸš§</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">AI Applications</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/llm">LLM Completions</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/function-calling">Function Calling</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/realtime-ui">Real-Time UI ðŸ§ª ðŸš§</a></li><li class="active"><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:bg-primary-100 x:font-semibold x:text-primary-800 x:dark:bg-primary-400/10 x:dark:text-primary-600 x:contrast-more:border-primary-500!" href="/polling">Real-Time Polling ðŸ§ª ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/mcp">MCP Server</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Random Recipes &amp; Guides</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/authorization">Authorization with Decorators</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/proxy">Proxy Endpoints</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/nestjs">RPC for NestJS</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/other-scenarios">Other Usage Scenarios</a></li></ul><div class="nextra-sidebar-footer x:border-t nextra-border x:flex x:items-center x:gap-2 x:py-4 x:mx-4 x:mt-auto"><button title="Change theme" class="x:cursor-pointer x:h-7 x:rounded-md x:px-2 x:text-xs x:font-medium x:transition-colors x:text-gray-600 x:dark:text-gray-400 x:flex x:items-center x:gap-2 x:grow" id="headlessui-listbox-button-_R_rerlb_" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><svg fill="currentColor" viewBox="2 2 20 20" stroke="currentColor" height="12"><path stroke-linecap="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>Light</button></div></aside><div class="x:mx-auto x:flex x:max-w-(--nextra-content-width)"><aside id="_R_lfivblb_" class="nextra-sidebar x:print:hidden x:transition-all x:ease-in-out x:max-md:hidden x:flex x:flex-col x:h-[calc(100dvh-var(--nextra-navbar-height))] x:top-(--nextra-navbar-height) x:shrink-0 x:w-64 x:sticky"><div class="x:p-4 x:overflow-y-auto nextra-scrollbar nextra-mask x:grow"><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1"><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">About</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/about">About Vovk.ts</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/saas">Framework for SaaS Apps</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/performance">Overhead Performance</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Getting Started</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/quick-install">Quick Install ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/manual-install">Manual Install ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/hello-world">&quot;Hello World!&quot; Example ðŸš§</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Common</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/schema">Schema</a></li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation">Validation<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/client">Client-Side Validation</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/standard">Standard Schema</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/zod">Zod 3 and 4</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/validation/dto">class-validator</a></li></ul></div></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/inference">Type Inference</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Server-Side</li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment">Segment<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segment/static">Static Segment</a></li></ul></div></li><li class="open"><a class="x:focus-visible:nextra-focus x:items-center x:justify-between x:gap-2 x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller">Controller<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="18" class="x:shrink-0 x:rounded-sm x:p-0.5 x:hover:bg-gray-800/5 x:dark:hover:bg-gray-100/5 x:motion-reduce:transition-none x:origin-center x:transition-all x:rtl:-rotate-180 x:ltr:rotate-90 x:rtl:-rotate-270"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a><div class="x:transform-gpu x:transition-all x:ease-in-out x:motion-reduce:transition-none x:opacity-100" style="transition-duration:500ms"><ul class="x:grid x:gap-1 x:relative x:before:absolute x:before:inset-y-1 x:before:w-px x:before:bg-gray-200 x:before:content-[&quot;&quot;] x:dark:before:bg-neutral-800 x:ps-3 x:before:start-0 x:pt-1 x:ms-3"><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/introduction">Getting Started</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/request">VovkRequest Type</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/service">Service</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/errors">Errors</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/headers">Headers</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/redirect">redirect and notFound</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/decorator">Decorators</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/jsonlines">JSON Lines</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/fn">Callable Handlers</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/meta">Request Meta</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/progressive">Progressive Response ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/controller/formdata">FormData</a></li></ul></div></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">TypeScript Client</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/typescript">TypeScript RPC</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/composed">Composed Client</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/segmented">Segmented Client</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/imports">Imports Customization</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Other Clients</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/python">Python RPC ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/rust">Rust RPC ðŸ§ª</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Config &amp; CLI</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/config">Config</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/cli">CLI</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/bundle"><code class="nextra-code">vovk bundle ðŸ§ª ðŸš§</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/dev"><code class="nextra-code">vovk dev</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/generate"><code class="nextra-code">vovk generate</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/init"><code class="nextra-code">vovk init</code></a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/new"><code class="nextra-code">vovk new</code></a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">etc.</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/openapi">OpenAPI Specification</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/multitenant">Multitenancy ðŸ§ª</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/codegen">OpenAPI Codegen</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/templates">Client Templates</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/packages">Packages</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/api-ref">API Reference ðŸš§</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">AI Applications</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/llm">LLM Completions</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/function-calling">Function Calling</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/realtime-ui">Real-Time UI ðŸ§ª ðŸš§</a></li><li class="active"><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:bg-primary-100 x:font-semibold x:text-primary-800 x:dark:bg-primary-400/10 x:dark:text-primary-600 x:contrast-more:border-primary-500!" href="/polling">Real-Time Polling ðŸ§ª ðŸš§</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/mcp">MCP Server</a></li><li class="[word-break:break-word] x:not-first:mt-5 x:mb-2 x:px-2 x:py-1.5 x:text-sm x:font-semibold x:text-gray-900 x:dark:text-gray-100">Random Recipes &amp; Guides</li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/authorization">Authorization with Decorators</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/proxy">Proxy Endpoints</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/nestjs">RPC for NestJS</a></li><li class=""><a class="x:focus-visible:nextra-focus x:flex x:rounded x:px-2 x:py-1.5 x:text-sm x:transition-colors x:[word-break:break-word] x:cursor-pointer x:contrast-more:border x:text-gray-600 x:hover:bg-gray-100 x:hover:text-gray-900 x:dark:text-neutral-400 x:dark:hover:bg-primary-100/5 x:dark:hover:text-gray-50 x:contrast-more:text-gray-900 x:contrast-more:dark:text-gray-50 x:contrast-more:border-transparent x:contrast-more:hover:border-gray-900 x:contrast-more:dark:hover:border-gray-50" href="/other-scenarios">Other Usage Scenarios</a></li></ul></div></div><div class="x:sticky x:bottom-0 x:bg-nextra-bg nextra-sidebar-footer x:border-t nextra-border x:flex x:items-center x:gap-2 x:py-4 x:mx-4"><button title="Change theme" class="x:cursor-pointer x:h-7 x:rounded-md x:px-2 x:text-xs x:font-medium x:transition-colors x:text-gray-600 x:dark:text-gray-400 x:flex x:items-center x:gap-2 x:grow" id="headlessui-listbox-button-_R_6talfivblb_" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><svg fill="currentColor" viewBox="2 2 20 20" stroke="currentColor" height="12"><path stroke-linecap="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>Light</button><button class="x:transition x:cursor-pointer x:rounded-md x:p-2 x:text-gray-600 x:dark:text-gray-400" aria-expanded="true" aria-controls="_R_lfivblb_" title="Collapse sidebar" type="button" data-headlessui-state=""><svg viewBox="0 0 16 16" fill="currentColor" height="12" class=""><path d="M4.177 7.823l2.396-2.396A.25.25 0 017 5.604v4.792a.25.25 0 01-.427.177L4.177 8.177a.25.25 0 010-.354z"></path><path fill-rule="evenodd" d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v12.5A1.75 1.75 0 0114.25 16H1.75A1.75 1.75 0 010 14.25V1.75zm1.75-.25a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25H9.5v-13H1.75zm12.5 13H11v-13h3.25a.25.25 0 01.25.25v12.5a.25.25 0 01-.25.25z"></path></svg></button></div></aside><nav class="nextra-toc x:order-last x:max-xl:hidden x:w-64 x:shrink-0 x:print:hidden" aria-label="table of contents"><div class="x:grid x:grid-rows-[min-content_1fr_min-content] x:sticky x:top-(--nextra-navbar-height) x:text-sm x:max-h-[calc(100vh-var(--nextra-navbar-height))]"><p class="x:pt-6 x:px-4 x:font-semibold x:tracking-tight">On This Page</p><ul class="x:p-4 nextra-scrollbar x:overscroll-y-contain x:overflow-y-auto x:hyphens-auto nextra-mask"><li class="x:my-2 x:scroll-my-6 x:scroll-py-6"><a href="#redis-db-as-event-bus" class="x:focus-visible:nextra-focus x:font-semibold x:block x:transition-colors x:subpixel-antialiased x:text-gray-600 x:hover:text-gray-900 x:dark:text-gray-400 x:dark:hover:text-gray-300 x:contrast-more:text-gray-900 x:contrast-more:underline x:contrast-more:dark:text-gray-50 x:break-words">Redis DB as event bus</a></li><li class="x:my-2 x:scroll-my-6 x:scroll-py-6"><a href="#polling-controller-and-service" class="x:focus-visible:nextra-focus x:font-semibold x:block x:transition-colors x:subpixel-antialiased x:text-gray-600 x:hover:text-gray-900 x:dark:text-gray-400 x:dark:hover:text-gray-300 x:contrast-more:text-gray-900 x:contrast-more:underline x:contrast-more:dark:text-gray-50 x:break-words">Polling controller and service</a></li><li class="x:my-2 x:scroll-my-6 x:scroll-py-6"><a href="#client-side-logic" class="x:focus-visible:nextra-focus x:font-semibold x:block x:transition-colors x:subpixel-antialiased x:text-gray-600 x:hover:text-gray-900 x:dark:text-gray-400 x:dark:hover:text-gray-300 x:contrast-more:text-gray-900 x:contrast-more:underline x:contrast-more:dark:text-gray-50 x:break-words">Client-side logic</a></li><li class="x:my-2 x:scroll-my-6 x:scroll-py-6"><a href="#bonus-telegram-bot-unstable" class="x:focus-visible:nextra-focus x:font-semibold x:block x:transition-colors x:subpixel-antialiased x:text-gray-600 x:hover:text-gray-900 x:dark:text-gray-400 x:dark:hover:text-gray-300 x:contrast-more:text-gray-900 x:contrast-more:underline x:contrast-more:dark:text-gray-50 x:break-words">Bonus: Telegram bot (unstable)</a></li></ul><div class="x:grid x:gap-2 x:py-4 x:mx-4 x:border-t nextra-border"><a href="https://github.com/shuding/nextra/issues/new?title=Feedback%20for%20%E2%80%9CReal-time%20polling%20(experimental)%E2%80%9D&amp;labels=feedback" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-xs x:font-medium x:transition x:text-gray-600 x:dark:text-gray-400 x:hover:text-gray-800 x:dark:hover:text-gray-200 x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100">Question? Give us feedback<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a><a href="https://github.com/shuding/nextra/tree/main/docs/src/app/polling/page.mdx" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-xs x:font-medium x:transition x:text-gray-600 x:dark:text-gray-400 x:hover:text-gray-800 x:dark:hover:text-gray-200 x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100">Edit this page<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a><button class="x:transition x:cursor-pointer x:flex x:items-center x:gap-1.5 x:whitespace-nowrap x:opacity-0 x:text-xs x:font-medium x:transition x:text-gray-600 x:dark:text-gray-400 x:hover:text-gray-800 x:dark:hover:text-gray-200 x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100" aria-hidden="true" type="button" disabled="" data-headlessui-state="disabled" data-disabled="">Scroll to top<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="1.1em" class="x:-rotate-90 x:border x:rounded-full x:border-current"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div></div></nav><article class="x:w-full x:min-w-0 x:break-words x:min-h-[calc(100vh-var(--nextra-navbar-height))] x:text-slate-700 x:dark:text-slate-200 x:pb-8 x:px-4 x:pt-4 x:md:px-12"><div class="nextra-breadcrumb x:mt-1.5 x:flex x:items-center x:gap-1 x:overflow-hidden x:text-sm x:text-gray-600 x:dark:text-gray-400 x:contrast-more:text-current"><span class="x:whitespace-nowrap x:transition-colors x:font-medium x:text-black x:dark:text-gray-100" title="Real-Time Polling ðŸ§ª ðŸš§">Real-Time Polling ðŸ§ª ðŸš§</span></div><div class="x:border x:inline-flex x:rounded-md x:items-stretch nextra-border x:float-end x:overflow-hidden"><button class="x:transition x:cursor-pointer x:ps-2 x:pe-1 x:flex x:gap-2 x:text-sm x:font-medium x:items-center" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg>Copy page</button><button class="x:cursor-pointer x:h-7 x:rounded-md x:px-2 x:text-xs x:font-medium x:transition-colors x:text-gray-600 x:dark:text-gray-400 x:rounded-none" id="headlessui-listbox-button-_R_6sl5fivblb_" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" width="12" class="x:rotate-90"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div><div id="nextra-skip-nav"></div><main data-pagefind-body="true"><p class="x:not-first:mt-[1.25em] x:leading-7">TODO: deletions need to be explicit
TODO: Add ticker</p>
<h1 class="x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-bold x:mt-2 x:text-4xl">Real-time polling (experimental)</h1>
<p class="x:not-first:mt-[1.25em] x:leading-7">In the <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/realtime-ui">previous article</a>, we covered how to use the OpenAPI Real-time API to deliver instant UI updates while the user interacts with the app. The LLM functions created with <code class="nextra-code" dir="ltr">createLLMTools</code> ran in the browser, where the AI performed HTTP requests to the server using RPC modules.</p>
<p class="x:not-first:mt-[1.25em] x:leading-7">On this page, we explain how to use database polling to receive updates triggered by other users or third-party services (such as <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/mcp">MCP</a>), keeping the UI in sync with the database. To ensure the app can be deployed to any hosting provider, we avoid non-HTTP protocols such as WebSockets and instead use HTTP polling powered by <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/controller/jsonlines">JSONLines</a>.</p>
<div class="example"><div><p>Poll Ticker</p><h2>0</h2></div><p class="x:not-first:mt-[1.25em] x:leading-7"><a href="https://examples.vovk.dev/polling" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">View on examples.vovk.dev Â»<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></p></div>
<h2 id="redis-db-as-event-bus" class="x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border">Redis DB as event bus<a href="#redis-db-as-event-bus" class="x:focus-visible:nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="x:not-first:mt-[1.25em] x:leading-7">While we could poll the main Postgres database for changes, that approach is inefficient. Instead, we use Redis as an event bus. Whenever the main database changes, we write a small event to Redis. Our polling service reads these events every second and relays them to clients with the app open.</p>
<p class="x:not-first:mt-[1.25em] x:leading-7">Because we use <a href="https://www.prisma.io/" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">Prisma<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a> as our ORM, we rely on <a href="https://www.prisma.io/docs/orm/prisma-client/client-extensions" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">Prisma Extensions<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a> to hook into database operations and write events to Redis. This is where the <code class="nextra-code" dir="ltr">DatabaseService</code> mentioned in the <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/realtime-ui">previous article</a> comes into play.</p>
<div class="bg-code rounded-lg mt-4" id="_S_3_"><div class="pb-2 px-4 text-sm mb-1"><div class="inline-block mr-4 mb-1"><span title="src/modules/database/DatabaseService.ts" class="pb-0.5 cursor-pointer border-b-2 border-solid text-neutral-900 border-blue-500 dark:text-gray-100 dark:border-slate-500">DatabaseService.ts</span><a class="inline-block align-middle ml-1" href="https://github.com/finom/vovk-kanban-demo/tree/main/src/modules/database/DatabaseService.ts" target="_blank" title="View on GitHub"><svg width="16" height="16" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 11.9976C14 9.5059 11.683 7 8.85714 7C8.52241 7 7.41904 7.00001 7.14286 7.00001C4.30254 7.00001 2 9.23752 2 11.9976C2 14.376 3.70973 16.3664 6 16.8714C6.36756 16.9525 6.75006 16.9952 7.14286 16.9952" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 11.9976C10 14.4893 12.317 16.9952 15.1429 16.9952C15.4776 16.9952 16.581 16.9952 16.8571 16.9952C19.6975 16.9952 22 14.7577 22 11.9976C22 9.6192 20.2903 7.62884 18 7.12383C17.6324 7.04278 17.2499 6.99999 16.8571 6.99999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><div class="h-full github-tab-content " id="tab-_S_3_-0"><div class="border dark:!border-gray-800 text-sm"><div data-theme="dark" class="hidden dark:block"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:3ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { PrismaClient } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:3ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { PrismaNeon } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@prisma/adapter-neon&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:3ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseEventsService, { </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> DBChange } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseEventsService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:3ch">4</span><span style="color:#FF7B72">import type</span><span style="color:#C9D1D9"> { BaseEntity } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/types&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:3ch">5</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:3ch">6</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabaseService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:3ch">7</span><span style="color:#FF7B72">  static get </span><span style="color:#D2A8FF">prisma</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:3ch">8</span><span style="color:#FF7B72">    return</span><span style="color:#C9D1D9"> (</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.#prisma </span><span style="color:#FF7B72">??= </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">getClient</span><span style="color:#C9D1D9">());</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:3ch">9</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:3ch">10</span><span style="color:#FF7B72">  static</span><span style="color:#FFA657"> #prisma</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> ReturnType&lt;</span><span style="color:#FF7B72">typeof </span><span style="color:#C9D1D9">DatabaseService</span><span style="color:#FFA657">.</span><span style="color:#C9D1D9">getClient</span><span style="color:#FFA657">&gt; </span><span style="color:#FF7B72">| </span><span style="color:#79C0FF">null </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">null</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:3ch">11</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:3ch">12</span><span style="color:#FF7B72">  private static </span><span style="color:#D2A8FF">getClient</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:3ch">13</span><span style="color:#FF7B72">    const </span><span style="color:#79C0FF">prisma </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">PrismaClient</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:3ch">14</span><span style="color:#C9D1D9">      adapter: </span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">PrismaNeon</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:3ch">15</span><span style="color:#C9D1D9">        connectionString: </span><span style="color:#A5D6FF">`${</span><span style="color:#C9D1D9">process</span><span style="color:#A5D6FF">.</span><span style="color:#C9D1D9">env</span><span style="color:#A5D6FF">.</span><span style="color:#79C0FF">DATABASE_URL</span><span style="color:#A5D6FF">}`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:3ch">16</span><span style="color:#C9D1D9">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:3ch">17</span><span style="color:#C9D1D9">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:3ch">18</span><span style="color:#C9D1D9"></span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:3ch">19</span><span style="color:#C9D1D9">    DatabaseEventsService.</span><span style="color:#D2A8FF">beginEmitting</span><span style="color:#C9D1D9">();</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:3ch">20</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:3ch">21</span><span style="color:#FF7B72">    return</span><span style="color:#C9D1D9"> prisma.</span><span style="color:#D2A8FF">$extends</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:3ch">22</span><span style="color:#C9D1D9">      name: </span><span style="color:#A5D6FF">&quot;events&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:3ch">23</span><span style="color:#C9D1D9">      query: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:3ch">24</span><span style="color:#C9D1D9">        $allModels: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:3ch">25</span><span style="color:#FF7B72">          async </span><span style="color:#D2A8FF">$allOperations</span><span style="color:#C9D1D9">({ </span><span style="color:#FFA657">model</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">operation</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">args</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">query</span><span style="color:#C9D1D9"> }) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:3ch">26</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">allowedOperations </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> [</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:3ch">27</span><span style="color:#A5D6FF">              &quot;create&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:3ch">28</span><span style="color:#A5D6FF">              &quot;update&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:3ch">29</span><span style="color:#A5D6FF">              &quot;delete&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:3ch">30</span><span style="color:#A5D6FF">              &quot;findMany&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:3ch">31</span><span style="color:#A5D6FF">              &quot;findUnique&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:3ch">32</span><span style="color:#A5D6FF">              &quot;findFirst&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:3ch">33</span><span style="color:#A5D6FF">              &quot;count&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:3ch">34</span><span style="color:#C9D1D9">            ] </span><span style="color:#FF7B72">as const</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:3ch">35</span><span style="color:#FF7B72">            type </span><span style="color:#FFA657">AllowedOperation </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">typeof</span><span style="color:#C9D1D9"> allowedOperations)[</span><span style="color:#79C0FF">number</span><span style="color:#C9D1D9">];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:3ch">36</span><span style="color:#FF7B72">            if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">!</span><span style="color:#C9D1D9">allowedOperations.</span><span style="color:#D2A8FF">includes</span><span style="color:#C9D1D9">(operation </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">AllowedOperation</span><span style="color:#C9D1D9">)) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:3ch">37</span><span style="color:#FF7B72">              throw new </span><span style="color:#D2A8FF">Error</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:3ch">38</span><span style="color:#A5D6FF">                `Unsupported database operation &quot;${</span><span style="color:#C9D1D9">operation</span><span style="color:#A5D6FF">}&quot; on model &quot;${</span><span style="color:#C9D1D9">model</span><span style="color:#A5D6FF">}&quot;`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:3ch">39</span><span style="color:#C9D1D9">              );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:3ch">40</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:3ch">41</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">result </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">await </span><span style="color:#D2A8FF">query</span><span style="color:#C9D1D9">(args)) </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">BaseEntity </span><span style="color:#FF7B72">| </span><span style="color:#FFA657">BaseEntity</span><span style="color:#C9D1D9">[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:3ch">42</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:3ch">43</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">now </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">().</span><span style="color:#D2A8FF">toISOString</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:3ch">44</span><span style="color:#FF7B72">            let</span><span style="color:#C9D1D9"> change</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">DBChange </span><span style="color:#FF7B72">| </span><span style="color:#79C0FF">null </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">null</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:3ch">45</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:3ch">46</span><span style="color:#FF7B72">            const </span><span style="color:#D2A8FF">makeChange </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:3ch">47</span><span style="color:#FFA657">              entity</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">BaseEntity</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:3ch">48</span><span style="color:#FFA657">              type</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">[</span><span style="color:#A5D6FF">&quot;type&quot;</span><span style="color:#C9D1D9">],</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:3ch">49</span><span style="color:#C9D1D9">            ) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:3ch">50</span><span style="color:#C9D1D9">              id: entity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:3ch">51</span><span style="color:#C9D1D9">              entityType: entity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:3ch">52</span><span style="color:#C9D1D9">              date:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:3ch">53</span><span style="color:#C9D1D9">                type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;delete&quot;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:3ch">54</span><span style="color:#FF7B72">                  ?</span><span style="color:#C9D1D9"> now</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:3ch">55</span><span style="color:#FF7B72">                  :</span><span style="color:#C9D1D9"> entity.updatedAt</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:3ch">56</span><span style="color:#FF7B72">                    ? new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(entity.updatedAt).</span><span style="color:#D2A8FF">toISOString</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:3ch">57</span><span style="color:#FF7B72">                    :</span><span style="color:#C9D1D9"> now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:3ch">58</span><span style="color:#C9D1D9">              type,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:3ch">59</span><span style="color:#C9D1D9">            });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:3ch">60</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:3ch">61</span><span style="color:#FF7B72">            switch</span><span style="color:#C9D1D9"> (operation </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">AllowedOperation</span><span style="color:#C9D1D9">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:3ch">62</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;create&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:3ch">63</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:3ch">64</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;create&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:3ch">65</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:3ch">66</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:3ch">67</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:3ch">68</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:3ch">69</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:3ch">70</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:3ch">71</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:3ch">72</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:3ch">73</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:3ch">74</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:3ch">75</span><span style="color:#8B949E">                  // Automatically add __isDeleted flag to deletion results</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:3ch">76</span><span style="color:#C9D1D9">                  Object.</span><span style="color:#D2A8FF">assign</span><span style="color:#C9D1D9">(result, { __isDeleted: </span><span style="color:#79C0FF">true</span><span style="color:#C9D1D9"> });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:3ch">77</span><span style="color:#C9D1D9">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="78" style="width:3ch">78</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="79" style="width:3ch">79</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="80" style="width:3ch">80</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findMany&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="81" style="width:3ch">81</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findUnique&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="82" style="width:3ch">82</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findFirst&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="83" style="width:3ch">83</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;count&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="84" style="width:3ch">84</span><span style="color:#8B949E">                // no events</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="85" style="width:3ch">85</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="86" style="width:3ch">86</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="87" style="width:3ch">87</span><span style="color:#FF7B72">              default</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="88" style="width:3ch">88</span><span style="color:#C9D1D9">                console.</span><span style="color:#D2A8FF">warn</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="89" style="width:3ch">89</span><span style="color:#A5D6FF">                  `Unhandled Prisma operation: ${</span><span style="color:#C9D1D9">operation</span><span style="color:#A5D6FF">} for model: ${</span><span style="color:#C9D1D9">model</span><span style="color:#A5D6FF">}`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="90" style="width:3ch">90</span><span style="color:#C9D1D9">                );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="91" style="width:3ch">91</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="92" style="width:3ch">92</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="93" style="width:3ch">93</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="94" style="width:3ch">94</span><span style="color:#FF7B72">            if</span><span style="color:#C9D1D9"> (change) {</span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="95" style="width:3ch">95</span><span style="color:#FF7B72">              await</span><span style="color:#C9D1D9"> DatabaseEventsService.</span><span style="color:#D2A8FF">createChanges</span><span style="color:#C9D1D9">([change]);</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="96" style="width:3ch">96</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="97" style="width:3ch">97</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="98" style="width:3ch">98</span><span style="color:#FF7B72">            return</span><span style="color:#C9D1D9"> result;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="99" style="width:3ch">99</span><span style="color:#C9D1D9">          },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="100" style="width:3ch">100</span><span style="color:#C9D1D9">        },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="101" style="width:3ch">101</span><span style="color:#C9D1D9">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="102" style="width:3ch">102</span><span style="color:#C9D1D9">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="103" style="width:3ch">103</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="104" style="width:3ch">104</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:3ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { PrismaClient } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:3ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { PrismaNeon } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@prisma/adapter-neon&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:3ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseEventsService, { </span><span style="color:#CF222E">type</span><span style="color:#24292F"> DBChange } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseEventsService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:3ch">4</span><span style="color:#CF222E">import type</span><span style="color:#24292F"> { BaseEntity } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/types&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:3ch">5</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:3ch">6</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabaseService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:3ch">7</span><span style="color:#CF222E">  static get </span><span style="color:#8250DF">prisma</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:3ch">8</span><span style="color:#CF222E">    return</span><span style="color:#24292F"> (</span><span style="color:#0550AE">this</span><span style="color:#24292F">.#prisma </span><span style="color:#CF222E">??= </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">getClient</span><span style="color:#24292F">());</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:3ch">9</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:3ch">10</span><span style="color:#CF222E">  static</span><span style="color:#953800"> #prisma</span><span style="color:#CF222E">:</span><span style="color:#953800"> ReturnType&lt;</span><span style="color:#CF222E">typeof </span><span style="color:#24292F">DatabaseService</span><span style="color:#953800">.</span><span style="color:#24292F">getClient</span><span style="color:#953800">&gt; </span><span style="color:#CF222E">| </span><span style="color:#0550AE">null </span><span style="color:#CF222E">= </span><span style="color:#0550AE">null</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:3ch">11</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:3ch">12</span><span style="color:#CF222E">  private static </span><span style="color:#8250DF">getClient</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:3ch">13</span><span style="color:#CF222E">    const </span><span style="color:#0550AE">prisma </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">PrismaClient</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:3ch">14</span><span style="color:#24292F">      adapter: </span><span style="color:#CF222E">new </span><span style="color:#8250DF">PrismaNeon</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:3ch">15</span><span style="color:#24292F">        connectionString: </span><span style="color:#0A3069">`${</span><span style="color:#24292F">process</span><span style="color:#0A3069">.</span><span style="color:#24292F">env</span><span style="color:#0A3069">.</span><span style="color:#0550AE">DATABASE_URL</span><span style="color:#0A3069">}`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:3ch">16</span><span style="color:#24292F">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:3ch">17</span><span style="color:#24292F">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:3ch">18</span><span style="color:#24292F"></span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:3ch">19</span><span style="color:#24292F">    DatabaseEventsService.</span><span style="color:#8250DF">beginEmitting</span><span style="color:#24292F">();</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:3ch">20</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:3ch">21</span><span style="color:#CF222E">    return</span><span style="color:#24292F"> prisma.</span><span style="color:#8250DF">$extends</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:3ch">22</span><span style="color:#24292F">      name: </span><span style="color:#0A3069">&quot;events&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:3ch">23</span><span style="color:#24292F">      query: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:3ch">24</span><span style="color:#24292F">        $allModels: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:3ch">25</span><span style="color:#CF222E">          async </span><span style="color:#8250DF">$allOperations</span><span style="color:#24292F">({ </span><span style="color:#953800">model</span><span style="color:#24292F">, </span><span style="color:#953800">operation</span><span style="color:#24292F">, </span><span style="color:#953800">args</span><span style="color:#24292F">, </span><span style="color:#953800">query</span><span style="color:#24292F"> }) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:3ch">26</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">allowedOperations </span><span style="color:#CF222E">=</span><span style="color:#24292F"> [</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:3ch">27</span><span style="color:#0A3069">              &quot;create&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:3ch">28</span><span style="color:#0A3069">              &quot;update&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:3ch">29</span><span style="color:#0A3069">              &quot;delete&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:3ch">30</span><span style="color:#0A3069">              &quot;findMany&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:3ch">31</span><span style="color:#0A3069">              &quot;findUnique&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:3ch">32</span><span style="color:#0A3069">              &quot;findFirst&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:3ch">33</span><span style="color:#0A3069">              &quot;count&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:3ch">34</span><span style="color:#24292F">            ] </span><span style="color:#CF222E">as const</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:3ch">35</span><span style="color:#CF222E">            type </span><span style="color:#953800">AllowedOperation </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><span style="color:#CF222E">typeof</span><span style="color:#24292F"> allowedOperations)[</span><span style="color:#0550AE">number</span><span style="color:#24292F">];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:3ch">36</span><span style="color:#CF222E">            if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">!</span><span style="color:#24292F">allowedOperations.</span><span style="color:#8250DF">includes</span><span style="color:#24292F">(operation </span><span style="color:#CF222E">as </span><span style="color:#953800">AllowedOperation</span><span style="color:#24292F">)) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:3ch">37</span><span style="color:#CF222E">              throw new </span><span style="color:#8250DF">Error</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:3ch">38</span><span style="color:#0A3069">                `Unsupported database operation &quot;${</span><span style="color:#24292F">operation</span><span style="color:#0A3069">}&quot; on model &quot;${</span><span style="color:#24292F">model</span><span style="color:#0A3069">}&quot;`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:3ch">39</span><span style="color:#24292F">              );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:3ch">40</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:3ch">41</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">result </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><span style="color:#CF222E">await </span><span style="color:#8250DF">query</span><span style="color:#24292F">(args)) </span><span style="color:#CF222E">as </span><span style="color:#953800">BaseEntity </span><span style="color:#CF222E">| </span><span style="color:#953800">BaseEntity</span><span style="color:#24292F">[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:3ch">42</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:3ch">43</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">now </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">().</span><span style="color:#8250DF">toISOString</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:3ch">44</span><span style="color:#CF222E">            let</span><span style="color:#24292F"> change</span><span style="color:#CF222E">: </span><span style="color:#953800">DBChange </span><span style="color:#CF222E">| </span><span style="color:#0550AE">null </span><span style="color:#CF222E">= </span><span style="color:#0550AE">null</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:3ch">45</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:3ch">46</span><span style="color:#CF222E">            const </span><span style="color:#8250DF">makeChange </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:3ch">47</span><span style="color:#953800">              entity</span><span style="color:#CF222E">: </span><span style="color:#953800">BaseEntity</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:3ch">48</span><span style="color:#953800">              type</span><span style="color:#CF222E">: </span><span style="color:#953800">DBChange</span><span style="color:#24292F">[</span><span style="color:#0A3069">&quot;type&quot;</span><span style="color:#24292F">],</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:3ch">49</span><span style="color:#24292F">            ) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:3ch">50</span><span style="color:#24292F">              id: entity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:3ch">51</span><span style="color:#24292F">              entityType: entity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:3ch">52</span><span style="color:#24292F">              date:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:3ch">53</span><span style="color:#24292F">                type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;delete&quot;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:3ch">54</span><span style="color:#CF222E">                  ?</span><span style="color:#24292F"> now</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:3ch">55</span><span style="color:#CF222E">                  :</span><span style="color:#24292F"> entity.updatedAt</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:3ch">56</span><span style="color:#CF222E">                    ? new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(entity.updatedAt).</span><span style="color:#8250DF">toISOString</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:3ch">57</span><span style="color:#CF222E">                    :</span><span style="color:#24292F"> now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:3ch">58</span><span style="color:#24292F">              type,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:3ch">59</span><span style="color:#24292F">            });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:3ch">60</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:3ch">61</span><span style="color:#CF222E">            switch</span><span style="color:#24292F"> (operation </span><span style="color:#CF222E">as </span><span style="color:#953800">AllowedOperation</span><span style="color:#24292F">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:3ch">62</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;create&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:3ch">63</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:3ch">64</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;create&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:3ch">65</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:3ch">66</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:3ch">67</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:3ch">68</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:3ch">69</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:3ch">70</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:3ch">71</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:3ch">72</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:3ch">73</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:3ch">74</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:3ch">75</span><span style="color:#6E7781">                  // Automatically add __isDeleted flag to deletion results</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:3ch">76</span><span style="color:#24292F">                  Object.</span><span style="color:#8250DF">assign</span><span style="color:#24292F">(result, { __isDeleted: </span><span style="color:#0550AE">true</span><span style="color:#24292F"> });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:3ch">77</span><span style="color:#24292F">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="78" style="width:3ch">78</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="79" style="width:3ch">79</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="80" style="width:3ch">80</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findMany&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="81" style="width:3ch">81</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findUnique&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="82" style="width:3ch">82</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findFirst&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="83" style="width:3ch">83</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;count&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="84" style="width:3ch">84</span><span style="color:#6E7781">                // no events</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="85" style="width:3ch">85</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="86" style="width:3ch">86</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="87" style="width:3ch">87</span><span style="color:#CF222E">              default</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="88" style="width:3ch">88</span><span style="color:#24292F">                console.</span><span style="color:#8250DF">warn</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="89" style="width:3ch">89</span><span style="color:#0A3069">                  `Unhandled Prisma operation: ${</span><span style="color:#24292F">operation</span><span style="color:#0A3069">} for model: ${</span><span style="color:#24292F">model</span><span style="color:#0A3069">}`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="90" style="width:3ch">90</span><span style="color:#24292F">                );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="91" style="width:3ch">91</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="92" style="width:3ch">92</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="93" style="width:3ch">93</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="94" style="width:3ch">94</span><span style="color:#CF222E">            if</span><span style="color:#24292F"> (change) {</span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="95" style="width:3ch">95</span><span style="color:#CF222E">              await</span><span style="color:#24292F"> DatabaseEventsService.</span><span style="color:#8250DF">createChanges</span><span style="color:#24292F">([change]);</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="96" style="width:3ch">96</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="97" style="width:3ch">97</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="98" style="width:3ch">98</span><span style="color:#CF222E">            return</span><span style="color:#24292F"> result;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="99" style="width:3ch">99</span><span style="color:#24292F">          },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="100" style="width:3ch">100</span><span style="color:#24292F">        },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="101" style="width:3ch">101</span><span style="color:#24292F">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="102" style="width:3ch">102</span><span style="color:#24292F">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="103" style="width:3ch">103</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="104" style="width:3ch">104</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div> <div data-theme="light" class="dark:hidden"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:3ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { PrismaClient } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:3ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { PrismaNeon } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@prisma/adapter-neon&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:3ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseEventsService, { </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> DBChange } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseEventsService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:3ch">4</span><span style="color:#FF7B72">import type</span><span style="color:#C9D1D9"> { BaseEntity } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/types&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:3ch">5</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:3ch">6</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabaseService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:3ch">7</span><span style="color:#FF7B72">  static get </span><span style="color:#D2A8FF">prisma</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:3ch">8</span><span style="color:#FF7B72">    return</span><span style="color:#C9D1D9"> (</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.#prisma </span><span style="color:#FF7B72">??= </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">getClient</span><span style="color:#C9D1D9">());</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:3ch">9</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:3ch">10</span><span style="color:#FF7B72">  static</span><span style="color:#FFA657"> #prisma</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> ReturnType&lt;</span><span style="color:#FF7B72">typeof </span><span style="color:#C9D1D9">DatabaseService</span><span style="color:#FFA657">.</span><span style="color:#C9D1D9">getClient</span><span style="color:#FFA657">&gt; </span><span style="color:#FF7B72">| </span><span style="color:#79C0FF">null </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">null</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:3ch">11</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:3ch">12</span><span style="color:#FF7B72">  private static </span><span style="color:#D2A8FF">getClient</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:3ch">13</span><span style="color:#FF7B72">    const </span><span style="color:#79C0FF">prisma </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">PrismaClient</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:3ch">14</span><span style="color:#C9D1D9">      adapter: </span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">PrismaNeon</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:3ch">15</span><span style="color:#C9D1D9">        connectionString: </span><span style="color:#A5D6FF">`${</span><span style="color:#C9D1D9">process</span><span style="color:#A5D6FF">.</span><span style="color:#C9D1D9">env</span><span style="color:#A5D6FF">.</span><span style="color:#79C0FF">DATABASE_URL</span><span style="color:#A5D6FF">}`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:3ch">16</span><span style="color:#C9D1D9">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:3ch">17</span><span style="color:#C9D1D9">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:3ch">18</span><span style="color:#C9D1D9"></span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:3ch">19</span><span style="color:#C9D1D9">    DatabaseEventsService.</span><span style="color:#D2A8FF">beginEmitting</span><span style="color:#C9D1D9">();</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:3ch">20</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:3ch">21</span><span style="color:#FF7B72">    return</span><span style="color:#C9D1D9"> prisma.</span><span style="color:#D2A8FF">$extends</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:3ch">22</span><span style="color:#C9D1D9">      name: </span><span style="color:#A5D6FF">&quot;events&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:3ch">23</span><span style="color:#C9D1D9">      query: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:3ch">24</span><span style="color:#C9D1D9">        $allModels: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:3ch">25</span><span style="color:#FF7B72">          async </span><span style="color:#D2A8FF">$allOperations</span><span style="color:#C9D1D9">({ </span><span style="color:#FFA657">model</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">operation</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">args</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">query</span><span style="color:#C9D1D9"> }) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:3ch">26</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">allowedOperations </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> [</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:3ch">27</span><span style="color:#A5D6FF">              &quot;create&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:3ch">28</span><span style="color:#A5D6FF">              &quot;update&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:3ch">29</span><span style="color:#A5D6FF">              &quot;delete&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:3ch">30</span><span style="color:#A5D6FF">              &quot;findMany&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:3ch">31</span><span style="color:#A5D6FF">              &quot;findUnique&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:3ch">32</span><span style="color:#A5D6FF">              &quot;findFirst&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:3ch">33</span><span style="color:#A5D6FF">              &quot;count&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:3ch">34</span><span style="color:#C9D1D9">            ] </span><span style="color:#FF7B72">as const</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:3ch">35</span><span style="color:#FF7B72">            type </span><span style="color:#FFA657">AllowedOperation </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">typeof</span><span style="color:#C9D1D9"> allowedOperations)[</span><span style="color:#79C0FF">number</span><span style="color:#C9D1D9">];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:3ch">36</span><span style="color:#FF7B72">            if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">!</span><span style="color:#C9D1D9">allowedOperations.</span><span style="color:#D2A8FF">includes</span><span style="color:#C9D1D9">(operation </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">AllowedOperation</span><span style="color:#C9D1D9">)) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:3ch">37</span><span style="color:#FF7B72">              throw new </span><span style="color:#D2A8FF">Error</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:3ch">38</span><span style="color:#A5D6FF">                `Unsupported database operation &quot;${</span><span style="color:#C9D1D9">operation</span><span style="color:#A5D6FF">}&quot; on model &quot;${</span><span style="color:#C9D1D9">model</span><span style="color:#A5D6FF">}&quot;`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:3ch">39</span><span style="color:#C9D1D9">              );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:3ch">40</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:3ch">41</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">result </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">await </span><span style="color:#D2A8FF">query</span><span style="color:#C9D1D9">(args)) </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">BaseEntity </span><span style="color:#FF7B72">| </span><span style="color:#FFA657">BaseEntity</span><span style="color:#C9D1D9">[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:3ch">42</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:3ch">43</span><span style="color:#FF7B72">            const </span><span style="color:#79C0FF">now </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">().</span><span style="color:#D2A8FF">toISOString</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:3ch">44</span><span style="color:#FF7B72">            let</span><span style="color:#C9D1D9"> change</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">DBChange </span><span style="color:#FF7B72">| </span><span style="color:#79C0FF">null </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">null</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:3ch">45</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:3ch">46</span><span style="color:#FF7B72">            const </span><span style="color:#D2A8FF">makeChange </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> (</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:3ch">47</span><span style="color:#FFA657">              entity</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">BaseEntity</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:3ch">48</span><span style="color:#FFA657">              type</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">[</span><span style="color:#A5D6FF">&quot;type&quot;</span><span style="color:#C9D1D9">],</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:3ch">49</span><span style="color:#C9D1D9">            ) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:3ch">50</span><span style="color:#C9D1D9">              id: entity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:3ch">51</span><span style="color:#C9D1D9">              entityType: entity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:3ch">52</span><span style="color:#C9D1D9">              date:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:3ch">53</span><span style="color:#C9D1D9">                type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;delete&quot;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:3ch">54</span><span style="color:#FF7B72">                  ?</span><span style="color:#C9D1D9"> now</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:3ch">55</span><span style="color:#FF7B72">                  :</span><span style="color:#C9D1D9"> entity.updatedAt</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:3ch">56</span><span style="color:#FF7B72">                    ? new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(entity.updatedAt).</span><span style="color:#D2A8FF">toISOString</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:3ch">57</span><span style="color:#FF7B72">                    :</span><span style="color:#C9D1D9"> now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:3ch">58</span><span style="color:#C9D1D9">              type,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:3ch">59</span><span style="color:#C9D1D9">            });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:3ch">60</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:3ch">61</span><span style="color:#FF7B72">            switch</span><span style="color:#C9D1D9"> (operation </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">AllowedOperation</span><span style="color:#C9D1D9">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:3ch">62</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;create&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:3ch">63</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:3ch">64</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;create&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:3ch">65</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:3ch">66</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:3ch">67</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:3ch">68</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:3ch">69</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:3ch">70</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:3ch">71</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:3ch">72</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:3ch">73</span><span style="color:#FF7B72">                if</span><span style="color:#C9D1D9"> (</span><span style="color:#A5D6FF">&quot;entityType&quot; </span><span style="color:#FF7B72">in</span><span style="color:#C9D1D9"> result) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:3ch">74</span><span style="color:#C9D1D9">                  change </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">makeChange</span><span style="color:#C9D1D9">(result, </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:3ch">75</span><span style="color:#8B949E">                  // Automatically add __isDeleted flag to deletion results</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:3ch">76</span><span style="color:#C9D1D9">                  Object.</span><span style="color:#D2A8FF">assign</span><span style="color:#C9D1D9">(result, { __isDeleted: </span><span style="color:#79C0FF">true</span><span style="color:#C9D1D9"> });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:3ch">77</span><span style="color:#C9D1D9">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="78" style="width:3ch">78</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="79" style="width:3ch">79</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="80" style="width:3ch">80</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findMany&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="81" style="width:3ch">81</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findUnique&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="82" style="width:3ch">82</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;findFirst&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="83" style="width:3ch">83</span><span style="color:#FF7B72">              case </span><span style="color:#A5D6FF">&quot;count&quot;</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="84" style="width:3ch">84</span><span style="color:#8B949E">                // no events</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="85" style="width:3ch">85</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="86" style="width:3ch">86</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="87" style="width:3ch">87</span><span style="color:#FF7B72">              default</span><span style="color:#C9D1D9">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="88" style="width:3ch">88</span><span style="color:#C9D1D9">                console.</span><span style="color:#D2A8FF">warn</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="89" style="width:3ch">89</span><span style="color:#A5D6FF">                  `Unhandled Prisma operation: ${</span><span style="color:#C9D1D9">operation</span><span style="color:#A5D6FF">} for model: ${</span><span style="color:#C9D1D9">model</span><span style="color:#A5D6FF">}`</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="90" style="width:3ch">90</span><span style="color:#C9D1D9">                );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="91" style="width:3ch">91</span><span style="color:#FF7B72">                break</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="92" style="width:3ch">92</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="93" style="width:3ch">93</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="94" style="width:3ch">94</span><span style="color:#FF7B72">            if</span><span style="color:#C9D1D9"> (change) {</span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="95" style="width:3ch">95</span><span style="color:#FF7B72">              await</span><span style="color:#C9D1D9"> DatabaseEventsService.</span><span style="color:#D2A8FF">createChanges</span><span style="color:#C9D1D9">([change]);</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="96" style="width:3ch">96</span><span style="color:#C9D1D9">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="97" style="width:3ch">97</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="98" style="width:3ch">98</span><span style="color:#FF7B72">            return</span><span style="color:#C9D1D9"> result;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="99" style="width:3ch">99</span><span style="color:#C9D1D9">          },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="100" style="width:3ch">100</span><span style="color:#C9D1D9">        },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="101" style="width:3ch">101</span><span style="color:#C9D1D9">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="102" style="width:3ch">102</span><span style="color:#C9D1D9">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="103" style="width:3ch">103</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="104" style="width:3ch">104</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:3ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { PrismaClient } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:3ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { PrismaNeon } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@prisma/adapter-neon&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:3ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseEventsService, { </span><span style="color:#CF222E">type</span><span style="color:#24292F"> DBChange } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseEventsService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:3ch">4</span><span style="color:#CF222E">import type</span><span style="color:#24292F"> { BaseEntity } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/types&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:3ch">5</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:3ch">6</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabaseService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:3ch">7</span><span style="color:#CF222E">  static get </span><span style="color:#8250DF">prisma</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:3ch">8</span><span style="color:#CF222E">    return</span><span style="color:#24292F"> (</span><span style="color:#0550AE">this</span><span style="color:#24292F">.#prisma </span><span style="color:#CF222E">??= </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">getClient</span><span style="color:#24292F">());</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:3ch">9</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:3ch">10</span><span style="color:#CF222E">  static</span><span style="color:#953800"> #prisma</span><span style="color:#CF222E">:</span><span style="color:#953800"> ReturnType&lt;</span><span style="color:#CF222E">typeof </span><span style="color:#24292F">DatabaseService</span><span style="color:#953800">.</span><span style="color:#24292F">getClient</span><span style="color:#953800">&gt; </span><span style="color:#CF222E">| </span><span style="color:#0550AE">null </span><span style="color:#CF222E">= </span><span style="color:#0550AE">null</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:3ch">11</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:3ch">12</span><span style="color:#CF222E">  private static </span><span style="color:#8250DF">getClient</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:3ch">13</span><span style="color:#CF222E">    const </span><span style="color:#0550AE">prisma </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">PrismaClient</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:3ch">14</span><span style="color:#24292F">      adapter: </span><span style="color:#CF222E">new </span><span style="color:#8250DF">PrismaNeon</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:3ch">15</span><span style="color:#24292F">        connectionString: </span><span style="color:#0A3069">`${</span><span style="color:#24292F">process</span><span style="color:#0A3069">.</span><span style="color:#24292F">env</span><span style="color:#0A3069">.</span><span style="color:#0550AE">DATABASE_URL</span><span style="color:#0A3069">}`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:3ch">16</span><span style="color:#24292F">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:3ch">17</span><span style="color:#24292F">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:3ch">18</span><span style="color:#24292F"></span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:3ch">19</span><span style="color:#24292F">    DatabaseEventsService.</span><span style="color:#8250DF">beginEmitting</span><span style="color:#24292F">();</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:3ch">20</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:3ch">21</span><span style="color:#CF222E">    return</span><span style="color:#24292F"> prisma.</span><span style="color:#8250DF">$extends</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:3ch">22</span><span style="color:#24292F">      name: </span><span style="color:#0A3069">&quot;events&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:3ch">23</span><span style="color:#24292F">      query: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:3ch">24</span><span style="color:#24292F">        $allModels: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:3ch">25</span><span style="color:#CF222E">          async </span><span style="color:#8250DF">$allOperations</span><span style="color:#24292F">({ </span><span style="color:#953800">model</span><span style="color:#24292F">, </span><span style="color:#953800">operation</span><span style="color:#24292F">, </span><span style="color:#953800">args</span><span style="color:#24292F">, </span><span style="color:#953800">query</span><span style="color:#24292F"> }) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:3ch">26</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">allowedOperations </span><span style="color:#CF222E">=</span><span style="color:#24292F"> [</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:3ch">27</span><span style="color:#0A3069">              &quot;create&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:3ch">28</span><span style="color:#0A3069">              &quot;update&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:3ch">29</span><span style="color:#0A3069">              &quot;delete&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:3ch">30</span><span style="color:#0A3069">              &quot;findMany&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:3ch">31</span><span style="color:#0A3069">              &quot;findUnique&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:3ch">32</span><span style="color:#0A3069">              &quot;findFirst&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:3ch">33</span><span style="color:#0A3069">              &quot;count&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:3ch">34</span><span style="color:#24292F">            ] </span><span style="color:#CF222E">as const</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:3ch">35</span><span style="color:#CF222E">            type </span><span style="color:#953800">AllowedOperation </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><span style="color:#CF222E">typeof</span><span style="color:#24292F"> allowedOperations)[</span><span style="color:#0550AE">number</span><span style="color:#24292F">];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:3ch">36</span><span style="color:#CF222E">            if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">!</span><span style="color:#24292F">allowedOperations.</span><span style="color:#8250DF">includes</span><span style="color:#24292F">(operation </span><span style="color:#CF222E">as </span><span style="color:#953800">AllowedOperation</span><span style="color:#24292F">)) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:3ch">37</span><span style="color:#CF222E">              throw new </span><span style="color:#8250DF">Error</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:3ch">38</span><span style="color:#0A3069">                `Unsupported database operation &quot;${</span><span style="color:#24292F">operation</span><span style="color:#0A3069">}&quot; on model &quot;${</span><span style="color:#24292F">model</span><span style="color:#0A3069">}&quot;`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:3ch">39</span><span style="color:#24292F">              );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:3ch">40</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:3ch">41</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">result </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><span style="color:#CF222E">await </span><span style="color:#8250DF">query</span><span style="color:#24292F">(args)) </span><span style="color:#CF222E">as </span><span style="color:#953800">BaseEntity </span><span style="color:#CF222E">| </span><span style="color:#953800">BaseEntity</span><span style="color:#24292F">[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:3ch">42</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:3ch">43</span><span style="color:#CF222E">            const </span><span style="color:#0550AE">now </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">().</span><span style="color:#8250DF">toISOString</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:3ch">44</span><span style="color:#CF222E">            let</span><span style="color:#24292F"> change</span><span style="color:#CF222E">: </span><span style="color:#953800">DBChange </span><span style="color:#CF222E">| </span><span style="color:#0550AE">null </span><span style="color:#CF222E">= </span><span style="color:#0550AE">null</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:3ch">45</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:3ch">46</span><span style="color:#CF222E">            const </span><span style="color:#8250DF">makeChange </span><span style="color:#CF222E">=</span><span style="color:#24292F"> (</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:3ch">47</span><span style="color:#953800">              entity</span><span style="color:#CF222E">: </span><span style="color:#953800">BaseEntity</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:3ch">48</span><span style="color:#953800">              type</span><span style="color:#CF222E">: </span><span style="color:#953800">DBChange</span><span style="color:#24292F">[</span><span style="color:#0A3069">&quot;type&quot;</span><span style="color:#24292F">],</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:3ch">49</span><span style="color:#24292F">            ) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:3ch">50</span><span style="color:#24292F">              id: entity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:3ch">51</span><span style="color:#24292F">              entityType: entity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:3ch">52</span><span style="color:#24292F">              date:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:3ch">53</span><span style="color:#24292F">                type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;delete&quot;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:3ch">54</span><span style="color:#CF222E">                  ?</span><span style="color:#24292F"> now</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:3ch">55</span><span style="color:#CF222E">                  :</span><span style="color:#24292F"> entity.updatedAt</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:3ch">56</span><span style="color:#CF222E">                    ? new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(entity.updatedAt).</span><span style="color:#8250DF">toISOString</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:3ch">57</span><span style="color:#CF222E">                    :</span><span style="color:#24292F"> now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:3ch">58</span><span style="color:#24292F">              type,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:3ch">59</span><span style="color:#24292F">            });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:3ch">60</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:3ch">61</span><span style="color:#CF222E">            switch</span><span style="color:#24292F"> (operation </span><span style="color:#CF222E">as </span><span style="color:#953800">AllowedOperation</span><span style="color:#24292F">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:3ch">62</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;create&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:3ch">63</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:3ch">64</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;create&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:3ch">65</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:3ch">66</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:3ch">67</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:3ch">68</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:3ch">69</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:3ch">70</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:3ch">71</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:3ch">72</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:3ch">73</span><span style="color:#CF222E">                if</span><span style="color:#24292F"> (</span><span style="color:#0A3069">&quot;entityType&quot; </span><span style="color:#CF222E">in</span><span style="color:#24292F"> result) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:3ch">74</span><span style="color:#24292F">                  change </span><span style="color:#CF222E">= </span><span style="color:#8250DF">makeChange</span><span style="color:#24292F">(result, </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:3ch">75</span><span style="color:#6E7781">                  // Automatically add __isDeleted flag to deletion results</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:3ch">76</span><span style="color:#24292F">                  Object.</span><span style="color:#8250DF">assign</span><span style="color:#24292F">(result, { __isDeleted: </span><span style="color:#0550AE">true</span><span style="color:#24292F"> });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:3ch">77</span><span style="color:#24292F">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="78" style="width:3ch">78</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="79" style="width:3ch">79</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="80" style="width:3ch">80</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findMany&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="81" style="width:3ch">81</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findUnique&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="82" style="width:3ch">82</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;findFirst&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="83" style="width:3ch">83</span><span style="color:#CF222E">              case </span><span style="color:#0A3069">&quot;count&quot;</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="84" style="width:3ch">84</span><span style="color:#6E7781">                // no events</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="85" style="width:3ch">85</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="86" style="width:3ch">86</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="87" style="width:3ch">87</span><span style="color:#CF222E">              default</span><span style="color:#24292F">:</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="88" style="width:3ch">88</span><span style="color:#24292F">                console.</span><span style="color:#8250DF">warn</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="89" style="width:3ch">89</span><span style="color:#0A3069">                  `Unhandled Prisma operation: ${</span><span style="color:#24292F">operation</span><span style="color:#0A3069">} for model: ${</span><span style="color:#24292F">model</span><span style="color:#0A3069">}`</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="90" style="width:3ch">90</span><span style="color:#24292F">                );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="91" style="width:3ch">91</span><span style="color:#CF222E">                break</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="92" style="width:3ch">92</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="93" style="width:3ch">93</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="94" style="width:3ch">94</span><span style="color:#CF222E">            if</span><span style="color:#24292F"> (change) {</span><br/></span></div><span class="block dark:bg-[#d1edff33] bg-[#d1edff80]"><div style="padding:0 1em"><span><span data-bright-ln="95" style="width:3ch">95</span><span style="color:#CF222E">              await</span><span style="color:#24292F"> DatabaseEventsService.</span><span style="color:#8250DF">createChanges</span><span style="color:#24292F">([change]);</span><br/></span></div></span><div style="padding:0 1em"><span><span data-bright-ln="96" style="width:3ch">96</span><span style="color:#24292F">            }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="97" style="width:3ch">97</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="98" style="width:3ch">98</span><span style="color:#CF222E">            return</span><span style="color:#24292F"> result;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="99" style="width:3ch">99</span><span style="color:#24292F">          },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="100" style="width:3ch">100</span><span style="color:#24292F">        },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="101" style="width:3ch">101</span><span style="color:#24292F">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="102" style="width:3ch">102</span><span style="color:#24292F">    });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="103" style="width:3ch">103</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="104" style="width:3ch">104</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div></div><a target="_blank" rel="noopener noreferrer" class="block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabaseService.ts">View <!-- -->DatabaseService.ts<!-- --> file on GitHub<svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></div></div>
<ul class="x:[:is(ol,ul)_&amp;]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]">
<li class="x:my-[.5em]">The <code class="nextra-code" dir="ltr">getClient</code> method calls <code class="nextra-code" dir="ltr"><span data-line=""><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">DatabaseEventsService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">beginEmitting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span></code> to start emitting events. <code class="nextra-code" dir="ltr">beginEmitting</code> runs a <code class="nextra-code" dir="ltr">setInterval</code> that connects to Redis and periodically checks for new events. When a new event is found, it emits it via <a href="https://npmjs.com/package/mitt" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">mitt<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a>.</li>
<li class="x:my-[.5em]"><code class="nextra-code" dir="ltr">prisma.$extends</code> hooks into all Prisma model operations, determines whether an operation modifies data, and if so calls <code class="nextra-code" dir="ltr"><span data-line=""><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> DatabaseEventsService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([change])</span></span></code> to persist a change entry in Redis. The change captures creates, updates, and deletions:</li>
</ul>
<div data-pagefind-ignore="all" class="nextra-code x:relative x:not-first:mt-[1.25em]"><pre class="x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose" tabindex="0"><div class="x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2"><button class="x:transition x:cursor-pointer x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:rounded-md x:p-1.5 x:md:hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="1em"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button></div><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> DBChange</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  entityType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> EntityType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  date</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;create&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;update&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;delete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre></div>
<p class="x:not-first:mt-[1.25em] x:leading-7">The <code class="nextra-code" dir="ltr">date</code> field indicates when the change occurred.</p>
<ul class="x:[:is(ol,ul)_&amp;]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]">
<li class="x:my-[.5em]">For <code class="nextra-code" dir="ltr">create</code> and <code class="nextra-code" dir="ltr">update</code> operations, it uses the <code class="nextra-code" dir="ltr">updatedAt</code> DB field (Important: all write operations must set this field).</li>
<li class="x:my-[.5em]">For <code class="nextra-code" dir="ltr">delete</code> operations, it uses the current time.</li>
</ul>
<p class="x:not-first:mt-[1.25em] x:leading-7">The <code class="nextra-code" dir="ltr">delete</code> operation also adds an <code class="nextra-code" dir="ltr">__isDeleted</code> property. The front end checks this property to hide the deleted entity by setting <code class="nextra-code" dir="ltr">enumerable: false</code> on the entity registry item (see the <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/realtime-ui">previous article</a>).</p>
<p class="x:not-first:mt-[1.25em] x:leading-7">Operations like <code class="nextra-code" dir="ltr">find...</code> and <code class="nextra-code" dir="ltr">count</code> do not trigger changes and are passed through as-is.</p>
<p class="x:not-first:mt-[1.25em] x:leading-7">In addition to <code class="nextra-code" dir="ltr">beginEmitting</code> and <code class="nextra-code" dir="ltr">createChanges</code>, <code class="nextra-code" dir="ltr">DatabaseEventsService</code> provides a <code class="nextra-code" dir="ltr">connect</code> method and an <code class="nextra-code" dir="ltr">emitter</code> (a <code class="nextra-code" dir="ltr">mitt</code> instance). These are used by the polling service (<code class="nextra-code" dir="ltr">DatabasePollService</code>, discussed next) to be notified about new events.</p>
<div class="bg-code rounded-lg mt-4" id="_S_2_"><div class="pb-2 px-4 text-sm mb-1"><div class="inline-block mr-4 mb-1"><span title="src/modules/database/DatabaseEventsService.ts" class="pb-0.5 cursor-pointer border-b-2 border-solid text-neutral-900 border-blue-500 dark:text-gray-100 dark:border-slate-500">DatabaseEventsService.ts</span><a class="inline-block align-middle ml-1" href="https://github.com/finom/vovk-kanban-demo/tree/main/src/modules/database/DatabaseEventsService.ts" target="_blank" title="View on GitHub"><svg width="16" height="16" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 11.9976C14 9.5059 11.683 7 8.85714 7C8.52241 7 7.41904 7.00001 7.14286 7.00001C4.30254 7.00001 2 9.23752 2 11.9976C2 14.376 3.70973 16.3664 6 16.8714C6.36756 16.9525 6.75006 16.9952 7.14286 16.9952" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 11.9976C10 14.4893 12.317 16.9952 15.1429 16.9952C15.4776 16.9952 16.581 16.9952 16.8571 16.9952C19.6975 16.9952 22 14.7577 22 11.9976C22 9.6192 20.2903 7.62884 18 7.12383C17.6324 7.04278 17.2499 6.99999 16.8571 6.99999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><div class="h-full github-tab-content " id="tab-_S_2_-0"><div class="border dark:!border-gray-800 text-sm"><div data-theme="dark" class="hidden dark:block"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { EntityType } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> mitt </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;mitt&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { createClient } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;redis&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">export type </span><span style="color:#FFA657">DBChange </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#FFA657">  id</span><span style="color:#FF7B72">: </span><span style="color:#79C0FF">string</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FFA657">  entityType</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">EntityType</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#FFA657">  date</span><span style="color:#FF7B72">: </span><span style="color:#79C0FF">string</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#FFA657">  type</span><span style="color:#FF7B72">: </span><span style="color:#A5D6FF">&quot;create&quot; </span><span style="color:#FF7B72">| </span><span style="color:#A5D6FF">&quot;update&quot; </span><span style="color:#FF7B72">| </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#C9D1D9">};</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabaseEventsService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">  public static readonly</span><span style="color:#FFA657"> DB_KEY </span><span style="color:#FF7B72">= </span><span style="color:#A5D6FF">&quot;db_updates&quot;</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#FF7B72">  private static readonly</span><span style="color:#FFA657"> INTERVAL </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">1_000</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#FF7B72">  private static</span><span style="color:#FFA657"> lastTimestamp </span><span style="color:#FF7B72">= </span><span style="color:#C9D1D9">Date</span><span style="color:#FFA657">.</span><span style="color:#D2A8FF">now</span><span style="color:#FFA657">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#FF7B72">  private static</span><span style="color:#FFA657"> redisClient </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">createClient</span><span style="color:#FFA657">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">    url: process.env.</span><span style="color:#79C0FF">REDIS_URL</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#FFA657">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#FF7B72">  public static</span><span style="color:#FFA657"> emitter </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">mitt</span><span style="color:#FFA657">&lt;{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#FFA657">    [</span><span style="color:#C9D1D9">DatabaseEventsService</span><span style="color:#FFA657">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#FFA657">]</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> DBChange[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#FFA657">  }&gt;();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#8B949E">  // ensure Redis is connected</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#FF7B72">  private static async </span><span style="color:#D2A8FF">connect</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#FF7B72">    if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">!</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.isOpen) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#FF7B72">      await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#79C0FF">      this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">on</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;error&quot;</span><span style="color:#C9D1D9">, (</span><span style="color:#FFA657">err</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#C9D1D9">        console.</span><span style="color:#D2A8FF">error</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;Redis Client Error&quot;</span><span style="color:#C9D1D9">, err);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#C9D1D9">      });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#C9D1D9">    }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#8B949E">  // push one update into our ZSET, with score = timestamp</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#FF7B72">  public static async </span><span style="color:#D2A8FF">createChanges</span><span style="color:#FFA657">(changes</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> DBChange[]) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#FF7B72">    if</span><span style="color:#C9D1D9"> (changes.</span><span style="color:#79C0FF">length </span><span style="color:#FF7B72">=== </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">return</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#FF7B72">    await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#8B949E">    // build array of { score, value } objects</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#FF7B72">    const </span><span style="color:#79C0FF">entries </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">map</span><span style="color:#C9D1D9">(({ </span><span style="color:#FFA657">id</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">entityType</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">type</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">date</span><span style="color:#C9D1D9"> }) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#C9D1D9">      score: Date.</span><span style="color:#D2A8FF">now</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#C9D1D9">      value: </span><span style="color:#79C0FF">JSON</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">stringify</span><span style="color:#C9D1D9">({ id, entityType, date, type }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#C9D1D9">    }));</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#8B949E">    // one multi(): batch ZADD + EXPIRE</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#FF7B72">    await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">multi</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">zAdd</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, entries)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">expire</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, (</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">INTERVAL </span><span style="color:#FF7B72">* </span><span style="color:#79C0FF">60</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">/ </span><span style="color:#79C0FF">1000</span><span style="color:#C9D1D9">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">exec</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#FF7B72">  public static </span><span style="color:#D2A8FF">beginEmitting</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#D2A8FF">    setInterval</span><span style="color:#C9D1D9">(</span><span style="color:#FF7B72">async</span><span style="color:#C9D1D9"> () </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#FF7B72">      await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">now </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> Date.</span><span style="color:#D2A8FF">now</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#8B949E">      // get everything with score âˆˆ (lastTimestamp, now]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">raw </span><span style="color:#FF7B72">= await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">zRangeByScore</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:2ch">65</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.lastTimestamp </span><span style="color:#FF7B72">+ </span><span style="color:#79C0FF">1</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:2ch">66</span><span style="color:#C9D1D9">        now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:2ch">67</span><span style="color:#C9D1D9">      );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:2ch">68</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:2ch">69</span><span style="color:#79C0FF">      this</span><span style="color:#C9D1D9">.lastTimestamp </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> now;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:2ch">70</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:2ch">71</span><span style="color:#FF7B72">      if</span><span style="color:#C9D1D9"> (raw.</span><span style="color:#79C0FF">length </span><span style="color:#FF7B72">&gt; </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:2ch">72</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">updates </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> raw.</span><span style="color:#D2A8FF">map</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">s</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt; </span><span style="color:#79C0FF">JSON</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">parse</span><span style="color:#C9D1D9">(s) </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:2ch">73</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.emitter.</span><span style="color:#D2A8FF">emit</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, updates);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:2ch">74</span><span style="color:#C9D1D9">      }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:2ch">75</span><span style="color:#C9D1D9">    }, </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">INTERVAL</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:2ch">76</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:2ch">77</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { EntityType } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> mitt </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;mitt&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { createClient } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;redis&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">export type </span><span style="color:#953800">DBChange </span><span style="color:#CF222E">=</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#953800">  id</span><span style="color:#CF222E">: </span><span style="color:#0550AE">string</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#953800">  entityType</span><span style="color:#CF222E">: </span><span style="color:#953800">EntityType</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#953800">  date</span><span style="color:#CF222E">: </span><span style="color:#0550AE">string</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#953800">  type</span><span style="color:#CF222E">: </span><span style="color:#0A3069">&quot;create&quot; </span><span style="color:#CF222E">| </span><span style="color:#0A3069">&quot;update&quot; </span><span style="color:#CF222E">| </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#24292F">};</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabaseEventsService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">  public static readonly</span><span style="color:#953800"> DB_KEY </span><span style="color:#CF222E">= </span><span style="color:#0A3069">&quot;db_updates&quot;</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#CF222E">  private static readonly</span><span style="color:#953800"> INTERVAL </span><span style="color:#CF222E">= </span><span style="color:#0550AE">1_000</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#CF222E">  private static</span><span style="color:#953800"> lastTimestamp </span><span style="color:#CF222E">= </span><span style="color:#24292F">Date</span><span style="color:#953800">.</span><span style="color:#8250DF">now</span><span style="color:#953800">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#CF222E">  private static</span><span style="color:#953800"> redisClient </span><span style="color:#CF222E">= </span><span style="color:#8250DF">createClient</span><span style="color:#953800">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">    url: process.env.</span><span style="color:#0550AE">REDIS_URL</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#953800">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#CF222E">  public static</span><span style="color:#953800"> emitter </span><span style="color:#CF222E">= </span><span style="color:#8250DF">mitt</span><span style="color:#953800">&lt;{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#953800">    [</span><span style="color:#24292F">DatabaseEventsService</span><span style="color:#953800">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#953800">]</span><span style="color:#CF222E">:</span><span style="color:#953800"> DBChange[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#953800">  }&gt;();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#6E7781">  // ensure Redis is connected</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#CF222E">  private static async </span><span style="color:#8250DF">connect</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#CF222E">    if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">!</span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.isOpen) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#CF222E">      await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#0550AE">      this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">on</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;error&quot;</span><span style="color:#24292F">, (</span><span style="color:#953800">err</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#24292F">        console.</span><span style="color:#8250DF">error</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;Redis Client Error&quot;</span><span style="color:#24292F">, err);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#24292F">      });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#24292F">    }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#6E7781">  // push one update into our ZSET, with score = timestamp</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#CF222E">  public static async </span><span style="color:#8250DF">createChanges</span><span style="color:#953800">(changes</span><span style="color:#CF222E">:</span><span style="color:#953800"> DBChange[]) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#CF222E">    if</span><span style="color:#24292F"> (changes.</span><span style="color:#0550AE">length </span><span style="color:#CF222E">=== </span><span style="color:#0550AE">0</span><span style="color:#24292F">) </span><span style="color:#CF222E">return</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#CF222E">    await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#6E7781">    // build array of { score, value } objects</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#CF222E">    const </span><span style="color:#0550AE">entries </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">map</span><span style="color:#24292F">(({ </span><span style="color:#953800">id</span><span style="color:#24292F">, </span><span style="color:#953800">entityType</span><span style="color:#24292F">, </span><span style="color:#953800">type</span><span style="color:#24292F">, </span><span style="color:#953800">date</span><span style="color:#24292F"> }) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#24292F">      score: Date.</span><span style="color:#8250DF">now</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#24292F">      value: </span><span style="color:#0550AE">JSON</span><span style="color:#24292F">.</span><span style="color:#8250DF">stringify</span><span style="color:#24292F">({ id, entityType, date, type }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#24292F">    }));</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#6E7781">    // one multi(): batch ZADD + EXPIRE</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#CF222E">    await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#24292F">      .</span><span style="color:#8250DF">multi</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#24292F">      .</span><span style="color:#8250DF">zAdd</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, entries)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#24292F">      .</span><span style="color:#8250DF">expire</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, (</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">INTERVAL </span><span style="color:#CF222E">* </span><span style="color:#0550AE">60</span><span style="color:#24292F">) </span><span style="color:#CF222E">/ </span><span style="color:#0550AE">1000</span><span style="color:#24292F">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#24292F">      .</span><span style="color:#8250DF">exec</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#CF222E">  public static </span><span style="color:#8250DF">beginEmitting</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#8250DF">    setInterval</span><span style="color:#24292F">(</span><span style="color:#CF222E">async</span><span style="color:#24292F"> () </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#CF222E">      await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">now </span><span style="color:#CF222E">=</span><span style="color:#24292F"> Date.</span><span style="color:#8250DF">now</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#6E7781">      // get everything with score âˆˆ (lastTimestamp, now]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">raw </span><span style="color:#CF222E">= await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">zRangeByScore</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:2ch">65</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.lastTimestamp </span><span style="color:#CF222E">+ </span><span style="color:#0550AE">1</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:2ch">66</span><span style="color:#24292F">        now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:2ch">67</span><span style="color:#24292F">      );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:2ch">68</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:2ch">69</span><span style="color:#0550AE">      this</span><span style="color:#24292F">.lastTimestamp </span><span style="color:#CF222E">=</span><span style="color:#24292F"> now;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:2ch">70</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:2ch">71</span><span style="color:#CF222E">      if</span><span style="color:#24292F"> (raw.</span><span style="color:#0550AE">length </span><span style="color:#CF222E">&gt; </span><span style="color:#0550AE">0</span><span style="color:#24292F">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:2ch">72</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">updates </span><span style="color:#CF222E">=</span><span style="color:#24292F"> raw.</span><span style="color:#8250DF">map</span><span style="color:#24292F">((</span><span style="color:#953800">s</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt; </span><span style="color:#0550AE">JSON</span><span style="color:#24292F">.</span><span style="color:#8250DF">parse</span><span style="color:#24292F">(s) </span><span style="color:#CF222E">as </span><span style="color:#953800">DBChange</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:2ch">73</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.emitter.</span><span style="color:#8250DF">emit</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, updates);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:2ch">74</span><span style="color:#24292F">      }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:2ch">75</span><span style="color:#24292F">    }, </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">INTERVAL</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:2ch">76</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:2ch">77</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div> <div data-theme="light" class="dark:hidden"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { EntityType } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> mitt </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;mitt&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { createClient } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;redis&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">export type </span><span style="color:#FFA657">DBChange </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#FFA657">  id</span><span style="color:#FF7B72">: </span><span style="color:#79C0FF">string</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FFA657">  entityType</span><span style="color:#FF7B72">: </span><span style="color:#FFA657">EntityType</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#FFA657">  date</span><span style="color:#FF7B72">: </span><span style="color:#79C0FF">string</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#FFA657">  type</span><span style="color:#FF7B72">: </span><span style="color:#A5D6FF">&quot;create&quot; </span><span style="color:#FF7B72">| </span><span style="color:#A5D6FF">&quot;update&quot; </span><span style="color:#FF7B72">| </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#C9D1D9">};</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabaseEventsService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">  public static readonly</span><span style="color:#FFA657"> DB_KEY </span><span style="color:#FF7B72">= </span><span style="color:#A5D6FF">&quot;db_updates&quot;</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#FF7B72">  private static readonly</span><span style="color:#FFA657"> INTERVAL </span><span style="color:#FF7B72">= </span><span style="color:#79C0FF">1_000</span><span style="color:#FFA657">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#FF7B72">  private static</span><span style="color:#FFA657"> lastTimestamp </span><span style="color:#FF7B72">= </span><span style="color:#C9D1D9">Date</span><span style="color:#FFA657">.</span><span style="color:#D2A8FF">now</span><span style="color:#FFA657">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#FF7B72">  private static</span><span style="color:#FFA657"> redisClient </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">createClient</span><span style="color:#FFA657">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">    url: process.env.</span><span style="color:#79C0FF">REDIS_URL</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#FFA657">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#FF7B72">  public static</span><span style="color:#FFA657"> emitter </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">mitt</span><span style="color:#FFA657">&lt;{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#FFA657">    [</span><span style="color:#C9D1D9">DatabaseEventsService</span><span style="color:#FFA657">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#FFA657">]</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> DBChange[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#FFA657">  }&gt;();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#8B949E">  // ensure Redis is connected</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#FF7B72">  private static async </span><span style="color:#D2A8FF">connect</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#FF7B72">    if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">!</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.isOpen) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#FF7B72">      await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#79C0FF">      this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">on</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;error&quot;</span><span style="color:#C9D1D9">, (</span><span style="color:#FFA657">err</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#C9D1D9">        console.</span><span style="color:#D2A8FF">error</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;Redis Client Error&quot;</span><span style="color:#C9D1D9">, err);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#C9D1D9">      });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#C9D1D9">    }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#8B949E">  // push one update into our ZSET, with score = timestamp</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#FF7B72">  public static async </span><span style="color:#D2A8FF">createChanges</span><span style="color:#FFA657">(changes</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> DBChange[]) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#FF7B72">    if</span><span style="color:#C9D1D9"> (changes.</span><span style="color:#79C0FF">length </span><span style="color:#FF7B72">=== </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">return</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#FF7B72">    await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#8B949E">    // build array of { score, value } objects</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#FF7B72">    const </span><span style="color:#79C0FF">entries </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">map</span><span style="color:#C9D1D9">(({ </span><span style="color:#FFA657">id</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">entityType</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">type</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">date</span><span style="color:#C9D1D9"> }) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#C9D1D9">      score: Date.</span><span style="color:#D2A8FF">now</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#C9D1D9">      value: </span><span style="color:#79C0FF">JSON</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">stringify</span><span style="color:#C9D1D9">({ id, entityType, date, type }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#C9D1D9">    }));</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#8B949E">    // one multi(): batch ZADD + EXPIRE</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#FF7B72">    await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">multi</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">zAdd</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, entries)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">expire</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, (</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">INTERVAL </span><span style="color:#FF7B72">* </span><span style="color:#79C0FF">60</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">/ </span><span style="color:#79C0FF">1000</span><span style="color:#C9D1D9">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#C9D1D9">      .</span><span style="color:#D2A8FF">exec</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#FFA657"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#FF7B72">  public static </span><span style="color:#D2A8FF">beginEmitting</span><span style="color:#FFA657">() </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#D2A8FF">    setInterval</span><span style="color:#C9D1D9">(</span><span style="color:#FF7B72">async</span><span style="color:#C9D1D9"> () </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#FF7B72">      await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">connect</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">now </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> Date.</span><span style="color:#D2A8FF">now</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#8B949E">      // get everything with score âˆˆ (lastTimestamp, now]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">raw </span><span style="color:#FF7B72">= await </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.redisClient.</span><span style="color:#D2A8FF">zRangeByScore</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:2ch">65</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.lastTimestamp </span><span style="color:#FF7B72">+ </span><span style="color:#79C0FF">1</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:2ch">66</span><span style="color:#C9D1D9">        now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:2ch">67</span><span style="color:#C9D1D9">      );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:2ch">68</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:2ch">69</span><span style="color:#79C0FF">      this</span><span style="color:#C9D1D9">.lastTimestamp </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> now;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:2ch">70</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:2ch">71</span><span style="color:#FF7B72">      if</span><span style="color:#C9D1D9"> (raw.</span><span style="color:#79C0FF">length </span><span style="color:#FF7B72">&gt; </span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:2ch">72</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">updates </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> raw.</span><span style="color:#D2A8FF">map</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">s</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt; </span><span style="color:#79C0FF">JSON</span><span style="color:#C9D1D9">.</span><span style="color:#D2A8FF">parse</span><span style="color:#C9D1D9">(s) </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:2ch">73</span><span style="color:#79C0FF">        this</span><span style="color:#C9D1D9">.emitter.</span><span style="color:#D2A8FF">emit</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">, updates);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:2ch">74</span><span style="color:#C9D1D9">      }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:2ch">75</span><span style="color:#C9D1D9">    }, </span><span style="color:#79C0FF">this</span><span style="color:#C9D1D9">.</span><span style="color:#79C0FF">INTERVAL</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:2ch">76</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:2ch">77</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { EntityType } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> mitt </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;mitt&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { createClient } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;redis&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">export type </span><span style="color:#953800">DBChange </span><span style="color:#CF222E">=</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#953800">  id</span><span style="color:#CF222E">: </span><span style="color:#0550AE">string</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#953800">  entityType</span><span style="color:#CF222E">: </span><span style="color:#953800">EntityType</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#953800">  date</span><span style="color:#CF222E">: </span><span style="color:#0550AE">string</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#953800">  type</span><span style="color:#CF222E">: </span><span style="color:#0A3069">&quot;create&quot; </span><span style="color:#CF222E">| </span><span style="color:#0A3069">&quot;update&quot; </span><span style="color:#CF222E">| </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#24292F">};</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabaseEventsService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">  public static readonly</span><span style="color:#953800"> DB_KEY </span><span style="color:#CF222E">= </span><span style="color:#0A3069">&quot;db_updates&quot;</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#CF222E">  private static readonly</span><span style="color:#953800"> INTERVAL </span><span style="color:#CF222E">= </span><span style="color:#0550AE">1_000</span><span style="color:#953800">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#CF222E">  private static</span><span style="color:#953800"> lastTimestamp </span><span style="color:#CF222E">= </span><span style="color:#24292F">Date</span><span style="color:#953800">.</span><span style="color:#8250DF">now</span><span style="color:#953800">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#CF222E">  private static</span><span style="color:#953800"> redisClient </span><span style="color:#CF222E">= </span><span style="color:#8250DF">createClient</span><span style="color:#953800">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">    url: process.env.</span><span style="color:#0550AE">REDIS_URL</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#953800">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#CF222E">  public static</span><span style="color:#953800"> emitter </span><span style="color:#CF222E">= </span><span style="color:#8250DF">mitt</span><span style="color:#953800">&lt;{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#953800">    [</span><span style="color:#24292F">DatabaseEventsService</span><span style="color:#953800">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#953800">]</span><span style="color:#CF222E">:</span><span style="color:#953800"> DBChange[];</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#953800">  }&gt;();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#6E7781">  // ensure Redis is connected</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#CF222E">  private static async </span><span style="color:#8250DF">connect</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#CF222E">    if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">!</span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.isOpen) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#CF222E">      await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#0550AE">      this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">on</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;error&quot;</span><span style="color:#24292F">, (</span><span style="color:#953800">err</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#24292F">        console.</span><span style="color:#8250DF">error</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;Redis Client Error&quot;</span><span style="color:#24292F">, err);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#24292F">      });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#24292F">    }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#6E7781">  // push one update into our ZSET, with score = timestamp</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#CF222E">  public static async </span><span style="color:#8250DF">createChanges</span><span style="color:#953800">(changes</span><span style="color:#CF222E">:</span><span style="color:#953800"> DBChange[]) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#CF222E">    if</span><span style="color:#24292F"> (changes.</span><span style="color:#0550AE">length </span><span style="color:#CF222E">=== </span><span style="color:#0550AE">0</span><span style="color:#24292F">) </span><span style="color:#CF222E">return</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#CF222E">    await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#6E7781">    // build array of { score, value } objects</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#CF222E">    const </span><span style="color:#0550AE">entries </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">map</span><span style="color:#24292F">(({ </span><span style="color:#953800">id</span><span style="color:#24292F">, </span><span style="color:#953800">entityType</span><span style="color:#24292F">, </span><span style="color:#953800">type</span><span style="color:#24292F">, </span><span style="color:#953800">date</span><span style="color:#24292F"> }) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> ({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#24292F">      score: Date.</span><span style="color:#8250DF">now</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#24292F">      value: </span><span style="color:#0550AE">JSON</span><span style="color:#24292F">.</span><span style="color:#8250DF">stringify</span><span style="color:#24292F">({ id, entityType, date, type }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#24292F">    }));</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#6E7781">    // one multi(): batch ZADD + EXPIRE</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#CF222E">    await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#24292F">      .</span><span style="color:#8250DF">multi</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#24292F">      .</span><span style="color:#8250DF">zAdd</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, entries)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#24292F">      .</span><span style="color:#8250DF">expire</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, (</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">INTERVAL </span><span style="color:#CF222E">* </span><span style="color:#0550AE">60</span><span style="color:#24292F">) </span><span style="color:#CF222E">/ </span><span style="color:#0550AE">1000</span><span style="color:#24292F">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#24292F">      .</span><span style="color:#8250DF">exec</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#953800"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#CF222E">  public static </span><span style="color:#8250DF">beginEmitting</span><span style="color:#953800">() </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#8250DF">    setInterval</span><span style="color:#24292F">(</span><span style="color:#CF222E">async</span><span style="color:#24292F"> () </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#CF222E">      await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#8250DF">connect</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">now </span><span style="color:#CF222E">=</span><span style="color:#24292F"> Date.</span><span style="color:#8250DF">now</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#6E7781">      // get everything with score âˆˆ (lastTimestamp, now]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">raw </span><span style="color:#CF222E">= await </span><span style="color:#0550AE">this</span><span style="color:#24292F">.redisClient.</span><span style="color:#8250DF">zRangeByScore</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="65" style="width:2ch">65</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.lastTimestamp </span><span style="color:#CF222E">+ </span><span style="color:#0550AE">1</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="66" style="width:2ch">66</span><span style="color:#24292F">        now,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="67" style="width:2ch">67</span><span style="color:#24292F">      );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="68" style="width:2ch">68</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="69" style="width:2ch">69</span><span style="color:#0550AE">      this</span><span style="color:#24292F">.lastTimestamp </span><span style="color:#CF222E">=</span><span style="color:#24292F"> now;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="70" style="width:2ch">70</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="71" style="width:2ch">71</span><span style="color:#CF222E">      if</span><span style="color:#24292F"> (raw.</span><span style="color:#0550AE">length </span><span style="color:#CF222E">&gt; </span><span style="color:#0550AE">0</span><span style="color:#24292F">) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="72" style="width:2ch">72</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">updates </span><span style="color:#CF222E">=</span><span style="color:#24292F"> raw.</span><span style="color:#8250DF">map</span><span style="color:#24292F">((</span><span style="color:#953800">s</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt; </span><span style="color:#0550AE">JSON</span><span style="color:#24292F">.</span><span style="color:#8250DF">parse</span><span style="color:#24292F">(s) </span><span style="color:#CF222E">as </span><span style="color:#953800">DBChange</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="73" style="width:2ch">73</span><span style="color:#0550AE">        this</span><span style="color:#24292F">.emitter.</span><span style="color:#8250DF">emit</span><span style="color:#24292F">(</span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">, updates);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="74" style="width:2ch">74</span><span style="color:#24292F">      }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="75" style="width:2ch">75</span><span style="color:#24292F">    }, </span><span style="color:#0550AE">this</span><span style="color:#24292F">.</span><span style="color:#0550AE">INTERVAL</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="76" style="width:2ch">76</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="77" style="width:2ch">77</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div></div><a target="_blank" rel="noopener noreferrer" class="block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabaseEventsService.ts">View <!-- -->DatabaseEventsService.ts<!-- --> file on GitHub<svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></div></div>
<h2 id="polling-controller-and-service" class="x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border">Polling controller and service<a href="#polling-controller-and-service" class="x:focus-visible:nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="x:not-first:mt-[1.25em] x:leading-7">With Redis change entries and the change emitter in place, we can implement a polling endpoint that streams updates to clients in real time. The <code class="nextra-code" dir="ltr">DatabasePollController</code> exposes a single <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/controller/jsonlines">JSONLines</a> endpoint, and <code class="nextra-code" dir="ltr">DatabasePollService</code> uses a <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/controller/jsonlines#jsonlinesresponse">JSONLinesResponse</a> instance (received from the controller) to send data to clients. The service closes the connection safely after 30 seconds, so clients should reconnect.</p>
<div class="bg-code rounded-lg mt-4" id="_S_1_"><div class="pb-2 px-4 text-sm mb-1"><div class="inline-block mr-4 mb-1"><span title="src/modules/database/DatabasePollService.ts" class="pb-0.5 cursor-pointer border-b-2 border-solid text-neutral-900 border-blue-500 dark:text-gray-100 dark:border-slate-500">DatabasePollService.ts</span><a class="inline-block align-middle ml-1" href="https://github.com/finom/vovk-kanban-demo/tree/main/src/modules/database/DatabasePollService.ts" target="_blank" title="View on GitHub"><svg width="16" height="16" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 11.9976C14 9.5059 11.683 7 8.85714 7C8.52241 7 7.41904 7.00001 7.14286 7.00001C4.30254 7.00001 2 9.23752 2 11.9976C2 14.376 3.70973 16.3664 6 16.8714C6.36756 16.9525 6.75006 16.9952 7.14286 16.9952" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 11.9976C10 14.4893 12.317 16.9952 15.1429 16.9952C15.4776 16.9952 16.581 16.9952 16.8571 16.9952C19.6975 16.9952 22 14.7577 22 11.9976C22 9.6192 20.2903 7.62884 18 7.12383C17.6324 7.04278 17.2499 6.99999 16.8571 6.99999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div><div class="inline-block mr-4 mb-1"><span title="src/modules/database/DatabasePollController.ts" class="pb-0.5 cursor-pointer border-b-2 border-solid text-slate-400 dark:text-[#525975] border-transparent">DatabasePollController.ts</span><a class="inline-block align-middle ml-1" href="https://github.com/finom/vovk-kanban-demo/tree/main/src/modules/database/DatabasePollController.ts" target="_blank" title="View on GitHub"><svg width="16" height="16" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 11.9976C14 9.5059 11.683 7 8.85714 7C8.52241 7 7.41904 7.00001 7.14286 7.00001C4.30254 7.00001 2 9.23752 2 11.9976C2 14.376 3.70973 16.3664 6 16.8714C6.36756 16.9525 6.75006 16.9952 7.14286 16.9952" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10 11.9976C10 14.4893 12.317 16.9952 15.1429 16.9952C15.4776 16.9952 16.581 16.9952 16.8571 16.9952C19.6975 16.9952 22 14.7577 22 11.9976C22 9.6192 20.2903 7.62884 18 7.12383C17.6324 7.04278 17.2499 6.99999 16.8571 6.99999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></div><div class="h-full github-tab-content " id="tab-_S_1_-0"><div class="border dark:!border-gray-800 text-sm"><div data-theme="dark" class="hidden dark:block"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { JSONLinesResponse, </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> VovkIteration } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;vovk&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { forEach, groupBy } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;lodash&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import type</span><span style="color:#C9D1D9"> DatabasePollController </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabasePollController&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseEventsService, { </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> DBChange } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseEventsService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseService </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> PollService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#FF7B72">  static </span><span style="color:#D2A8FF">poll</span><span style="color:#FFA657">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#FFA657">    resp</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> JSONLinesResponse&lt;VovkIteration&lt;</span><span style="color:#FF7B72">typeof </span><span style="color:#C9D1D9">DatabasePollController</span><span style="color:#FFA657">.</span><span style="color:#C9D1D9">poll</span><span style="color:#FFA657">&gt;&gt;,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#FFA657">  ) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#D2A8FF">    setTimeout</span><span style="color:#C9D1D9">(resp.close, </span><span style="color:#79C0FF">30_000</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">    let</span><span style="color:#C9D1D9"> asOldAs </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#8B949E">    // 10 minutes ago; TODO: use latest update date from registry</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#C9D1D9">    asOldAs.</span><span style="color:#D2A8FF">setMinutes</span><span style="color:#C9D1D9">(asOldAs.</span><span style="color:#D2A8FF">getMinutes</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">- </span><span style="color:#79C0FF">10</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#C9D1D9">    DatabaseEventsService.emitter.</span><span style="color:#D2A8FF">on</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#C9D1D9">      DatabaseEventsService.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">      (</span><span style="color:#FFA657">changes</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">deleted </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">filter</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">createdOrUpdated </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">filter</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#C9D1D9">          (</span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;create&quot; </span><span style="color:#FF7B72">||</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#C9D1D9">        );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FF7B72">        for</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">const </span><span style="color:#79C0FF">deletedEntity </span><span style="color:#FF7B72">of</span><span style="color:#C9D1D9"> deleted) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#C9D1D9">          resp.</span><span style="color:#D2A8FF">send</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#C9D1D9">            id: deletedEntity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#C9D1D9">            entityType: deletedEntity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#C9D1D9">            __isDeleted: </span><span style="color:#79C0FF">true</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#C9D1D9">          });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#C9D1D9">        }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#8B949E">        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#D2A8FF">        forEach</span><span style="color:#C9D1D9">(</span><span style="color:#D2A8FF">groupBy</span><span style="color:#C9D1D9">(createdOrUpdated, </span><span style="color:#A5D6FF">&quot;entityType&quot;</span><span style="color:#C9D1D9">), (</span><span style="color:#FFA657">changes</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#FF7B72">          const </span><span style="color:#79C0FF">maxDateItem </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">reduce</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#C9D1D9">            (</span><span style="color:#FFA657">max</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#FF7B72">              const </span><span style="color:#79C0FF">changeDate </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(change.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#FF7B72">              return</span><span style="color:#C9D1D9"> changeDate.</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">&gt; new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(max.date).</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#FF7B72">                ?</span><span style="color:#C9D1D9"> change</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#FF7B72">                :</span><span style="color:#C9D1D9"> max;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#C9D1D9">            },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#C9D1D9">            { date: </span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) } </span><span style="color:#FF7B72">as </span><span style="color:#79C0FF">unknown </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#C9D1D9">          );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#FF7B72">          if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(maxDateItem.date).</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">&gt;</span><span style="color:#C9D1D9"> asOldAs.</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">()) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#FF7B72">            void</span><span style="color:#C9D1D9"> DatabaseService.prisma[maxDateItem.entityType </span><span style="color:#FF7B72">as </span><span style="color:#A5D6FF">&quot;user&quot;</span><span style="color:#C9D1D9">]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#C9D1D9">              .</span><span style="color:#D2A8FF">findMany</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#C9D1D9">                where: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#C9D1D9">                  updatedAt: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#C9D1D9">                    gt: asOldAs,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#C9D1D9">                  },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#C9D1D9">                },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#C9D1D9">              })</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#C9D1D9">              .</span><span style="color:#D2A8FF">then</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">entities</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#FF7B72">                for</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">const </span><span style="color:#79C0FF">entity </span><span style="color:#FF7B72">of</span><span style="color:#C9D1D9"> entities) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#C9D1D9">                  resp.</span><span style="color:#D2A8FF">send</span><span style="color:#C9D1D9">(entity);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#C9D1D9">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#C9D1D9">              });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#C9D1D9">            asOldAs </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(maxDateItem.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#C9D1D9">          }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#C9D1D9">        });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#C9D1D9">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#C9D1D9">    );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { JSONLinesResponse, </span><span style="color:#CF222E">type</span><span style="color:#24292F"> VovkIteration } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;vovk&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { forEach, groupBy } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;lodash&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import type</span><span style="color:#24292F"> DatabasePollController </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabasePollController&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseEventsService, { </span><span style="color:#CF222E">type</span><span style="color:#24292F"> DBChange } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseEventsService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseService </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> PollService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#CF222E">  static </span><span style="color:#8250DF">poll</span><span style="color:#953800">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#953800">    resp</span><span style="color:#CF222E">:</span><span style="color:#953800"> JSONLinesResponse&lt;VovkIteration&lt;</span><span style="color:#CF222E">typeof </span><span style="color:#24292F">DatabasePollController</span><span style="color:#953800">.</span><span style="color:#24292F">poll</span><span style="color:#953800">&gt;&gt;,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#953800">  ) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#8250DF">    setTimeout</span><span style="color:#24292F">(resp.close, </span><span style="color:#0550AE">30_000</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">    let</span><span style="color:#24292F"> asOldAs </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#6E7781">    // 10 minutes ago; TODO: use latest update date from registry</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#24292F">    asOldAs.</span><span style="color:#8250DF">setMinutes</span><span style="color:#24292F">(asOldAs.</span><span style="color:#8250DF">getMinutes</span><span style="color:#24292F">() </span><span style="color:#CF222E">- </span><span style="color:#0550AE">10</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#24292F">    DatabaseEventsService.emitter.</span><span style="color:#8250DF">on</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#24292F">      DatabaseEventsService.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">      (</span><span style="color:#953800">changes</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">deleted </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">filter</span><span style="color:#24292F">((</span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">createdOrUpdated </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">filter</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#24292F">          (</span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;create&quot; </span><span style="color:#CF222E">||</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#24292F">        );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#CF222E">        for</span><span style="color:#24292F"> (</span><span style="color:#CF222E">const </span><span style="color:#0550AE">deletedEntity </span><span style="color:#CF222E">of</span><span style="color:#24292F"> deleted) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#24292F">          resp.</span><span style="color:#8250DF">send</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#24292F">            id: deletedEntity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#24292F">            entityType: deletedEntity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#24292F">            __isDeleted: </span><span style="color:#0550AE">true</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#24292F">          });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#24292F">        }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#6E7781">        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#8250DF">        forEach</span><span style="color:#24292F">(</span><span style="color:#8250DF">groupBy</span><span style="color:#24292F">(createdOrUpdated, </span><span style="color:#0A3069">&quot;entityType&quot;</span><span style="color:#24292F">), (</span><span style="color:#953800">changes</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#CF222E">          const </span><span style="color:#0550AE">maxDateItem </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">reduce</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#24292F">            (</span><span style="color:#953800">max</span><span style="color:#24292F">, </span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#CF222E">              const </span><span style="color:#0550AE">changeDate </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(change.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#CF222E">              return</span><span style="color:#24292F"> changeDate.</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">() </span><span style="color:#CF222E">&gt; new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(max.date).</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#CF222E">                ?</span><span style="color:#24292F"> change</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#CF222E">                :</span><span style="color:#24292F"> max;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#24292F">            },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#24292F">            { date: </span><span style="color:#CF222E">new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(</span><span style="color:#0550AE">0</span><span style="color:#24292F">) } </span><span style="color:#CF222E">as </span><span style="color:#0550AE">unknown </span><span style="color:#CF222E">as </span><span style="color:#953800">DBChange</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#24292F">          );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#CF222E">          if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(maxDateItem.date).</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">() </span><span style="color:#CF222E">&gt;</span><span style="color:#24292F"> asOldAs.</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">()) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#CF222E">            void</span><span style="color:#24292F"> DatabaseService.prisma[maxDateItem.entityType </span><span style="color:#CF222E">as </span><span style="color:#0A3069">&quot;user&quot;</span><span style="color:#24292F">]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#24292F">              .</span><span style="color:#8250DF">findMany</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#24292F">                where: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#24292F">                  updatedAt: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#24292F">                    gt: asOldAs,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#24292F">                  },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#24292F">                },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#24292F">              })</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#24292F">              .</span><span style="color:#8250DF">then</span><span style="color:#24292F">((</span><span style="color:#953800">entities</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#CF222E">                for</span><span style="color:#24292F"> (</span><span style="color:#CF222E">const </span><span style="color:#0550AE">entity </span><span style="color:#CF222E">of</span><span style="color:#24292F"> entities) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#24292F">                  resp.</span><span style="color:#8250DF">send</span><span style="color:#24292F">(entity);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#24292F">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#24292F">              });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#24292F">            asOldAs </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(maxDateItem.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#24292F">          }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#24292F">        });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#24292F">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#24292F">    );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div> <div data-theme="light" class="dark:hidden"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { JSONLinesResponse, </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> VovkIteration } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;vovk&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { forEach, groupBy } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;lodash&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import type</span><span style="color:#C9D1D9"> DatabasePollController </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabasePollController&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseEventsService, { </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> DBChange } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseEventsService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabaseService </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabaseService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> PollService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#FF7B72">  static </span><span style="color:#D2A8FF">poll</span><span style="color:#FFA657">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#FFA657">    resp</span><span style="color:#FF7B72">:</span><span style="color:#FFA657"> JSONLinesResponse&lt;VovkIteration&lt;</span><span style="color:#FF7B72">typeof </span><span style="color:#C9D1D9">DatabasePollController</span><span style="color:#FFA657">.</span><span style="color:#C9D1D9">poll</span><span style="color:#FFA657">&gt;&gt;,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#FFA657">  ) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#D2A8FF">    setTimeout</span><span style="color:#C9D1D9">(resp.close, </span><span style="color:#79C0FF">30_000</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">    let</span><span style="color:#C9D1D9"> asOldAs </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#8B949E">    // 10 minutes ago; TODO: use latest update date from registry</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#C9D1D9">    asOldAs.</span><span style="color:#D2A8FF">setMinutes</span><span style="color:#C9D1D9">(asOldAs.</span><span style="color:#D2A8FF">getMinutes</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">- </span><span style="color:#79C0FF">10</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#C9D1D9">    DatabaseEventsService.emitter.</span><span style="color:#D2A8FF">on</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#C9D1D9">      DatabaseEventsService.</span><span style="color:#79C0FF">DB_KEY</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">      (</span><span style="color:#FFA657">changes</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">deleted </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">filter</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;delete&quot;</span><span style="color:#C9D1D9">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#FF7B72">        const </span><span style="color:#79C0FF">createdOrUpdated </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">filter</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#C9D1D9">          (</span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;create&quot; </span><span style="color:#FF7B72">||</span><span style="color:#C9D1D9"> change.type </span><span style="color:#FF7B72">=== </span><span style="color:#A5D6FF">&quot;update&quot;</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#C9D1D9">        );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FF7B72">        for</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">const </span><span style="color:#79C0FF">deletedEntity </span><span style="color:#FF7B72">of</span><span style="color:#C9D1D9"> deleted) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#C9D1D9">          resp.</span><span style="color:#D2A8FF">send</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#C9D1D9">            id: deletedEntity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#C9D1D9">            entityType: deletedEntity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#C9D1D9">            __isDeleted: </span><span style="color:#79C0FF">true</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#C9D1D9">          });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#C9D1D9">        }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#8B949E">        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#D2A8FF">        forEach</span><span style="color:#C9D1D9">(</span><span style="color:#D2A8FF">groupBy</span><span style="color:#C9D1D9">(createdOrUpdated, </span><span style="color:#A5D6FF">&quot;entityType&quot;</span><span style="color:#C9D1D9">), (</span><span style="color:#FFA657">changes</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#FF7B72">          const </span><span style="color:#79C0FF">maxDateItem </span><span style="color:#FF7B72">=</span><span style="color:#C9D1D9"> changes.</span><span style="color:#D2A8FF">reduce</span><span style="color:#C9D1D9">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#C9D1D9">            (</span><span style="color:#FFA657">max</span><span style="color:#C9D1D9">, </span><span style="color:#FFA657">change</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#FF7B72">              const </span><span style="color:#79C0FF">changeDate </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(change.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#FF7B72">              return</span><span style="color:#C9D1D9"> changeDate.</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">&gt; new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(max.date).</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#FF7B72">                ?</span><span style="color:#C9D1D9"> change</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#FF7B72">                :</span><span style="color:#C9D1D9"> max;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#C9D1D9">            },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#C9D1D9">            { date: </span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(</span><span style="color:#79C0FF">0</span><span style="color:#C9D1D9">) } </span><span style="color:#FF7B72">as </span><span style="color:#79C0FF">unknown </span><span style="color:#FF7B72">as </span><span style="color:#FFA657">DBChange</span><span style="color:#C9D1D9">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#C9D1D9">          );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#FF7B72">          if</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(maxDateItem.date).</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">() </span><span style="color:#FF7B72">&gt;</span><span style="color:#C9D1D9"> asOldAs.</span><span style="color:#D2A8FF">getTime</span><span style="color:#C9D1D9">()) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#FF7B72">            void</span><span style="color:#C9D1D9"> DatabaseService.prisma[maxDateItem.entityType </span><span style="color:#FF7B72">as </span><span style="color:#A5D6FF">&quot;user&quot;</span><span style="color:#C9D1D9">]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#C9D1D9">              .</span><span style="color:#D2A8FF">findMany</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#C9D1D9">                where: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#C9D1D9">                  updatedAt: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#C9D1D9">                    gt: asOldAs,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#C9D1D9">                  },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#C9D1D9">                },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#C9D1D9">              })</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#C9D1D9">              .</span><span style="color:#D2A8FF">then</span><span style="color:#C9D1D9">((</span><span style="color:#FFA657">entities</span><span style="color:#C9D1D9">) </span><span style="color:#FF7B72">=&gt;</span><span style="color:#C9D1D9"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#FF7B72">                for</span><span style="color:#C9D1D9"> (</span><span style="color:#FF7B72">const </span><span style="color:#79C0FF">entity </span><span style="color:#FF7B72">of</span><span style="color:#C9D1D9"> entities) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#C9D1D9">                  resp.</span><span style="color:#D2A8FF">send</span><span style="color:#C9D1D9">(entity);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#C9D1D9">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#C9D1D9">              });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#C9D1D9">            asOldAs </span><span style="color:#FF7B72">= new </span><span style="color:#D2A8FF">Date</span><span style="color:#C9D1D9">(maxDateItem.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#C9D1D9">          }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#C9D1D9">        });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#C9D1D9">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#C9D1D9">    );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#C9D1D9">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { JSONLinesResponse, </span><span style="color:#CF222E">type</span><span style="color:#24292F"> VovkIteration } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;vovk&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { forEach, groupBy } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;lodash&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import type</span><span style="color:#24292F"> DatabasePollController </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabasePollController&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseEventsService, { </span><span style="color:#CF222E">type</span><span style="color:#24292F"> DBChange } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseEventsService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabaseService </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabaseService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> PollService {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#CF222E">  static </span><span style="color:#8250DF">poll</span><span style="color:#953800">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#953800">    resp</span><span style="color:#CF222E">:</span><span style="color:#953800"> JSONLinesResponse&lt;VovkIteration&lt;</span><span style="color:#CF222E">typeof </span><span style="color:#24292F">DatabasePollController</span><span style="color:#953800">.</span><span style="color:#24292F">poll</span><span style="color:#953800">&gt;&gt;,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#953800">  ) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#8250DF">    setTimeout</span><span style="color:#24292F">(resp.close, </span><span style="color:#0550AE">30_000</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">    let</span><span style="color:#24292F"> asOldAs </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">();</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#6E7781">    // 10 minutes ago; TODO: use latest update date from registry</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#24292F">    asOldAs.</span><span style="color:#8250DF">setMinutes</span><span style="color:#24292F">(asOldAs.</span><span style="color:#8250DF">getMinutes</span><span style="color:#24292F">() </span><span style="color:#CF222E">- </span><span style="color:#0550AE">10</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#24292F">    DatabaseEventsService.emitter.</span><span style="color:#8250DF">on</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#24292F">      DatabaseEventsService.</span><span style="color:#0550AE">DB_KEY</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">      (</span><span style="color:#953800">changes</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">deleted </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">filter</span><span style="color:#24292F">((</span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;delete&quot;</span><span style="color:#24292F">);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#CF222E">        const </span><span style="color:#0550AE">createdOrUpdated </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">filter</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#24292F">          (</span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;create&quot; </span><span style="color:#CF222E">||</span><span style="color:#24292F"> change.type </span><span style="color:#CF222E">=== </span><span style="color:#0A3069">&quot;update&quot;</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#24292F">        );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#CF222E">        for</span><span style="color:#24292F"> (</span><span style="color:#CF222E">const </span><span style="color:#0550AE">deletedEntity </span><span style="color:#CF222E">of</span><span style="color:#24292F"> deleted) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#24292F">          resp.</span><span style="color:#8250DF">send</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#24292F">            id: deletedEntity.id,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#24292F">            entityType: deletedEntity.entityType,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#24292F">            __isDeleted: </span><span style="color:#0550AE">true</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#24292F">          });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#24292F">        }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#6E7781">        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#8250DF">        forEach</span><span style="color:#24292F">(</span><span style="color:#8250DF">groupBy</span><span style="color:#24292F">(createdOrUpdated, </span><span style="color:#0A3069">&quot;entityType&quot;</span><span style="color:#24292F">), (</span><span style="color:#953800">changes</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#CF222E">          const </span><span style="color:#0550AE">maxDateItem </span><span style="color:#CF222E">=</span><span style="color:#24292F"> changes.</span><span style="color:#8250DF">reduce</span><span style="color:#24292F">(</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="35" style="width:2ch">35</span><span style="color:#24292F">            (</span><span style="color:#953800">max</span><span style="color:#24292F">, </span><span style="color:#953800">change</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="36" style="width:2ch">36</span><span style="color:#CF222E">              const </span><span style="color:#0550AE">changeDate </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(change.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="37" style="width:2ch">37</span><span style="color:#CF222E">              return</span><span style="color:#24292F"> changeDate.</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">() </span><span style="color:#CF222E">&gt; new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(max.date).</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="38" style="width:2ch">38</span><span style="color:#CF222E">                ?</span><span style="color:#24292F"> change</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="39" style="width:2ch">39</span><span style="color:#CF222E">                :</span><span style="color:#24292F"> max;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="40" style="width:2ch">40</span><span style="color:#24292F">            },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="41" style="width:2ch">41</span><span style="color:#24292F">            { date: </span><span style="color:#CF222E">new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(</span><span style="color:#0550AE">0</span><span style="color:#24292F">) } </span><span style="color:#CF222E">as </span><span style="color:#0550AE">unknown </span><span style="color:#CF222E">as </span><span style="color:#953800">DBChange</span><span style="color:#24292F">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="42" style="width:2ch">42</span><span style="color:#24292F">          );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="43" style="width:2ch">43</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="44" style="width:2ch">44</span><span style="color:#CF222E">          if</span><span style="color:#24292F"> (</span><span style="color:#CF222E">new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(maxDateItem.date).</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">() </span><span style="color:#CF222E">&gt;</span><span style="color:#24292F"> asOldAs.</span><span style="color:#8250DF">getTime</span><span style="color:#24292F">()) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="45" style="width:2ch">45</span><span style="color:#CF222E">            void</span><span style="color:#24292F"> DatabaseService.prisma[maxDateItem.entityType </span><span style="color:#CF222E">as </span><span style="color:#0A3069">&quot;user&quot;</span><span style="color:#24292F">]</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="46" style="width:2ch">46</span><span style="color:#24292F">              .</span><span style="color:#8250DF">findMany</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="47" style="width:2ch">47</span><span style="color:#24292F">                where: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="48" style="width:2ch">48</span><span style="color:#24292F">                  updatedAt: {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="49" style="width:2ch">49</span><span style="color:#24292F">                    gt: asOldAs,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="50" style="width:2ch">50</span><span style="color:#24292F">                  },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="51" style="width:2ch">51</span><span style="color:#24292F">                },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="52" style="width:2ch">52</span><span style="color:#24292F">              })</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="53" style="width:2ch">53</span><span style="color:#24292F">              .</span><span style="color:#8250DF">then</span><span style="color:#24292F">((</span><span style="color:#953800">entities</span><span style="color:#24292F">) </span><span style="color:#CF222E">=&gt;</span><span style="color:#24292F"> {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="54" style="width:2ch">54</span><span style="color:#CF222E">                for</span><span style="color:#24292F"> (</span><span style="color:#CF222E">const </span><span style="color:#0550AE">entity </span><span style="color:#CF222E">of</span><span style="color:#24292F"> entities) {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="55" style="width:2ch">55</span><span style="color:#24292F">                  resp.</span><span style="color:#8250DF">send</span><span style="color:#24292F">(entity);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="56" style="width:2ch">56</span><span style="color:#24292F">                }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="57" style="width:2ch">57</span><span style="color:#24292F">              });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="58" style="width:2ch">58</span><span style="color:#24292F">            asOldAs </span><span style="color:#CF222E">= new </span><span style="color:#8250DF">Date</span><span style="color:#24292F">(maxDateItem.date);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="59" style="width:2ch">59</span><span style="color:#24292F">          }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="60" style="width:2ch">60</span><span style="color:#24292F">        });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="61" style="width:2ch">61</span><span style="color:#24292F">      },</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="62" style="width:2ch">62</span><span style="color:#24292F">    );</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="63" style="width:2ch">63</span><span style="color:#24292F">  }</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="64" style="width:2ch">64</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div></div><a target="_blank" rel="noopener noreferrer" class="block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabasePollService.ts">View <!-- -->DatabasePollService.ts<!-- --> file on GitHub<svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></div><div class="h-full github-tab-content hidden" id="tab-_S_1_-1"><div class="border dark:!border-gray-800 text-sm"><div data-theme="dark" class="hidden dark:block"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { EntityType } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { get, JSONLinesResponse, prefix, </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> VovkIteration } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;vovk&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { z } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;zod&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabasePollService </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabasePollService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { TaskSchema, UserSchema } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/schemas&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { withZod } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/lib/withZod&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { sessionGuard } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/decorators/sessionGuard&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#C9D1D9">@</span><span style="color:#D2A8FF">prefix</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;poll&quot;</span><span style="color:#C9D1D9">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabasePollController {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#FFA657">  @</span><span style="color:#D2A8FF">get</span><span style="color:#FFA657">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#FFA657">  @</span><span style="color:#D2A8FF">sessionGuard</span><span style="color:#FFA657">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">  static</span><span style="color:#FFA657"> poll </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">withZod</span><span style="color:#FFA657">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#C9D1D9">    preferTransformed: </span><span style="color:#79C0FF">false</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#C9D1D9">    iteration: z.</span><span style="color:#D2A8FF">union</span><span style="color:#C9D1D9">([</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#C9D1D9">      z.</span><span style="color:#D2A8FF">object</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#C9D1D9">        id: z.</span><span style="color:#D2A8FF">uuid</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#C9D1D9">        entityType: z.</span><span style="color:#D2A8FF">enum</span><span style="color:#C9D1D9">(EntityType),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">        __isDeleted: z.</span><span style="color:#D2A8FF">boolean</span><span style="color:#C9D1D9">().</span><span style="color:#D2A8FF">optional</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#C9D1D9">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#C9D1D9">      UserSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#C9D1D9">      TaskSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#C9D1D9">    ])</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#FF7B72">    async </span><span style="color:#D2A8FF">handle</span><span style="color:#FFA657">(req) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">response </span><span style="color:#FF7B72">= new</span><span style="color:#C9D1D9"> JSONLinesResponse</span><span style="color:#FF7B72">&lt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#C9D1D9">        VovkIteration</span><span style="color:#FF7B72">&lt;typeof</span><span style="color:#C9D1D9"> DatabasePollController.poll</span><span style="color:#FF7B72">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#FF7B72">      &gt;</span><span style="color:#C9D1D9">(req);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#FF7B72">      void</span><span style="color:#C9D1D9"> DatabasePollService.</span><span style="color:#D2A8FF">poll</span><span style="color:#C9D1D9">(response);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#FF7B72">      return</span><span style="color:#C9D1D9"> response;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#C9D1D9">    }</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#FFA657">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { EntityType } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { get, JSONLinesResponse, prefix, </span><span style="color:#CF222E">type</span><span style="color:#24292F"> VovkIteration } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;vovk&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { z } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;zod&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabasePollService </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabasePollService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { TaskSchema, UserSchema } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/schemas&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { withZod } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/lib/withZod&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { sessionGuard } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/decorators/sessionGuard&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#24292F">@</span><span style="color:#8250DF">prefix</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;poll&quot;</span><span style="color:#24292F">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabasePollController {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#953800">  @</span><span style="color:#8250DF">get</span><span style="color:#953800">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#953800">  @</span><span style="color:#8250DF">sessionGuard</span><span style="color:#953800">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">  static</span><span style="color:#953800"> poll </span><span style="color:#CF222E">= </span><span style="color:#8250DF">withZod</span><span style="color:#953800">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#24292F">    preferTransformed: </span><span style="color:#0550AE">false</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#24292F">    iteration: z.</span><span style="color:#8250DF">union</span><span style="color:#24292F">([</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#24292F">      z.</span><span style="color:#8250DF">object</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#24292F">        id: z.</span><span style="color:#8250DF">uuid</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#24292F">        entityType: z.</span><span style="color:#8250DF">enum</span><span style="color:#24292F">(EntityType),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">        __isDeleted: z.</span><span style="color:#8250DF">boolean</span><span style="color:#24292F">().</span><span style="color:#8250DF">optional</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#24292F">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#24292F">      UserSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#24292F">      TaskSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#24292F">    ])</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#CF222E">    async </span><span style="color:#8250DF">handle</span><span style="color:#953800">(req) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">response </span><span style="color:#CF222E">= new</span><span style="color:#24292F"> JSONLinesResponse</span><span style="color:#CF222E">&lt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#24292F">        VovkIteration</span><span style="color:#CF222E">&lt;typeof</span><span style="color:#24292F"> DatabasePollController.poll</span><span style="color:#CF222E">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#CF222E">      &gt;</span><span style="color:#24292F">(req);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#CF222E">      void</span><span style="color:#24292F"> DatabasePollService.</span><span style="color:#8250DF">poll</span><span style="color:#24292F">(response);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#CF222E">      return</span><span style="color:#24292F"> response;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#24292F">    }</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#953800">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div> <div data-theme="light" class="dark:hidden"><div data-bright-theme="github-dark" data-bright-mode="dark" style="color:#c9d1d9;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#264F78;--line-number-color:#6e7681;--tab-border:#30363d;--tab-background:#0d1117;--tab-color:#c9d1d9;--inactive-tab-background:#010409;--inactive-tab-color:#8b949e;--tab-top-border:#f78166;--tab-bottom-border:#0d1117;color-scheme:dark"><style>[data-bright-mode="dark"] { display: block }
[data-theme="light"] [data-bright-mode="dark"] { display: none }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#c9d1d9;background:#0d1117;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { EntityType } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/client&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { get, JSONLinesResponse, prefix, </span><span style="color:#FF7B72">type</span><span style="color:#C9D1D9"> VovkIteration } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;vovk&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { z } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;zod&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> DatabasePollService </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;./DatabasePollService&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { TaskSchema, UserSchema } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;../../../prisma/generated/schemas&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { withZod } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/lib/withZod&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#FF7B72">import</span><span style="color:#C9D1D9"> { sessionGuard } </span><span style="color:#FF7B72">from </span><span style="color:#A5D6FF">&quot;@/decorators/sessionGuard&quot;</span><span style="color:#C9D1D9">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#C9D1D9">@</span><span style="color:#D2A8FF">prefix</span><span style="color:#C9D1D9">(</span><span style="color:#A5D6FF">&quot;poll&quot;</span><span style="color:#C9D1D9">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#FF7B72">export default class</span><span style="color:#FFA657"> DatabasePollController {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#FFA657">  @</span><span style="color:#D2A8FF">get</span><span style="color:#FFA657">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#FFA657">  @</span><span style="color:#D2A8FF">sessionGuard</span><span style="color:#FFA657">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#FF7B72">  static</span><span style="color:#FFA657"> poll </span><span style="color:#FF7B72">= </span><span style="color:#D2A8FF">withZod</span><span style="color:#FFA657">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#C9D1D9">    preferTransformed: </span><span style="color:#79C0FF">false</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#C9D1D9">    iteration: z.</span><span style="color:#D2A8FF">union</span><span style="color:#C9D1D9">([</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#C9D1D9">      z.</span><span style="color:#D2A8FF">object</span><span style="color:#C9D1D9">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#C9D1D9">        id: z.</span><span style="color:#D2A8FF">uuid</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#C9D1D9">        entityType: z.</span><span style="color:#D2A8FF">enum</span><span style="color:#C9D1D9">(EntityType),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#C9D1D9">        __isDeleted: z.</span><span style="color:#D2A8FF">boolean</span><span style="color:#C9D1D9">().</span><span style="color:#D2A8FF">optional</span><span style="color:#C9D1D9">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#C9D1D9">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#C9D1D9">      UserSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#C9D1D9">      TaskSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#C9D1D9">    ])</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#FF7B72">    async </span><span style="color:#D2A8FF">handle</span><span style="color:#FFA657">(req) </span><span style="color:#C9D1D9">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#FF7B72">      const </span><span style="color:#79C0FF">response </span><span style="color:#FF7B72">= new</span><span style="color:#C9D1D9"> JSONLinesResponse</span><span style="color:#FF7B72">&lt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#C9D1D9">        VovkIteration</span><span style="color:#FF7B72">&lt;typeof</span><span style="color:#C9D1D9"> DatabasePollController.poll</span><span style="color:#FF7B72">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#FF7B72">      &gt;</span><span style="color:#C9D1D9">(req);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#FF7B72">      void</span><span style="color:#C9D1D9"> DatabasePollService.</span><span style="color:#D2A8FF">poll</span><span style="color:#C9D1D9">(response);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#C9D1D9"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#FF7B72">      return</span><span style="color:#C9D1D9"> response;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#C9D1D9">    }</span><span style="color:#FFA657">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#FFA657">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#FFA657">}</span><br/></span></div></code></pre></div><div data-bright-theme="github-light" data-bright-mode="light" style="color:#24292f;border-radius:4px;overflow:hidden;margin:1em 0;--selection-background:#ADD6FF;--line-number-color:#8c959f;--tab-border:#d0d7de;--tab-background:#ffffff;--tab-color:#24292f;--inactive-tab-background:#f6f8fa;--inactive-tab-color:#57606a;--tab-top-border:#fd8c73;--tab-bottom-border:#ffffff;color-scheme:light"><style>[data-bright-mode="light"] { display: none }
[data-theme="light"] [data-bright-mode="light"] { display: block }
  [data-bright-theme] ::selection { background-color: var(--selection-background) }
  [data-bright-theme] [data-bright-ln] { 
    color: var(--line-number-color); 
    margin-right: 1.5ch; 
    display: inline-block;
    text-align: right;
    user-select: none;
  }
  </style><pre style="margin:0;color:#24292f;background:#ffffff;padding:1em 0;overflow:auto"><code style="display:block;min-width:fit-content"><div style="padding:0 1em"><span><span data-bright-ln="1" style="width:2ch">1</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { EntityType } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/client&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="2" style="width:2ch">2</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { get, JSONLinesResponse, prefix, </span><span style="color:#CF222E">type</span><span style="color:#24292F"> VovkIteration } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;vovk&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="3" style="width:2ch">3</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { z } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;zod&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="4" style="width:2ch">4</span><span style="color:#CF222E">import</span><span style="color:#24292F"> DatabasePollService </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;./DatabasePollService&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="5" style="width:2ch">5</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { TaskSchema, UserSchema } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;../../../prisma/generated/schemas&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="6" style="width:2ch">6</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { withZod } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/lib/withZod&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="7" style="width:2ch">7</span><span style="color:#CF222E">import</span><span style="color:#24292F"> { sessionGuard } </span><span style="color:#CF222E">from </span><span style="color:#0A3069">&quot;@/decorators/sessionGuard&quot;</span><span style="color:#24292F">;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="8" style="width:2ch">8</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="9" style="width:2ch">9</span><span style="color:#24292F">@</span><span style="color:#8250DF">prefix</span><span style="color:#24292F">(</span><span style="color:#0A3069">&quot;poll&quot;</span><span style="color:#24292F">)</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="10" style="width:2ch">10</span><span style="color:#CF222E">export default class</span><span style="color:#953800"> DatabasePollController {</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="11" style="width:2ch">11</span><span style="color:#953800">  @</span><span style="color:#8250DF">get</span><span style="color:#953800">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="12" style="width:2ch">12</span><span style="color:#953800">  @</span><span style="color:#8250DF">sessionGuard</span><span style="color:#953800">()</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="13" style="width:2ch">13</span><span style="color:#CF222E">  static</span><span style="color:#953800"> poll </span><span style="color:#CF222E">= </span><span style="color:#8250DF">withZod</span><span style="color:#953800">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="14" style="width:2ch">14</span><span style="color:#24292F">    preferTransformed: </span><span style="color:#0550AE">false</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="15" style="width:2ch">15</span><span style="color:#24292F">    iteration: z.</span><span style="color:#8250DF">union</span><span style="color:#24292F">([</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="16" style="width:2ch">16</span><span style="color:#24292F">      z.</span><span style="color:#8250DF">object</span><span style="color:#24292F">({</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="17" style="width:2ch">17</span><span style="color:#24292F">        id: z.</span><span style="color:#8250DF">uuid</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="18" style="width:2ch">18</span><span style="color:#24292F">        entityType: z.</span><span style="color:#8250DF">enum</span><span style="color:#24292F">(EntityType),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="19" style="width:2ch">19</span><span style="color:#24292F">        __isDeleted: z.</span><span style="color:#8250DF">boolean</span><span style="color:#24292F">().</span><span style="color:#8250DF">optional</span><span style="color:#24292F">(),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="20" style="width:2ch">20</span><span style="color:#24292F">      }),</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="21" style="width:2ch">21</span><span style="color:#24292F">      UserSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="22" style="width:2ch">22</span><span style="color:#24292F">      TaskSchema,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="23" style="width:2ch">23</span><span style="color:#24292F">    ])</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="24" style="width:2ch">24</span><span style="color:#CF222E">    async </span><span style="color:#8250DF">handle</span><span style="color:#953800">(req) </span><span style="color:#24292F">{</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="25" style="width:2ch">25</span><span style="color:#CF222E">      const </span><span style="color:#0550AE">response </span><span style="color:#CF222E">= new</span><span style="color:#24292F"> JSONLinesResponse</span><span style="color:#CF222E">&lt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="26" style="width:2ch">26</span><span style="color:#24292F">        VovkIteration</span><span style="color:#CF222E">&lt;typeof</span><span style="color:#24292F"> DatabasePollController.poll</span><span style="color:#CF222E">&gt;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="27" style="width:2ch">27</span><span style="color:#CF222E">      &gt;</span><span style="color:#24292F">(req);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="28" style="width:2ch">28</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="29" style="width:2ch">29</span><span style="color:#CF222E">      void</span><span style="color:#24292F"> DatabasePollService.</span><span style="color:#8250DF">poll</span><span style="color:#24292F">(response);</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="30" style="width:2ch">30</span><span style="color:#24292F"></span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="31" style="width:2ch">31</span><span style="color:#CF222E">      return</span><span style="color:#24292F"> response;</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="32" style="width:2ch">32</span><span style="color:#24292F">    }</span><span style="color:#953800">,</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="33" style="width:2ch">33</span><span style="color:#953800">  });</span><br/></span></div><div style="padding:0 1em"><span><span data-bright-ln="34" style="width:2ch">34</span><span style="color:#953800">}</span><br/></span></div></code></pre></div></div></div><a target="_blank" rel="noopener noreferrer" class="block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabasePollController.ts">View <!-- -->DatabasePollController.ts<!-- --> file on GitHub<svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></div></div>
<ul class="x:[:is(ol,ul)_&amp;]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]">
<li class="x:my-[.5em]">When a <code class="nextra-code" dir="ltr">delete</code> DB change is emitted via <code class="nextra-code" dir="ltr">DatabaseEventsService.emitter</code>, the service sends an event with <code class="nextra-code" dir="ltr">id</code>, <code class="nextra-code" dir="ltr">entityType</code>, and <code class="nextra-code" dir="ltr">__isDeleted: true</code>. The front end uses <code class="nextra-code" dir="ltr">__isDeleted</code> to hide the entity by making it non-enumerable in the registry.</li>
<li class="x:my-[.5em]">When an <code class="nextra-code" dir="ltr">update</code> or <code class="nextra-code" dir="ltr">create</code> change is emitted, the service fetches the full entity from Postgres (since Redis stores only metadata) and sends it to clients.</li>
</ul>
<h2 id="client-side-logic" class="x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border">Client-side logic<a href="#client-side-logic" class="x:focus-visible:nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="x:not-first:mt-[1.25em] x:leading-7">On the client side (for example, in a React component), call <code class="nextra-code" dir="ltr">DatabasePollRPC.poll()</code> to receive a stream of database events. As with any <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/controller/jsonlines">JSONLines</a> RPC method, it returns an async iterable that you can consume in a <code class="nextra-code" dir="ltr">for await</code> loop. Because the server may close the connection or a network error may occur, wrap the logic in a retry loop and avoid reconnecting on <code class="nextra-code" dir="ltr">AbortError</code>. Since the <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/imports#fetcher">fetcher</a> is already <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/realtime-ui#fetcher">configured</a>, the loop body can be emptyâ€”you do not need to handle data manually.</p>
<p class="x:not-first:mt-[1.25em] x:leading-7">Front-end code, besides the polling logic, also includes on/off toggle state saved to <code class="nextra-code" dir="ltr">localStorage</code>, so the user can enable or disable polling as needed.</p>
<div data-pagefind-ignore="all" class="nextra-code x:relative x:not-first:mt-[1.25em]"><pre class="x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose" tabindex="0"><div class="x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2"><button class="x:transition x:cursor-pointer x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:rounded-md x:p-1.5 x:md:hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="1em"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button></div><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">isPollingEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">setIsPollingEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> useState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> pollingAbortControllerRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> useRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">AbortController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span> </span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> isEnabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;isPollingEnabled&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  setIsPollingEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(isEnabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, []);</span></span>
<span> </span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;isPollingEnabled&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, isPollingEnabled.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">retries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">isPollingEnabled) {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      pollingAbortControllerRef.current?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;START POLLING&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> iterable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> DatabasePollRPC.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        pollingAbortControllerRef.current </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> iterable.abortController;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> iteration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> iterable) {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;New DB update:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, iteration);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        retries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &amp;&amp;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        (error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">cause</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }).cause?.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;AbortError&quot;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ) {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Polling failed, retrying...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, error);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(resolve, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">));</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(retries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> poll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    pollingAbortControllerRef.current?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  };</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}, [isPollingEnabled]);</span></span></code></pre></div>
<h2 id="bonus-telegram-bot-unstable" class="x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border">Bonus: Telegram bot (unstable)<a href="#bonus-telegram-bot-unstable" class="x:focus-visible:nextra-focus subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p class="x:not-first:mt-[1.25em] x:leading-7">As an example of a third-party source of database changes, see the <a href="https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramService.ts" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">TelegramService<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a> and the accompanying <a href="https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramController.ts" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]">TelegramController<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a>. It accepts text or voice messages, performs voice-to-text transcription if needed using the OpenAI Whisper API, and uses the same <code class="nextra-code" dir="ltr">createLLMTools</code> function on the server:</p>
<div data-pagefind-ignore="all" class="nextra-code x:relative x:not-first:mt-[1.25em]"><pre class="x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose" tabindex="0"><div class="x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2"><button class="x:transition x:cursor-pointer x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:rounded-md x:p-1.5 x:md:hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="1em"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button></div><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createLLMTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  modules: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    UserController,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    TaskController,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre></div>
<p class="x:not-first:mt-[1.25em] x:leading-7">The Telegram API library is implemented with <a class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]" href="/codegen">OpenAPI Mixins</a> and used as a <code class="nextra-code" dir="ltr">TelegramAPI</code> module to call Telegram API methods.</p>
<div data-pagefind-ignore="all" class="nextra-code x:relative x:not-first:mt-[1.25em]"><div class="x:px-4 x:text-xs x:text-gray-700 x:dark:text-gray-200 x:bg-gray-100 x:dark:bg-neutral-900 x:flex x:items-center x:h-12 x:gap-2 x:rounded-t-md x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:border-b-0"><svg viewBox="0 0 24 24" fill="currentColor" height="1em" class="x:max-w-6 x:shrink-0"><path d="M0 2.66667V21.3333C0 22.8067 1.19333 24 2.66667 24H21.3333C22.8067 24 24 22.8067 24 21.3333V2.66667C24 1.19333 22.8067 0 21.3333 0H2.66667C1.19333 0 0 1.19333 0 2.66667ZM14.2213 12.6013H11.3973V21.3333H9.12133V12.6013H6.356V10.6667H14.2213V12.6013ZM14.664 20.8347V18.5C14.664 18.5 15.9387 19.4613 17.4693 19.4613C19 19.4613 18.94 18.4613 18.94 18.324C18.94 16.872 14.6053 16.872 14.6053 13.656C14.6053 9.28133 20.9213 11.008 20.9213 11.008L20.8427 13.0867C20.8427 13.0867 19.784 12.38 18.5867 12.38C17.3907 12.38 16.9587 12.9493 16.9587 13.5573C16.9587 15.1267 21.3333 14.9693 21.3333 18.128C21.3333 22.992 14.664 20.8347 14.664 20.8347Z"></path></svg><span class="x:truncate">vovk.config.mjs</span></div><pre class="x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-b-md not-prose" tabindex="0"><div class="x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-14"><button class="x:transition x:cursor-pointer x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:rounded-md x:p-1.5 x:md:hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="1em"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button></div><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// @ts-check</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/** </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> {import(&#x27;vovk&#x27;).VovkConfig}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  outputConfig: {</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ...</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    segments: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      telegram: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        openAPIMixin: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          source: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;https://raw.githubusercontent.com/sys-001/telegram-bot-api-versions/refs/heads/main/files/openapi/yaml/v183.yaml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            fallback: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;.openapi-cache/telegram.yaml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          getModuleName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;TelegramAPI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          getMethodName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">^</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold">\/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          errorMessageKey: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> config;</span></span></code></pre></div>
<p class="x:not-first:mt-[1.25em] x:leading-7">The <code class="nextra-code" dir="ltr">TelegramService</code> class handles interaction with the Telegram API and generates AI responses using the Vercel AI SDK.</p>
<div data-pagefind-ignore="all" class="nextra-code x:relative x:not-first:mt-[1.25em]"><div class="x:px-4 x:text-xs x:text-gray-700 x:dark:text-gray-200 x:bg-gray-100 x:dark:bg-neutral-900 x:flex x:items-center x:h-12 x:gap-2 x:rounded-t-md x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:border-b-0"><svg viewBox="0 0 24 24" fill="currentColor" height="1em" class="x:max-w-6 x:shrink-0"><path d="M0 2.66667V21.3333C0 22.8067 1.19333 24 2.66667 24H21.3333C22.8067 24 24 22.8067 24 21.3333V2.66667C24 1.19333 22.8067 0 21.3333 0H2.66667C1.19333 0 0 1.19333 0 2.66667ZM14.2213 12.6013H11.3973V21.3333H9.12133V12.6013H6.356V10.6667H14.2213V12.6013ZM14.664 20.8347V18.5C14.664 18.5 15.9387 19.4613 17.4693 19.4613C19 19.4613 18.94 18.4613 18.94 18.324C18.94 16.872 14.6053 16.872 14.6053 13.656C14.6053 9.28133 20.9213 11.008 20.9213 11.008L20.8427 13.0867C20.8427 13.0867 19.784 12.38 18.5867 12.38C17.3907 12.38 16.9587 12.9493 16.9587 13.5573C16.9587 15.1267 21.3333 14.9693 21.3333 18.128C21.3333 22.992 14.664 20.8347 14.664 20.8347Z"></path></svg><span class="x:truncate">src/modules/telegram/TelegramService.ts</span></div><pre class="x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-b-md not-prose" tabindex="0"><div class="x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-14"><button class="x:transition x:cursor-pointer x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:rounded-md x:p-1.5 x:md:hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="1em"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button></div><code class="nextra-code" dir="ltr"><span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> OpenAI </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;openai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { TelegramAPI } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;vovk-client&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> openai</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> OpenAI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TelegramService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> apiRoot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> TELEGRAM_BOT_TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">TELEGRAM_BOT_TOKEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">TELEGRAM_BOT_TOKEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Missing TELEGRAM_BOT_TOKEN environment variable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `https://api.telegram.org/bot${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">TELEGRAM_BOT_TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> generateAIResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    chatId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    userMessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    systemPrompt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">botResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ModelMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] }&gt; {</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // Get chat history</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> history</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getChatHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chatId);</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> messages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      ...</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">formatHistoryForVercelAI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(history),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, content: userMessage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ];</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createLLMTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      modules: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        UserController,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        TaskController,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // Generate a response using Vercel AI SDK</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> generateText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      model: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">vercelOpenAI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;gpt-5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      system: systemPrompt,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      messages,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      stopWhen: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">stepCountIs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      tools: {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fromEntries</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          tools.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">execute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            name,</span></span>
<span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">            tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">KnownAny</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">KnownAny</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              execute,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              description,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">              inputSchema: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">jsonSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(parameters </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> KnownAny</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            }),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          ]),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        ),</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> botResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> text </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> &quot;I couldn&#x27;t generate a response.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // Add user message to history</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addToHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chatId, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, userMessage);</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // Add assistant response to history</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">addToHistory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chatId, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, botResponse);</span></span>
<span> </span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    messages.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;assistant&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      content: botResponse,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { botResponse, messages };</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sendTextMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    chatId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TelegramAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sendMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      body: {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        chat_id: chatId,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        text: text,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        parse_mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      apiRoot: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.apiRoot,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sendVoiceMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    chatId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">    text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  )</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Generate speech from text using OpenAI TTS</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> speechResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> openai.audio.speech.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        model: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;tts-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        voice: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;alloy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        input: text,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        response_format: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;opus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Convert the response to a Buffer</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> voiceBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> speechResponse.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span>
<span> </span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> formData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FormData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;chat_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chatId));</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      formData.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;voice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">([voiceBuffer], { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;audio/ogg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }),</span></span>
<span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">        &quot;voice.ogg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      );</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Send the voice message</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TelegramAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sendVoice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        body: formData,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        apiRoot: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.apiRoot,</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      });</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (error) {</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">&quot;Error generating voice message:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, error);</span></span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Fallback to text message if voice generation fails</span></span>
<span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">sendTextMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(chatId, text);</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span>
<span> </span>
<span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span>
<span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre></div></main><div class="x:mt-12 x:mb-8 x:text-xs x:text-gray-600 x:text-end x:dark:text-gray-400">Last updated on<!-- --> <time dateTime="2025-10-31T20:02:24.000Z">November 1, 2025</time></div><div class="x:mb-8 x:flex x:items-center x:border-t x:pt-8 nextra-border x:print:hidden"><a title="Real-Time UI ðŸ§ª ðŸš§" class="x:focus-visible:nextra-focus x:text-gray-600 x:dark:text-gray-400 x:hover:text-gray-800 x:dark:hover:text-gray-200 x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100 x:flex x:max-w-[50%] x:items-center x:gap-1 x:py-4 x:text-base x:font-medium x:transition-colors x:[word-break:break-word] x:md:text-lg x:pe-4" href="/realtime-ui"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="20" class="x:inline x:shrink-0 x:ltr:rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg>Real-Time UI ðŸ§ª ðŸš§</a><a title="MCP Server" class="x:focus-visible:nextra-focus x:text-gray-600 x:dark:text-gray-400 x:hover:text-gray-800 x:dark:hover:text-gray-200 x:contrast-more:text-gray-700 x:contrast-more:dark:text-gray-100 x:flex x:max-w-[50%] x:items-center x:gap-1 x:py-4 x:text-base x:font-medium x:transition-colors x:[word-break:break-word] x:md:text-lg x:ps-4 x:ms-auto x:text-end" href="/mcp">MCP Server<svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" height="20" class="x:inline x:shrink-0 x:rtl:rotate-180"><path d="M9 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round"></path></svg></a></div></article></div><!--$--><!--/$--><div class="x:bg-gray-100 x:pb-[env(safe-area-inset-bottom)] x:dark:bg-neutral-900 x:print:bg-transparent"><hr class="nextra-border"/><footer class="x:mx-auto x:flex x:max-w-(--nextra-content-width) x:justify-center x:py-12 x:text-gray-600 x:dark:text-gray-400 x:md:justify-start x:pl-[max(env(safe-area-inset-left),1.5rem)] x:pr-[max(env(safe-area-inset-right),1.5rem)] justify-between"><div>MIT Â© 2023-<!-- -->2025<!-- --> <a href="https://github.com/finom" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font] ml-1">Andrey Gubanov<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></div><a href="https://github.com/sponsors/finom" target="_blank" rel="noreferrer" class="x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font] ml-2 block">Sponsor<!-- -->Â <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7" viewBox="0 0 24 24" height="1em" class="x:inline x:align-baseline x:shrink-0"><path d="M7 17L17 7"></path><path d="M7 7h10v10"></path></svg></a></footer></div><script src="/_next/static/chunks/945fab894dcb74b9.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n3:I[39756,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"default\"]\n4:I[37457,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"default\"]\n5:I[55169,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"TOCProvider\"]\n6:I[769,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"Sidebar\"]\n7:I[47486,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ClientWrapper\"]\nd:I[68027,[],\"default\"]\n:HL[\"/_next/static/chunks/978f1fab870b13d4.css\",\"style\"]\n:HL[\"/_next/static/chunks/bf1d75097829aaaf.css\",\"style\"]\n:HL[\"/_next/static/chunks/221ce6682042a4f8.css\",\"style\"]\n:HL[\"/_next/static/chunks/f581d842ac65ef6f.css\",\"style\"]\n8:T2bbc,"])</script><script>self.__next_f.push([1,"import GithubFiles from '@/components/GithubFiles';\n\nimport { PollExample } from '../../components/vovk-examples';\nimport { Suspense } from 'react';\n\n\n\nTODO: deletions need to be explicit\nTODO: Add ticker\n\n# Real-time polling (experimental)\n\nIn the [previous article](/realtime-ui), we covered how to use the OpenAPI Real-time API to deliver instant UI updates while the user interacts with the app. The LLM functions created with `createLLMTools` ran in the browser, where the AI performed HTTP requests to the server using RPC modules.\n\nOn this page, we explain how to use database polling to receive updates triggered by other users or third-party services (such as [MCP](/mcp)), keeping the UI in sync with the database. To ensure the app can be deployed to any hosting provider, we avoid non-HTTP protocols such as WebSockets and instead use HTTP polling powered by [JSONLines](/controller/jsonlines).\n\n\u003cdiv className=\"example\"\u003e\n\u003cPollExample /\u003e\n[View on examples.vovk.dev Â»](https://examples.vovk.dev/polling)\n\u003c/div\u003e\n\n## Redis DB as event bus\n\nWhile we could poll the main Postgres database for changes, that approach is inefficient. Instead, we use Redis as an event bus. Whenever the main database changes, we write a small event to Redis. Our polling service reads these events every second and relays them to clients with the app open.\n\nBecause we use [Prisma](https://www.prisma.io/) as our ORM, we rely on [Prisma Extensions](https://www.prisma.io/docs/orm/prisma-client/client-extensions) to hook into database operations and write events to Redis. This is where the `DatabaseService` mentioned in the [previous article](/realtime-ui) comes into play.\n\n\u003cGithubFiles paths={['src/modules/database/DatabaseService.ts']} repo=\"vovk-kanban-demo\" cutLines={[3, [7, 13]]} highlightLines={[19, 95]} /\u003e\n\n- The `getClient` method calls `DatabaseEventsService.beginEmitting(){:ts}` to start emitting events. `beginEmitting` runs a `setInterval` that connects to Redis and periodically checks for new events. When a new event is found, it emits it via [mitt](https://npmjs.com/package/mitt).\n- `prisma.$extends` hooks into all Prisma model operations, determines whether an operation modifies data, and if so calls `await DatabaseEventsService.createChanges([change]){:ts}` to persist a change entry in Redis. The change captures creates, updates, and deletions:\n\n```ts\nexport type DBChange = {\n  id: string;\n  entityType: EntityType;\n  date: string;\n  type: \"create\" | \"update\" | \"delete\";\n};\n```\n\nThe `date` field indicates when the change occurred.\n\n- For `create` and `update` operations, it uses the `updatedAt` DB field (Important: all write operations must set this field).\n- For `delete` operations, it uses the current time.\n\nThe `delete` operation also adds an `__isDeleted` property. The front end checks this property to hide the deleted entity by setting `enumerable: false` on the entity registry item (see the [previous article](/realtime-ui)).\n\nOperations like `find...` and `count` do not trigger changes and are passed through as-is.\n\nIn addition to `beginEmitting` and `createChanges`, `DatabaseEventsService` provides a `connect` method and an `emitter` (a `mitt` instance). These are used by the polling service (`DatabasePollService`, discussed next) to be notified about new events.\n\n\u003cGithubFiles paths={['src/modules/database/DatabaseEventsService.ts']} repo=\"vovk-kanban-demo\" /\u003e\n\n## Polling controller and service\n\nWith Redis change entries and the change emitter in place, we can implement a polling endpoint that streams updates to clients in real time. The `DatabasePollController` exposes a single [JSONLines](/controller/jsonlines) endpoint, and `DatabasePollService` uses a [JSONLinesResponse](/controller/jsonlines#jsonlinesresponse) instance (received from the controller) to send data to clients. The service closes the connection safely after 30 seconds, so clients should reconnect.\n\n\u003cGithubFiles paths={['src/modules/database/DatabasePollService.ts', 'src/modules/database/DatabasePollController.ts']} repo=\"vovk-kanban-demo\"  /\u003e\n\n- When a `delete` DB change is emitted via `DatabaseEventsService.emitter`, the service sends an event with `id`, `entityType`, and `__isDeleted: true`. The front end uses `__isDeleted` to hide the entity by making it non-enumerable in the registry.\n- When an `update` or `create` change is emitted, the service fetches the full entity from Postgres (since Redis stores only metadata) and sends it to clients.\n\n## Client-side logic\n\nOn the client side (for example, in a React component), call `DatabasePollRPC.poll()` to receive a stream of database events. As with any [JSONLines](/controller/jsonlines) RPC method, it returns an async iterable that you can consume in a `for await` loop. Because the server may close the connection or a network error may occur, wrap the logic in a retry loop and avoid reconnecting on `AbortError`. Since the [fetcher](/imports#fetcher) is already [configured](/realtime-ui#fetcher), the loop body can be emptyâ€”you do not need to handle data manually.\n\nFront-end code, besides the polling logic, also includes on/off toggle state saved to `localStorage`, so the user can enable or disable polling as needed.\n\n```tsx\nconst [isPollingEnabled, setIsPollingEnabled] = useState(false);\nconst pollingAbortControllerRef = useRef\u003cAbortController | null\u003e(null);\n\nuseEffect(() =\u003e {\n  const isEnabled = localStorage.getItem(\"isPollingEnabled\");\n  setIsPollingEnabled(isEnabled === \"true\");\n}, []);\n\nuseEffect(() =\u003e {\n  localStorage.setItem(\"isPollingEnabled\", isPollingEnabled.toString());\n  async function poll(retries = 0) {\n    if (!isPollingEnabled) {\n      pollingAbortControllerRef.current?.abort();\n      return;\n    }\n    try {\n      while (true) {\n        console.log(\"START POLLING\");\n        const iterable = await DatabasePollRPC.poll();\n        pollingAbortControllerRef.current = iterable.abortController;\n\n        for await (const iteration of iterable) {\n          console.log(\"New DB update:\", iteration);\n        }\n      }\n    } catch (error) {\n      if (\n        retries \u003c 5 \u0026\u0026\n        (error as Error \u0026 { cause?: Error }).cause?.name !== \"AbortError\"\n      ) {\n        console.error(\"Polling failed, retrying...\", error);\n        await new Promise((resolve) =\u003e setTimeout(resolve, 2000));\n        return poll(retries + 1);\n      }\n    }\n  }\n\n  void poll();\n\n  return () =\u003e {\n    pollingAbortControllerRef.current?.abort();\n  };\n}, [isPollingEnabled]);\n```\n\n## Bonus: Telegram bot (unstable)\n\nAs an example of a third-party source of database changes, see the [TelegramService](https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramService.ts) and the accompanying [TelegramController](https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramController.ts). It accepts text or voice messages, performs voice-to-text transcription if needed using the OpenAI Whisper API, and uses the same `createLLMTools` function on the server:\n\n```ts\nconst { tools } = createLLMTools({\n  modules: {\n    UserController,\n    TaskController,\n  },\n});\n```\n\nThe Telegram API library is implemented with [OpenAPI Mixins](/codegen) and used as a `TelegramAPI` module to call Telegram API methods.\n\n```ts filename=\"vovk.config.mjs\"\n// @ts-check\n/** @type {import('vovk').VovkConfig} */\nconst config = {\n  // ...\n  outputConfig: {\n    // ...\n    segments: {\n      telegram: {\n        openAPIMixin: {\n          source: {\n            url: \"https://raw.githubusercontent.com/sys-001/telegram-bot-api-versions/refs/heads/main/files/openapi/yaml/v183.yaml\",\n            fallback: \".openapi-cache/telegram.yaml\",\n          },\n          getModuleName: \"TelegramAPI\",\n          getMethodName: ({ path }) =\u003e path.replace(/^\\//, \"\"),\n          errorMessageKey: \"description\",\n        },\n      },\n    },\n  },\n};\n\nexport default config;\n```\n\nThe `TelegramService` class handles interaction with the Telegram API and generates AI responses using the Vercel AI SDK.\n\n```ts filename=\"src/modules/telegram/TelegramService.ts\"\nimport OpenAI from \"openai\";\nimport { TelegramAPI } from \"vovk-client\";\n\nconst openai = new OpenAI();\n\nexport default class TelegramService {\n  static get apiRoot() {\n    const TELEGRAM_BOT_TOKEN = process.env.TELEGRAM_BOT_TOKEN;\n    if (!TELEGRAM_BOT_TOKEN) {\n      throw new Error(\"Missing TELEGRAM_BOT_TOKEN environment variable\");\n    }\n    return `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}`;\n  }\n\n  // ...\n\n  private static async generateAIResponse(\n    chatId: number,\n    userMessage: string,\n    systemPrompt: string,\n  ): Promise\u003c{ botResponse: string; messages: ModelMessage[] }\u003e {\n    // Get chat history\n    const history = await this.getChatHistory(chatId);\n    const messages = [\n      ...this.formatHistoryForVercelAI(history),\n      { role: \"user\", content: userMessage } as const,\n    ];\n    const { tools } = createLLMTools({\n      modules: {\n        UserController,\n        TaskController,\n      },\n    });\n  \n    // Generate a response using Vercel AI SDK\n    const { text } = await generateText({\n      model: vercelOpenAI(\"gpt-5\"),\n      system: systemPrompt,\n      messages,\n      stopWhen: stepCountIs(16),\n      tools: {\n        ...Object.fromEntries(\n          tools.map(({ name, execute, description, parameters }) =\u003e [\n            name,\n            tool\u003cKnownAny, KnownAny\u003e({\n              execute,\n              description,\n              inputSchema: jsonSchema(parameters as KnownAny),\n            }),\n          ]),\n        ),\n      },\n    });\n\n    const botResponse = text || \"I couldn't generate a response.\";\n\n    // Add user message to history\n    await this.addToHistory(chatId, \"user\", userMessage);\n    // Add assistant response to history\n    await this.addToHistory(chatId, \"assistant\", botResponse);\n\n    messages.push({\n      role: \"assistant\",\n      content: botResponse,\n    });\n\n    return { botResponse, messages };\n  }\n\n  private static async sendTextMessage(\n    chatId: number,\n    text: string,\n  ): Promise\u003cvoid\u003e {\n    await TelegramAPI.sendMessage({\n      body: {\n        chat_id: chatId,\n        text: text,\n        parse_mode: \"html\",\n      },\n      apiRoot: this.apiRoot,\n    });\n  }\n\n  private static async sendVoiceMessage(\n    chatId: number,\n    text: string,\n  ): Promise\u003cvoid\u003e {\n    try {\n      // Generate speech from text using OpenAI TTS\n      const speechResponse = await openai.audio.speech.create({\n        model: \"tts-1\",\n        voice: \"alloy\",\n        input: text,\n        response_format: \"opus\",\n      });\n\n      // Convert the response to a Buffer\n      const voiceBuffer = Buffer.from(await speechResponse.arrayBuffer());\n\n      const formData = new FormData();\n      formData.append(\"chat_id\", String(chatId));\n      formData.append(\n        \"voice\",\n        new Blob([voiceBuffer], { type: \"audio/ogg\" }),\n        \"voice.ogg\",\n      );\n\n      // Send the voice message\n      await TelegramAPI.sendVoice({\n        body: formData,\n        apiRoot: this.apiRoot,\n      });\n    } catch (error) {\n      console.error(\"Error generating voice message:\", error);\n      // Fallback to text message if voice generation fails\n      await this.sendTextMessage(chatId, text);\n    }\n  }\n\n  // ...\n}\n```"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"5-Kg3rR-tv22RHAmxuizU\",\"c\":[\"\",\"polling\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"polling\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/978f1fab870b13d4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/bf1d75097829aaaf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/221ce6682042a4f8.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/f581d842ac65ef6f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/2f545f6d145a6a33.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-1\",{\"src\":\"/_next/static/chunks/f663ddeedb906bce.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-2\",{\"src\":\"/_next/static/chunks/b42e1f87491709ea.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-3\",{\"src\":\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-4\",{\"src\":\"/_next/static/chunks/442cfc44547bfe65.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-5\",{\"src\":\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-6\",{\"src\":\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"async\":true,\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-7\",{\"src\":\"/_next/static/chunks/7a896a6378983d41.js\",\"async\":true,\"nonce\":\"$undefined\"}]],\"$L2\"]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"div\",null,{\"className\":\"x:mx-auto x:flex x:max-w-(--nextra-content-width)\",\"children\":[\"$\",\"$L5\",null,{\"value\":[{\"value\":\"Redis DB as event bus\",\"id\":\"redis-db-as-event-bus\",\"depth\":2},{\"value\":\"Polling controller and service\",\"id\":\"polling-controller-and-service\",\"depth\":2},{\"value\":\"Client-side logic\",\"id\":\"client-side-logic\",\"depth\":2},{\"value\":\"Bonus: Telegram bot (unstable)\",\"id\":\"bonus-telegram-bot-unstable\",\"depth\":2}],\"children\":[[\"$\",\"$L6\",null,{}],[\"$\",\"$L7\",null,{\"metadata\":{\"title\":\"Real-time polling (experimental)\",\"filePath\":\"src/app/polling/page.mdx\",\"timestamp\":1761940944000},\"bottomContent\":\"$undefined\",\"sourceCode\":\"$8\",\"children\":[\"$L9\",\"$La\"]}]]}]}],null,\"$Lb\"]}],{},null,false,false]},null,false,false]},null,false,false],\"$Lc\",false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:I[22016,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"\"]\nf:I[318,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"PollExample\"]\n10:I[63894,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"HeadingAnchor\"]\n2e:I[97367,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"OutletBoundary\"]\n2f:\"$Sreact.suspense\"\n31:I[97367,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"ViewportBoundary\"]\n33:I[97367,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"MetadataBoundary\"]\n9:[\"$\",\"div\",null,{\"id\":\"nextra-skip-nav\"}]\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"main\",null,{\"data-pagefind-body\":true,\"children\":[[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":\"TODO: deletions need to be explicit\\nTODO: Add ticker\"}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"$undefined\",\"className\":\"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-bold x:mt-2 x:text-4xl\",\"children\":[\"Real-time polling (experimental)\",\"$undefined\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"In the \",[\"$\",\"$Le\",null,{\"href\":\"/realtime-ui\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"previous article\"}],\", we covered how to use the OpenAPI Real-time API to deliver instant UI updates while the user interacts with the app. The LLM functions created with \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"createLLMTools\"}],\" ran in the browser, where the AI performed HTTP requests to the server using RPC modules.\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"On this page, we explain how to use database polling to receive updates triggered by other users or third-party services (such as \",[\"$\",\"$Le\",null,{\"href\":\"/mcp\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"MCP\"}],\"), keeping the UI in sync with the database. To ensure the app can be deployed to any hosting provider, we avoid non-HTTP protocols such as WebSockets and instead use HTTP polling powered by \",[\"$\",\"$Le\",null,{\"href\":\"/controller/jsonlines\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"JSONLines\"}],\".\"]}],\"\\n\",[\"$\",\"div\",null,{\"className\":\"example\",\"children\":[[\"$\",\"$Lf\",null,{}],[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"$\",\"a\",null,{\"href\":\"https://examples.vovk.dev/polling\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"View on examples.vovk.dev Â»\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"redis-db-as-event-bus\",\"className\":\"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border\",\"children\":[\"Redis DB as event bus\",[\"$\",\"$L10\",null,{\"id\":\"redis-db-as-event-bus\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":\"While we could poll the main Postgres database for changes, that approach is inefficient. Instead, we use Redis as an event bus. Whenever the main database changes, we write a small event to Redis. Our polling service reads these events every second and relays them to clients with the app open.\"}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"Because we use \",[\"$\",\"a\",null,{\"href\":\"https://www.prisma.io/\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"Prisma\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[\"$L11\",\"$L12\"]}]]]}],\" as our ORM, we rely on \",\"$L13\",\" to hook into database operations and write events to Redis. This is where the \",\"$L14\",\" mentioned in the \",\"$L15\",\" comes into play.\"]}],\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\"]}]\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$L2e\",null,{\"children\":[\"$\",\"$2f\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@30\"}]}]\nc:[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L31\",null,{\"children\":\"$@32\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$L33\",null,{\"children\":[\"$\",\"$2f\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@34\"}]}]}],null]}]\n"])</script><script>self.__next_f.push([1,"35:I[83987,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ToggleWordWrapButton\"]\n11:[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}]\n12:[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]\n13:[\"$\",\"a\",null,{\"href\":\"https://www.prisma.io/docs/orm/prisma-client/client-extensions\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"Prisma Extensions\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}]\n14:[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabaseService\"}]\n15:[\"$\",\"$Le\",null,{\"href\":\"/realtime-ui\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"previous article\"}]\n"])</script><script>self.__next_f.push([1,"17:[\"$\",\"ul\",null,{\"className\":\"x:[:is(ol,ul)_\u0026]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[\"The \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"getClient\"}],\" method calls \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"DatabaseEventsService.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"()\"}]]}]}],\" to start emitting events. \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"beginEmitting\"}],\" runs a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"setInterval\"}],\" that connects to Redis and periodically checks for new events. When a new event is found, it emits it via \",[\"$\",\"a\",null,{\"href\":\"https://npmjs.com/package/mitt\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"mitt\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"prisma.$extends\"}],\" hooks into all Prisma model operations, determines whether an operation modifies data, and if so calls \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" DatabaseEventsService.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"createChanges\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"([change])\"}]]}]}],\" to persist a change entry in Redis. The change captures creates, updates, and deletions:\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"18:[\"$\",\"div\",null,{\"data-pagefind-ignore\":\"all\",\"className\":\"nextra-code x:relative x:not-first:mt-[1.25em]\",\"children\":[\"$undefined\",[\"$\",\"pre\",null,{\"className\":\"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose\",\"tabIndex\":\"0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2\",\"children\":[[\"$\",\"$L35\",null,{\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"children\":[\"$\",\"path\",null,{\"d\":\"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z\"}]}]}],false]}],[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" type\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" DBChange\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"  id\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"  entityType\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" EntityType\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"  date\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"  type\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"create\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" |\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"update\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" |\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"delete\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"};\"}]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"19:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"The \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"date\"}],\" field indicates when the change occurred.\"]}]\n1a:[\"$\",\"ul\",null,{\"className\":\"x:[:is(ol,ul)_\u0026]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[\"For \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"create\"}],\" and \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"update\"}],\" operations, it uses the \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"updatedAt\"}],\" DB field (Important: all write operations must set this field).\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[\"For \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"delete\"}],\" operations, it uses the current time.\"]}],\"\\n\"]}]\n1b:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"The \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"delete\"}],\" operation also adds an \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"__isDeleted\"}],\" property. The front end checks this property to hide the deleted entity by setting \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"enumerable: false\"}],\" on the entity registry item (see the \",[\"$\",\"$Le\",null,{\"href\":\"/realtime-ui\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"previous article\"}],\").\"]}]\n1c:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"Operations like \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"find...\"}],\" and \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"count\"}],\" do not trigger changes and are passed through as-is.\"]}]\n1d:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"In addition to \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"beginEmitting\"}],\" and \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"createChanges\"}],\", \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabaseEventsService\"}],\" provides a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"connect\"}],\" method and an \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"emitter\"}],\" (a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"mitt\"}],\" instance). These are used by the polling service (\",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabasePollService\"}],\", discussed next) to be notified about new events.\"]}]\n1f:[\"$\",\"h2\",null,{\"id\":\"polling-controller-and-service\",\"className\":\"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border\",\"children\":[\"Polling controller and service\",[\"$\",\"$L10\",null,{\"id\":\"polling-controller-and-service\"}]]}]\n20:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"With Redis change entries and the change emitter in place, we can implement a polling endpoint that streams updates to clients in real time. The \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabasePollController\"}],\" exposes a single \",[\"$\",\"$Le\",null,{\"href\":\"/controller/jsonlines\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"JSONLines\"}],\" endpoint, and \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabasePollService\"}],\" uses a \",[\"$\",\"$Le\",null,{\"href\":\"/controller/jsonlines#jsonlinesresponse\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:de"])</script><script>self.__next_f.push([1,"coration-from-font x:[text-underline-position:from-font]\",\"children\":\"JSONLinesResponse\"}],\" instance (received from the controller) to send data to clients. The service closes the connection safely after 30 seconds, so clients should reconnect.\"]}]\n22:[\"$\",\"ul\",null,{\"className\":\"x:[:is(ol,ul)_\u0026]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[\"When a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"delete\"}],\" DB change is emitted via \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabaseEventsService.emitter\"}],\", the service sends an event with \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"id\"}],\", \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"entityType\"}],\", and \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"__isDeleted: true\"}],\". The front end uses \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"__isDeleted\"}],\" to hide the entity by making it non-enumerable in the registry.\"]}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"x:my-[.5em]\",\"children\":[\"When an \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"update\"}],\" or \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"create\"}],\" change is emitted, the service fetches the full entity from Postgres (since Redis stores only metadata) and sends it to clients.\"]}],\"\\n\"]}]\n23:[\"$\",\"h2\",null,{\"id\":\"client-side-logic\",\"className\":\"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border\",\"children\":[\"Client-side logic\",[\"$\",\"$L10\",null,{\"id\":\"client-side-logic\"}]]}]\n"])</script><script>self.__next_f.push([1,"24:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"On the client side (for example, in a React component), call \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"DatabasePollRPC.poll()\"}],\" to receive a stream of database events. As with any \",[\"$\",\"$Le\",null,{\"href\":\"/controller/jsonlines\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"JSONLines\"}],\" RPC method, it returns an async iterable that you can consume in a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"for await\"}],\" loop. Because the server may close the connection or a network error may occur, wrap the logic in a retry loop and avoid reconnecting on \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"AbortError\"}],\". Since the \",[\"$\",\"$Le\",null,{\"href\":\"/imports#fetcher\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"fetcher\"}],\" is already \",[\"$\",\"$Le\",null,{\"href\":\"/realtime-ui#fetcher\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"configured\"}],\", the loop body can be emptyâ€”you do not need to handle data manually.\"]}]\n"])</script><script>self.__next_f.push([1,"25:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"Front-end code, besides the polling logic, also includes on/off toggle state saved to \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"localStorage\"}],\", so the user can enable or disable polling as needed.\"]}]\n"])</script><script>self.__next_f.push([1,"26:[\"$\",\"div\",null,{\"data-pagefind-ignore\":\"all\",\"className\":\"nextra-code x:relative x:not-first:mt-[1.25em]\",\"children\":[\"$undefined\",[\"$\",\"pre\",null,{\"className\":\"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose\",\"tabIndex\":\"0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2\",\"children\":[[\"$\",\"$L35\",null,{\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"children\":[\"$\",\"path\",null,{\"d\":\"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z\"}]}]}],false]}],[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"isPollingEnabled\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"setIsPollingEnabled\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"] \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" useState\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"false\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" pollingAbortControllerRef\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" useRef\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"AbortController\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" |\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" null\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003e(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"null\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"useEffect\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" isEnabled\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" localStorage.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"getItem\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"isPollingEnabled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}],\"\\n\",\"$L36\",\"\\n\",\"$L37\",\"\\n\",\"$L38\",\"\\n\",\"$L39\",\"\\n\",\"$L3a\",\"\\n\",\"$L3b\",\"\\n\",\"$L3c\",\"\\n\",\"$L3d\",\"\\n\",\"$L3e\",\"\\n\",\"$L3f\",\"\\n\",\"$L40\",\"\\n\",\"$L41\",\"\\n\",\"$L42\",\"\\n\",\"$L43\",\"\\n\",\"$L44\",\"\\n\",\"$L45\",\"\\n\",\"$L46\",\"\\n\",\"$L47\",\"\\n\",\"$L48\",\"\\n\",\"$L49\",\"\\n\",\"$L4a\",\"\\n\",\"$L4b\",\"\\n\",\"$L4c\",\"\\n\",\"$L4d\",\"\\n\",\"$L4e\",\"\\n\",\"$L4f\",\"\\n\",\"$L50\",\"\\n\",\"$L51\",\"\\n\",\"$L52\",\"\\n\",\"$L53\",\"\\n\",\"$L54\",\"\\n\",\"$L55\",\"\\n\",\"$L56\",\"\\n\",\"$L57\",\"\\n\",\"$L58\",\"\\n\",\"$L59\",\"\\n\",\"$L5a\",\"\\n\",\"$L5b\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"27:[\"$\",\"h2\",null,{\"id\":\"bonus-telegram-bot-unstable\",\"className\":\"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border\",\"children\":[\"Bonus: Telegram bot (unstable)\",[\"$\",\"$L10\",null,{\"id\":\"bonus-telegram-bot-unstable\"}]]}]\n"])</script><script>self.__next_f.push([1,"28:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"As an example of a third-party source of database changes, see the \",[\"$\",\"a\",null,{\"href\":\"https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramService.ts\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"TelegramService\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}],\" and the accompanying \",[\"$\",\"a\",null,{\"href\":\"https://github.com/vovk-kanban-demo/src/modules/telegram/TelegramController.ts\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"TelegramController\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}],\". It accepts text or voice messages, performs voice-to-text transcription if needed using the OpenAI Whisper API, and uses the same \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"createLLMTools\"}],\" function on the server:\"]}]\n"])</script><script>self.__next_f.push([1,"29:[\"$\",\"div\",null,{\"data-pagefind-ignore\":\"all\",\"className\":\"nextra-code x:relative x:not-first:mt-[1.25em]\",\"children\":[\"$undefined\",[\"$\",\"pre\",null,{\"className\":\"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-md not-prose\",\"tabIndex\":\"0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-2\",\"children\":[[\"$\",\"$L35\",null,{\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"children\":[\"$\",\"path\",null,{\"d\":\"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z\"}]}]}],false]}],[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" createLLMTools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  modules: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    UserController,\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    TaskController,\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  },\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"});\"}]}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"2a:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"The Telegram API library is implemented with \",[\"$\",\"$Le\",null,{\"href\":\"/codegen\",\"prefetch\":\"$undefined\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":\"OpenAPI Mixins\"}],\" and used as a \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"TelegramAPI\"}],\" module to call Telegram API methods.\"]}]\n"])</script><script>self.__next_f.push([1,"2b:[\"$\",\"div\",null,{\"data-pagefind-ignore\":\"all\",\"className\":\"nextra-code x:relative x:not-first:mt-[1.25em]\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:px-4 x:text-xs x:text-gray-700 x:dark:text-gray-200 x:bg-gray-100 x:dark:bg-neutral-900 x:flex x:items-center x:h-12 x:gap-2 x:rounded-t-md x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:border-b-0\",\"children\":[[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"className\":\"x:max-w-6 x:shrink-0\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 2.66667V21.3333C0 22.8067 1.19333 24 2.66667 24H21.3333C22.8067 24 24 22.8067 24 21.3333V2.66667C24 1.19333 22.8067 0 21.3333 0H2.66667C1.19333 0 0 1.19333 0 2.66667ZM14.2213 12.6013H11.3973V21.3333H9.12133V12.6013H6.356V10.6667H14.2213V12.6013ZM14.664 20.8347V18.5C14.664 18.5 15.9387 19.4613 17.4693 19.4613C19 19.4613 18.94 18.4613 18.94 18.324C18.94 16.872 14.6053 16.872 14.6053 13.656C14.6053 9.28133 20.9213 11.008 20.9213 11.008L20.8427 13.0867C20.8427 13.0867 19.784 12.38 18.5867 12.38C17.3907 12.38 16.9587 12.9493 16.9587 13.5573C16.9587 15.1267 21.3333 14.9693 21.3333 18.128C21.3333 22.992 14.664 20.8347 14.664 20.8347Z\"}]}],[\"$\",\"span\",null,{\"className\":\"x:truncate\",\"children\":\"vovk.config.mjs\"}],false]}],[\"$\",\"pre\",null,{\"className\":\"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-b-md not-prose\",\"tabIndex\":\"0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-14\",\"children\":[[\"$\",\"$L35\",null,{\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"children\":[\"$\",\"path\",null,{\"d\":\"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z\"}]}]}],false]}],[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"// @ts-check\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"/** \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"@type\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" {import('vovk').VovkConfig}\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\" */\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" config\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"  // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  outputConfig: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"    // ...\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    segments: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      telegram: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        openAPIMixin: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          source: {\"}]}],\"\\n\",\"$L5c\",\"\\n\",\"$L5d\",\"\\n\",\"$L5e\",\"\\n\",\"$L5f\",\"\\n\",\"$L60\",\"\\n\",\"$L61\",\"\\n\",\"$L62\",\"\\n\",\"$L63\",\"\\n\",\"$L64\",\"\\n\",\"$L65\",\"\\n\",\"$L66\",\"\\n\",\"$L67\",\"\\n\",\"$L68\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"2c:[\"$\",\"p\",null,{\"className\":\"x:not-first:mt-[1.25em] x:leading-7\",\"children\":[\"The \",[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":\"TelegramService\"}],\" class handles interaction with the Telegram API and generates AI responses using the Vercel AI SDK.\"]}]\n"])</script><script>self.__next_f.push([1,"2d:[\"$\",\"div\",null,{\"data-pagefind-ignore\":\"all\",\"className\":\"nextra-code x:relative x:not-first:mt-[1.25em]\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:px-4 x:text-xs x:text-gray-700 x:dark:text-gray-200 x:bg-gray-100 x:dark:bg-neutral-900 x:flex x:items-center x:h-12 x:gap-2 x:rounded-t-md x:border x:border-gray-300 x:dark:border-neutral-700 x:contrast-more:border-gray-900 x:contrast-more:dark:border-gray-50 x:border-b-0\",\"children\":[[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"className\":\"x:max-w-6 x:shrink-0\",\"children\":[\"$\",\"path\",null,{\"d\":\"M0 2.66667V21.3333C0 22.8067 1.19333 24 2.66667 24H21.3333C22.8067 24 24 22.8067 24 21.3333V2.66667C24 1.19333 22.8067 0 21.3333 0H2.66667C1.19333 0 0 1.19333 0 2.66667ZM14.2213 12.6013H11.3973V21.3333H9.12133V12.6013H6.356V10.6667H14.2213V12.6013ZM14.664 20.8347V18.5C14.664 18.5 15.9387 19.4613 17.4693 19.4613C19 19.4613 18.94 18.4613 18.94 18.324C18.94 16.872 14.6053 16.872 14.6053 13.656C14.6053 9.28133 20.9213 11.008 20.9213 11.008L20.8427 13.0867C20.8427 13.0867 19.784 12.38 18.5867 12.38C17.3907 12.38 16.9587 12.9493 16.9587 13.5573C16.9587 15.1267 21.3333 14.9693 21.3333 18.128C21.3333 22.992 14.664 20.8347 14.664 20.8347Z\"}]}],[\"$\",\"span\",null,{\"className\":\"x:truncate\",\"children\":\"src/modules/telegram/TelegramService.ts\"}],false]}],[\"$\",\"pre\",null,{\"className\":\"x:group x:focus-visible:nextra-focus x:overflow-x-auto x:subpixel-antialiased x:text-[.9em] x:bg-white x:dark:bg-black x:py-4 x:ring-1 x:ring-inset x:ring-gray-300 x:dark:ring-neutral-700 x:contrast-more:ring-gray-900 x:contrast-more:dark:ring-gray-50 x:contrast-more:contrast-150 x:rounded-b-md not-prose\",\"tabIndex\":\"0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x:group-hover:opacity-100 x:group-focus:opacity-100 x:opacity-0 x:transition x:focus-within:opacity-100 x:flex x:gap-1 x:absolute x:right-4 x:top-14\",\"children\":[[\"$\",\"$L35\",null,{\"children\":[\"$\",\"svg\",null,{\"viewBox\":\"0 0 24 24\",\"fill\":\"currentColor\",\"height\":\"1em\",\"children\":[\"$\",\"path\",null,{\"d\":\"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z\"}]}]}],false]}],[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"dir\":\"ltr\",\"children\":[[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" OpenAI \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"openai\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { TelegramAPI } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"vovk-client\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" openai\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" OpenAI\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"export\"}],\"$L69\",\"$L6a\",\"$L6b\",\"$L6c\"]}],\"\\n\",\"$L6d\",\"\\n\",\"$L6e\",\"\\n\",\"$L6f\",\"\\n\",\"$L70\",\"\\n\",\"$L71\",\"\\n\",\"$L72\",\"\\n\",\"$L73\",\"\\n\",\"$L74\",\"\\n\",\"$L75\",\"\\n\",\"$L76\",\"\\n\",\"$L77\",\"\\n\",\"$L78\",\"\\n\",\"$L79\",\"\\n\",\"$L7a\",\"\\n\",\"$L7b\",\"\\n\",\"$L7c\",\"\\n\",\"$L7d\",\"\\n\",\"$L7e\",\"\\n\",\"$L7f\",\"\\n\",\"$L80\",\"\\n\",\"$L81\",\"\\n\",\"$L82\",\"\\n\",\"$L83\",\"\\n\",\"$L84\",\"\\n\",\"$L85\",\"\\n\",\"$L86\",\"\\n\",\"$L87\",\"\\n\",\"$L88\",\"\\n\",\"$L89\",\"\\n\",\"$L8a\",\"\\n\",\"$L8b\",\"\\n\",\"$L8c\",\"\\n\",\"$L8d\",\"\\n\",\"$L8e\",\"\\n\",\"$L8f\",\"\\n\",\"$L90\",\"\\n\",\"$L91\",\"\\n\",\"$L92\",\"\\n\",\"$L93\",\"\\n\",\"$L94\",\"\\n\",\"$L95\",\"\\n\",\"$L96\",\"\\n\",\"$L97\",\"\\n\",\"$L98\",\"\\n\",\"$L99\",\"\\n\",\"$L9a\",\"\\n\",\"$L9b\",\"\\n\",\"$L9c\",\"\\n\",\"$L9d\",\"\\n\",\"$L9e\",\"\\n\",\"$L9f\",\"\\n\",\"$La0\",\"\\n\",\"$La1\",\"\\n\",\"$La2\",\"\\n\",\"$La3\",\"\\n\",\"$La4\",\"\\n\",\"$La5\",\"\\n\",\"$La6\",\"\\n\",\"$La7\",\"\\n\",\"$La8\",\"\\n\",\"$La9\",\"\\n\",\"$Laa\",\"\\n\",\"$Lab\",\"\\n\",\"$Lac\",\"\\n\",\"$Lad\",\"\\n\",\"$Lae\",\"\\n\",\"$Laf\",\"\\n\",\"$Lb0\",\"\\n\",\"$Lb1\",\"\\n\",\"$Lb2\",\"\\n\",\"$Lb3\",\"\\n\",\"$Lb4\",\"\\n\",\"$Lb5\",\"\\n\",\"$Lb6\",\"\\n\",\"$Lb7\",\"\\n\",\"$Lb8\",\"\\n\",\"$Lb9\",\"\\n\",\"$Lba\",\"\\n\",\"$Lbb\",\"\\n\",\"$Lbc\",\"\\n\",\"$Lbd\",\"\\n\",\"$Lbe\",\"\\n\",\"$Lbf\",\"\\n\",\"$Lc0\",\"\\n\",\"$Lc1\",\"\\n\",\"$Lc2\",\"\\n\",\"$Lc3\",\"\\n\",\"$Lc4\",\"\\n\",\"$Lc5\",\"\\n\",\"$Lc6\",\"\\n\",\"$Lc7\",\"\\n\",\"$Lc8\",\"\\n\",\"$Lc9\",\"\\n\",\"$Lca\",\"\\n\",\"$Lcb\",\"\\n\",\"$Lcc\",\"\\n\",\"$Lcd\",\"\\n\",\"$Lce\",\"\\n\",\"$Lcf\",\"\\n\",\"$Ld0\",\"\\n\",\"$Ld1\",\"\\n\",\"$Ld2\",\"\\n\",\"$Ld3\",\"\\n\",\"$Ld4\",\"\\n\",\"$Ld5\",\"\\n\",\"$Ld6\",\"\\n\",\"$Ld7\",\"\\n\",\"$Ld8\",\"\\n\",\"$Ld9\",\"\\n\",\"$Lda\",\"\\n\",\"$Ldb\",\"\\n\",\"$Ldc\",\"\\n\",\"$Ldd\",\"\\n\",\"$Lde\",\"\\n\",\"$Ldf\"]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"36:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"  setIsPollingEnabled\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(isEnabled \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"===\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"true\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}]\n37:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"}, []);\"}]}]\n38:[\"$\",\"span\",null,{\"children\":\" \"}]\n39:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"useEffect\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(() \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\n3a:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  localStorage.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"setItem\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"isPollingEnabled\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", isPollingEnabled.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"toString\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"());\"}]]}]\n3b:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" function\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" poll\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"retries\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" 0\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\") {\"}]]}]\n3c:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"!\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"isPollingEnabled) {\"}]]}]\n3d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      pollingAbortControllerRef.current?.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"abort\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}]\n3e:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}]\n3f:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\n40:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    try\"}],[\"$"])</script><script>self.__next_f.push([1,"\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\n41:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      while\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"true\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\") {\"}]]}]\n42:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        console.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"log\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"START POLLING\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}]\n43:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" iterable\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" DatabasePollRPC.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"poll\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}]\n44:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        pollingAbortControllerRef.current \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" iterable.abortController;\"}]]}]\n45:[\"$\",\"span\",null,{\"children\":\" \"}]\n46:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        for\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" iteration\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" of\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" iterable) {\"}]]}]\n47:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          console.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"log\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"New DB update:\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", iteration);\"}]]}]\n48:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        }\"}]}]\n49:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      }\"}]}]\n4a:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"catch\"}],[\"$\",\"sp"])</script><script>self.__next_f.push([1,"an\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (error) {\"}]]}]\n4b:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (\"}]]}]\n4c:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        retries \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" 5\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" \u0026\u0026\"}]]}]\n4d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        (error \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" \u0026\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"cause\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"?:\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" }).cause?.name \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"!==\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"AbortError\\\"\"}]]}]\n4e:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      ) {\"}]}]\n4f:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        console.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"Polling failed, retrying...\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", error);\"}]]}]\n50:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"resolve\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" setTimeout\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(resolve, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"2000\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"));\"}]]}]\n51:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" poll\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark"])</script><script>self.__next_f.push([1,"\":\"#E1E4E8\"},\"children\":\"(retries \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"+\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" 1\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}]\n52:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      }\"}]}]\n53:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\n54:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  }\"}]}]\n55:[\"$\",\"span\",null,{\"children\":\" \"}]\n56:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  void\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" poll\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}]\n57:[\"$\",\"span\",null,{\"children\":\" \"}]\n58:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" () \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\n59:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    pollingAbortControllerRef.current?.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"abort\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}]\n5a:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  };\"}]}]\n5b:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"}, [isPollingEnabled]);\"}]}]\n5c:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            url: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"https://raw.githubusercontent.com/sys-001/telegram-bot-api-versions/refs/heads/main/files/openapi/yaml/v183.yaml\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n5d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            fallback: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\".openapi-cache/telegram.yaml\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n5e:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          },\"}]}]\n5f:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          getModuleName: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"TelegramAPI\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n"])</script><script>self.__next_f.push([1,"60:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"          getMethodName\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\": ({ \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"path\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" }) \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" path.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"replace\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"/\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"^\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#22863A\",\"--shiki-light-font-weight\":\"bold\",\"--shiki-dark\":\"#85E89D\",\"--shiki-dark-font-weight\":\"bold\"},\"children\":\"\\\\/\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"/\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"),\"}]]}]\n"])</script><script>self.__next_f.push([1,"61:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          errorMessageKey: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"description\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n62:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        },\"}]}]\n63:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      },\"}]}]\n64:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    },\"}]}]\n65:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  },\"}]}]\n66:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"};\"}]}]\n67:[\"$\",\"span\",null,{\"children\":\" \"}]\n68:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" default\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" config;\"}]]}]\n69:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" default\"}]\n6a:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" class\"}]\n6b:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" TelegramService\"}]\n6c:[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]\n6d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  static\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" get\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" apiRoot\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"() {\"}]]}]\n6e:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" TELEGRAM_BOT_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" process.env.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"TELEGRAM_BOT_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}]\n6f:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    if\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"!\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"TELEGRAM_BOT_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\") {\"}]]}]\n70:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      throw\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Error\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"Missing TELEGRAM_BOT_TOKEN environment variable\\\"\"}],[\"$\",\"span\",null,{\"sty"])</script><script>self.__next_f.push([1,"le\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\");\"}]]}]\n71:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\n72:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" `https://api.telegram.org/bot${\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"TELEGRAM_BOT_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"}`\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}]\n73:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  }\"}]}]\n74:[\"$\",\"span\",null,{\"children\":\" \"}]\n75:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"  // ...\"}]}]\n76:[\"$\",\"span\",null,{\"children\":\" \"}]\n77:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  private\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" static\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" generateAIResponse\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}]]}]\n78:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    chatId\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" number\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n79:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    userMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n7a:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    systemPrompt\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n7b:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  )\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003c{ \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"botResponse\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"; \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"messages\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":"])</script><script>self.__next_f.push([1,"\"#B392F0\"},\"children\":\" ModelMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"[] }\u003e {\"}]]}]\n7c:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"    // Get chat history\"}]}]\n7d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" history\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"getChatHistory\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(chatId);\"}]]}]\n7e:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" messages\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [\"}]]}]\n7f:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      ...\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"formatHistoryForVercelAI\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(history),\"}]]}]\n80:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      { role: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", content: userMessage } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\n81:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    ];\"}]}]\n82:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"tools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" createLLMTools\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\n83:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      modules: {\"}]}]\n84:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        UserController,\"}]}]\n85:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"childre"])</script><script>self.__next_f.push([1,"n\":\"        TaskController,\"}]}]\n86:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      },\"}]}]\n87:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    });\"}]}]\n88:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  \"}]}]\n89:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"    // Generate a response using Vercel AI SDK\"}]}]\n8a:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" generateText\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\n8b:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"vercelOpenAI\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"gpt-5\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"),\"}]]}]\n8c:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      system: systemPrompt,\"}]}]\n8d:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      messages,\"}]}]\n8e:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      stopWhen: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"stepCountIs\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"16\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"),\"}]]}]\n8f:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      tools: {\"}]}]\n90:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        ...\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"Object.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"fromEntries\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}]]}]\n91:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          tools.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"map\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(({ \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"name\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"execute\"}],[\"$\",\"span\",null,{\"style\":{\""])</script><script>self.__next_f.push([1,"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"description\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"parameters\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" }) \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" [\"}]]}]\n92:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            name,\"}]}]\n93:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"            tool\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"KnownAny\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"KnownAny\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003e({\"}]]}]\n94:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"              execute,\"}]}]\n95:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"              description,\"}]}]\n96:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"              inputSchema: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"jsonSchema\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(parameters \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"as\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" KnownAny\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"),\"}]]}]\n97:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"            }),\"}]}]\n98:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"          ]),\"}]}]\n99:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        ),\"}]}]\n9a:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      },\"}]}]\n9b:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    });\"}]}]\n9c:[\"$\",\"span\",null,{\"children\":\" \"}]\n9d:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" botResponse\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" text \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"||\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\" \\\"I couldn't generate a response.\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\";\"}]]}]\n9e:[\"$\",\"span\",null,{\"children\":\" \"}]\n9f:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"chil"])</script><script>self.__next_f.push([1,"dren\":\"    // Add user message to history\"}]}]\na0:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"addToHistory\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(chatId, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", userMessage);\"}]]}]\na1:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"    // Add assistant response to history\"}]}]\na2:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"addToHistory\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(chatId, \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"assistant\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", botResponse);\"}]]}]\na3:[\"$\",\"span\",null,{\"children\":\" \"}]\na4:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    messages.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"push\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\na5:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      role: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"assistant\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\na6:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      content: botResponse,\"}]}]\na7:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    });\"}]}]\na8:[\"$\",\"span\",null,{\"children\":\" \"}]\na9:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    return\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" { botResponse, messages };\"}]]}]\naa:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  }\"}]}]\nab:[\"$\",\"span\",null,{\"children\":\" \"}]\nac:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  private\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" static\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" sendTextMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}]]}]\nad:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    chatId\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"chi"])</script><script>self.__next_f.push([1,"ldren\":\" number\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nae:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\naf:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  )\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"void\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003e {\"}]]}]\nb0:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" TelegramAPI.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"sendMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\nb1:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      body: {\"}]}]\nb2:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        chat_id: chatId,\"}]}]\nb3:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        text: text,\"}]}]\nb4:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        parse_mode: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"html\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nb5:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      },\"}]}]\nb6:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      apiRoot: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".apiRoot,\"}]]}]\nb7:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    });\"}]}]\nb8:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  }\"}]}]\nb9:[\"$\",\"span\",null,{\"children\":\" \"}]\nba:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"  private\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" static\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" async\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" sendVoiceMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}]]}]\nbb:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    chatId\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" number"])</script><script>self.__next_f.push([1,"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nbc:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#E36209\",\"--shiki-dark\":\"#FFAB70\"},\"children\":\"    text\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" string\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nbd:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  )\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Promise\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"void\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"\u003e {\"}]]}]\nbe:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"    try\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" {\"}]]}]\nbf:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"      // Generate speech from text using OpenAI TTS\"}]}]\nc0:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" speechResponse\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" openai.audio.speech.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"create\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\nc1:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        model: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"tts-1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nc2:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        voice: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"alloy\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nc3:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        input: text,\"}]}]\nc4:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        response_format: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"opus\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nc5:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      });\"}]}]\nc6:[\"$\",\"span\",null,{\"children\":\" \"}]\nc7:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"      // Convert the response to a Buffer\"}]}]\nc8:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8"])</script><script>self.__next_f.push([1,"FF\"},\"children\":\" voiceBuffer\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" Buffer.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" speechResponse.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"arrayBuffer\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"());\"}]]}]\nc9:[\"$\",\"span\",null,{\"children\":\" \"}]\nca:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      const\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" formData\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" =\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\" new\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" FormData\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"();\"}]]}]\ncb:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      formData.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"chat_id\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"String\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(chatId));\"}]]}]\ncc:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      formData.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"append\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}]]}]\ncd:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"voice\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nce:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"        new\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\" Blob\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"([voiceBuffer], { type: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"audio/ogg\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" }),\"}]]}]\ncf:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"        \\\"voice.ogg\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\",\"}]]}]\nd0:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      );\"}]}]\nd1:[\"$\",\"span\",null,{\"children\":\" \"}]\nd2:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"      // Send the voice message\"}]}]\nd3:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\""])</script><script>self.__next_f.push([1,"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" TelegramAPI.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"sendVoice\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"({\"}]]}]\nd4:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        body: formData,\"}]}]\nd5:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"        apiRoot: \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\"this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".apiRoot,\"}]]}]\nd6:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      });\"}]}]\nd7:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    } \"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"catch\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\" (error) {\"}]]}]\nd8:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"      console.\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"error\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#032F62\",\"--shiki-dark\":\"#9ECBFF\"},\"children\":\"\\\"Error generating voice message:\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\", error);\"}]]}]\nd9:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"      // Fallback to text message if voice generation fails\"}]}]\nda:[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#D73A49\",\"--shiki-dark\":\"#F97583\"},\"children\":\"      await\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#005CC5\",\"--shiki-dark\":\"#79B8FF\"},\"children\":\" this\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6F42C1\",\"--shiki-dark\":\"#B392F0\"},\"children\":\"sendTextMessage\"}],[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"(chatId, text);\"}]]}]\ndb:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"    }\"}]}]\ndc:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"  }\"}]}]\ndd:[\"$\",\"span\",null,{\"children\":\" \"}]\nde:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#6A737D\",\"--shiki-dark\":\"#6A737D\"},\"children\":\"  // ...\"}]}]\ndf:[\"$\",\"span\",null,{\"children\":[\"$\",\"span\",null,{\"style\":{\"--shiki-light\":\"#24292E\",\"--shiki-dark\":\"#E1E4E8\"},\"children\":\"}\"}]}]\n"])</script><script>self.__next_f.push([1,"32:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"e0:I[27201,[\"/_next/static/chunks/8a07e07106d6caa4.js\",\"/_next/static/chunks/e9a04dc7022658f6.js\"],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"34:[[\"$\",\"title\",\"0\",{\"children\":\"Real-time polling (experimental) | Vovk.ts - Back-end for Next.js\"}],[\"$\",\"meta\",\"1\",{\"property\":\"og:title\",\"content\":\"Real-time polling (experimental) | Vovk.ts - Back-end for Next.js\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:description\",\"content\":\"Vovk.ts is a conceptual back-end meta-framework created on top of the Next.js App Router. Built for efficiency and an unprecedented developer experience.\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:url\",\"content\":\"https://vovk.dev\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:site_name\",\"content\":\"Vovk.ts\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image\",\"content\":\"https://vovk.dev/opengraph-image.png?opengraph-image.064a6db6.png\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:alt\",\"content\":\"Vovk.ts - back-end for Next.js\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"Real-time polling (experimental) | Vovk.ts - Back-end for Next.js\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"Vovk.ts is a conceptual back-end meta-framework created on top of the Next.js App Router. Built for efficiency and an unprecedented developer experience.\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image\",\"content\":\"https://vovk.dev/opengraph-image.png?opengraph-image.064a6db6.png\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image:height\",\"content\":\"600\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:image:alt\",\"content\":\"Vovk.ts - back-end for Next.js\"}],[\"$\",\"link\",\"20\",{\"rel\":\"icon\",\"href\":\"/icon.svg\",\"media\":\"(prefers-color-scheme: light)\"}],[\"$\",\"link\",\"21\",{\"rel\":\"icon\",\"href\":\"/icon-white.svg\",\"media\":\"(prefers-color-scheme: dark)\"}],[\"$\",\"$Le0\",\"22\",{}]]\n"])</script><script>self.__next_f.push([1,"30:null\n"])</script><script>self.__next_f.push([1,"e1:I[68386,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ThemeConfigProvider\"]\ne2:I[6344,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"LastUpdated\"]\ne3:I[98091,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"Search\"]\ne4:I[63178,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ThemeProvider\"]\ne5:I[91675,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"SkipNavLink\"]\ne6:I[37985,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ConfigProvider\"]\n"])</script><script>self.__next_f.push([1,"2:[\"$\",\"html\",null,{\"lang\":\"en\",\"dir\":\"ltr\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[\"$undefined\",[\"$\",\"style\",null,{\"children\":\":root {\\n  --nextra-primary-hue: 212deg;\\n  --nextra-primary-saturation: 100%;\\n  --nextra-primary-lightness: 45%;\\n  --nextra-bg: 250,250,250;\\n  --nextra-content-width: 90rem;\\n}\\n.dark {\\n  --nextra-primary-hue: 204deg;\\n  --nextra-primary-saturation: 100%;\\n  --nextra-primary-lightness: 55%;\\n  --nextra-bg: 17,17,17;\\n}\\n::selection {\\n  background: hsla(var(--nextra-primary-hue),var(--nextra-primary-saturation),var(--nextra-primary-lightness),.3);\\n}\\nhtml {\\n  background: rgb(var(--nextra-bg));\\n}\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: light)\",\"content\":\"rgb(250,250,250)\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"media\":\"(prefers-color-scheme: dark)\",\"content\":\"rgb(17,17,17)\"}],\"$undefined\"]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$Le1\",null,{\"value\":{\"children\":\"$undefined\",\"copyPageButton\":true,\"darkMode\":true,\"docsRepositoryBase\":\"https://github.com/shuding/nextra/tree/main/docs\",\"editLink\":\"Edit this page\",\"feedback\":{\"content\":\"Question? Give us feedback\",\"labels\":\"feedback\"},\"i18n\":[],\"lastUpdated\":[\"$\",\"$Le2\",null,{}],\"navigation\":{\"next\":true,\"prev\":true},\"search\":[\"$\",\"$Le3\",null,{}],\"sidebar\":{\"defaultMenuCollapseLevel\":2,\"defaultOpen\":true,\"toggleButton\":true},\"themeSwitch\":{\"dark\":\"Dark\",\"light\":\"Light\",\"system\":\"System\"},\"toc\":{\"backToTop\":\"Scroll to top\",\"float\":true,\"title\":\"On This Page\"}},\"children\":[\"$\",\"$Le4\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"disableTransitionOnChange\":true,\"storageKey\":\"theme\",\"children\":[[\"$\",\"$Le5\",null,{}],\"$undefined\",[\"$\",\"$Le6\",null,{\"pageMap\":[{\"data\":{\"index\":{\"type\":\"page\",\"title\":\"Home\",\"theme\":{\"copyPage\":false,\"footer\":false,\"layout\":\"full\",\"toc\":false}},\"blog\":{\"href\":\"/blog\",\"title\":\"Blog\",\"type\":\"page\",\"display\":\"hidden\"},\"#about\":{\"type\":\"separator\",\"title\":\"About\"},\"about\":{\"title\":\"About Vovk.ts\"},\"saas\":{\"title\":\"Framework for SaaS Apps\"},\"performance\":{\"title\":\"Overhead Performance\"},\"#getting-started\":{\"type\":\"separator\",\"title\":\"Getting Started\"},\"quick-install\":{\"title\":\"Quick Install ðŸš§\"},\"manual-install\":{\"title\":\"Manual Install ðŸš§\"},\"hello-world\":{\"title\":\"\\\"Hello World!\\\" Example ðŸš§\"},\"#common\":{\"type\":\"separator\",\"title\":\"Common\"},\"schema\":{\"title\":\"Schema\"},\"validation\":{\"title\":\"Validation\"},\"inference\":{\"title\":\"Type Inference\"},\"#server-side\":{\"type\":\"separator\",\"title\":\"Server-Side\"},\"segment\":{\"title\":\"Segment\"},\"controller\":{\"title\":\"Controller\"},\"#typescript\":{\"type\":\"separator\",\"title\":\"TypeScript Client\"},\"typescript\":{\"title\":\"TypeScript RPC\"},\"composed\":{\"title\":\"Composed Client\"},\"segmented\":{\"title\":\"Segmented Client\"},\"imports\":{\"title\":\"Imports Customization\"},\"#client-side\":{\"type\":\"separator\",\"title\":\"Other Clients\"},\"python\":{\"title\":\"Python RPC ðŸ§ª\"},\"rust\":{\"title\":\"Rust RPC ðŸ§ª\"},\"#cli\":{\"type\":\"separator\",\"title\":\"Config \u0026 CLI\"},\"config\":{\"title\":\"Config\"},\"cli\":{\"title\":\"CLI\"},\"bundle\":{\"title\":[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"children\":\"vovk bundle ðŸ§ª ðŸš§\"}]},\"dev\":{\"title\":[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"children\":\"vovk dev\"}]},\"generate\":{\"title\":[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"children\":\"vovk generate\"}]},\"init\":{\"title\":[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"children\":\"vovk init\"}]},\"new\":{\"title\":[\"$\",\"code\",null,{\"className\":\"nextra-code\",\"children\":\"vovk new\"}]},\"#etc\":{\"type\":\"separator\",\"title\":\"etc.\"},\"openapi\":{\"title\":\"OpenAPI Specification\"},\"multitenant\":{\"title\":\"Multitenancy ðŸ§ª\"},\"codegen\":{\"title\":\"OpenAPI Codegen\"},\"templates\":{\"title\":\"Client Templates\"},\"packages\":{\"title\":\"Packages\"},\"api-ref\":{\"title\":\"API Reference ðŸš§\"},\"#ai\":{\"type\":\"separator\",\"title\":\"AI Applications\"},\"llm\":{\"title\":\"LLM Completions\"},\"function-calling\":{\"title\":\"Function Calling\"},\"realtime-ui\":{\"title\":\"Real-Time UI ðŸ§ª ðŸš§\"},\"polling\":{\"title\":\"Real-Time Polling ðŸ§ª ðŸš§\"},\"mcp\":{\"title\":\"MCP Server\"},\"#guides\":{\"type\":\"separator\",\"title\":\"Random Recipes \u0026 Guides\"},\"authorization\":{\"title\":\"Authorization with Decorators\"},\"proxy\":{\"title\":\"Proxy Endpoints\"},\"nestjs\":{\"title\":\"RPC for NestJS\"},\"other-scenarios\":{\"title\":\"Other Usage Scenarios\"}}},{\"name\":\"index\",\"route\":\"/\",\"frontMatter\":{},\"title\":\"Home\"},{\"name\":\"blog\",\"route\":\"/blog\",\"children\":[{\"data\":{\"index\":{\"theme\":{\"copyPage\":true,\"breadcrumb\":true,\"sidebar\":false}}}},{\"name\":\"index\",\"route\":\"/blog\",\"frontMatter\":{\"title\":\"Index\",\"description\":\"Blog\",\"filePath\":\"src/app/blog/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Index\"}],\"title\":\"Blog\"},{\"name\":\"#about\",\"type\":\"separator\",\"title\":\"About\"},{\"name\":\"about\",\"route\":\"/about\",\"frontMatter\":{\"title\":\"About Vovk.ts\",\"filePath\":\"src/app/about/page.mdx\",\"timestamp\":1761940944000},\"title\":\"About Vovk.ts\"},{\"name\":\"saas\",\"route\":\"/saas\",\"frontMatter\":{\"title\":\"Framework for SaaS Applications\",\"filePath\":\"src/app/saas/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Framework for SaaS Apps\"},{\"name\":\"performance\",\"route\":\"/performance\",\"frontMatter\":{\"title\":\"Overhead Performance\",\"filePath\":\"src/app/performance/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Overhead Performance\"},{\"name\":\"#getting-started\",\"type\":\"separator\",\"title\":\"Getting Started\"},{\"name\":\"quick-install\",\"route\":\"/quick-install\",\"frontMatter\":{\"title\":\"Quick install\",\"filePath\":\"src/app/quick-install/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Quick Install ðŸš§\"},{\"name\":\"manual-install\",\"route\":\"/manual-install\",\"frontMatter\":{\"title\":\"Manual Install\",\"filePath\":\"src/app/manual-install/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Manual Install ðŸš§\"},{\"name\":\"hello-world\",\"route\":\"/hello-world\",\"frontMatter\":{\"title\":\"\\\"Hello World\\\" showcase\",\"filePath\":\"src/app/hello-world/page.mdx\",\"timestamp\":1761940944000},\"title\":\"\\\"Hello World!\\\" Example ðŸš§\"},{\"name\":\"#common\",\"type\":\"separator\",\"title\":\"Common\"},{\"name\":\"schema\",\"route\":\"/schema\",\"frontMatter\":{\"title\":\"Schema\",\"filePath\":\"src/app/schema/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Schema\"},{\"name\":\"validation\",\"route\":\"/validation\",\"children\":[{\"data\":{\"introduction\":{\"title\":\"Getting Started\"},\"client\":{\"title\":\"Client-Side Validation\"},\"standard\":{\"title\":\"Standard Schema\"},\"zod\":{\"title\":\"Zod 3 and 4\"},\"dto\":{\"title\":\"class-validator\"},\"yup\":{\"title\":\"Yup (obsolete)\",\"display\":\"hidden\"}}},{\"name\":\"introduction\",\"route\":\"/validation/introduction\",\"frontMatter\":{\"title\":\"Getting Started\",\"filePath\":\"src/app/validation/introduction/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Getting Started\"},{\"name\":\"client\",\"route\":\"/validation/client\",\"frontMatter\":{\"title\":\"Client-Side Validation for RPC Methods\",\"filePath\":\"src/app/validation/client/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Client-Side Validation\"},{\"name\":\"standard\",\"route\":\"/validation/standard\",\"frontMatter\":{\"title\":\"Standard Schema Validation\",\"filePath\":\"src/app/validation/standard/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Standard Schema\"},{\"name\":\"zod\",\"route\":\"/validation/zod\",\"frontMatter\":{\"title\":\"Zod Validation\",\"filePath\":\"src/app/validation/zod/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Zod 3 and 4\"},{\"name\":\"dto\",\"route\":\"/validation/dto\",\"frontMatter\":{\"title\":\"Validation with class-validator\",\"filePath\":\"src/app/validation/dto/page.mdx\",\"timestamp\":1761940944000},\"title\":\"class-validator\"},{\"name\":\"yup\",\"route\":\"/validation/yup\",\"frontMatter\":{\"title\":\"Yup Validation (Obsolete)\",\"filePath\":\"src/app/validation/yup/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Yup (obsolete)\"}],\"frontMatter\":{\"asIndexPage\":true,\"description\":\"Nextra's File Conventions guide details the structure and organization of files and directories within a Nextra project, including the use of `page.mdx`, `_meta.js`, and `mdx-components.js` files, as well as the `content` and `src` directories.\",\"title\":\"Validation\",\"filePath\":\"src/app/validation/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Validation\"},{\"name\":\"inference\",\"route\":\"/inference\",\"frontMatter\":{\"title\":\"Type Inference\",\"filePath\":\"src/app/inference/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Type Inference\"},{\"name\":\"#server-side\",\"type\":\"separator\",\"title\":\"Server-Side\"},{\"name\":\"segment\",\"route\":\"/segment\",\"children\":[{\"data\":{\"introduction\":{\"title\":\"Getting Started\"},\"static\":{\"title\":\"Static Segment\"}}},{\"name\":\"introduction\",\"route\":\"/segment/introduction\",\"frontMatter\":{\"title\":\"Segment\",\"filePath\":\"src/app/segment/introduction/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Getting Started\"},{\"name\":\"static\",\"route\":\"/segment/static\",\"frontMatter\":{\"title\":\"Static Segment\",\"filePath\":\"src/app/segment/static/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Static Segment\"}],\"frontMatter\":{\"asIndexPage\":true,\"description\":\"Segments Documentation\",\"title\":\"Segment\",\"filePath\":\"src/app/segment/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Segment\"},{\"name\":\"controller\",\"route\":\"/controller\",\"children\":[{\"data\":{\"introduction\":{\"title\":\"Getting Started\"},\"request\":{\"title\":\"VovkRequest Type\"},\"service\":{\"title\":\"Service\"},\"errors\":{\"title\":\"Errors\"},\"headers\":{\"title\":\"Headers\"},\"redirect\":{\"title\":\"redirect and notFound\"},\"decorator\":{\"title\":\"Decorators\"},\"jsonlines\":{\"title\":\"JSON Lines\"},\"fn\":{\"title\":\"Callable Handlers\"},\"meta\":{\"title\":\"Request Meta\"},\"progressive\":{\"title\":\"Progressive Response ðŸ§ª\"},\"formdata\":{\"title\":\"FormData\"}}},{\"name\":\"introduction\",\"route\":\"/controller/introduction\",\"frontMatter\":{\"title\":\"Controller\",\"filePath\":\"src/app/controller/introduction/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Getting Started\"},{\"name\":\"request\",\"route\":\"/controller/request\",\"frontMatter\":{\"title\":\"VovkRequest Type\",\"filePath\":\"src/app/controller/request/page.mdx\",\"timestamp\":1754158036000},\"title\":\"VovkRequest Type\"},{\"name\":\"service\",\"route\":\"/controller/service\",\"frontMatter\":{\"title\":\"Service\",\"filePath\":\"src/app/controller/service/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Service\"},{\"name\":\"errors\",\"route\":\"/controller/errors\",\"frontMatter\":{\"title\":\"Errors\",\"filePath\":\"src/app/controller/errors/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Errors\"},{\"name\":\"headers\",\"route\":\"/controller/headers\",\"frontMatter\":{\"title\":\"Headers\",\"filePath\":\"src/app/controller/headers/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Headers\"},{\"name\":\"redirect\",\"route\":\"/controller/redirect\",\"frontMatter\":{\"title\":\"Redirect and notFound\",\"filePath\":\"src/app/controller/redirect/page.mdx\",\"timestamp\":1761940944000},\"title\":\"redirect and notFound\"},{\"name\":\"decorator\",\"route\":\"/controller/decorator\",\"frontMatter\":{\"title\":\"Decorators\",\"filePath\":\"src/app/controller/decorator/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Decorators\"},{\"name\":\"jsonlines\",\"route\":\"/controller/jsonlines\",\"frontMatter\":{\"title\":\"JSON Lines Streaming\",\"filePath\":\"src/app/controller/jsonlines/page.mdx\",\"timestamp\":1761940944000},\"title\":\"JSON Lines\"},{\"name\":\"fn\",\"route\":\"/controller/fn\",\"frontMatter\":{\"title\":\"Callable Handlers\",\"filePath\":\"src/app/controller/fn/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Callable Handlers\"},{\"name\":\"meta\",\"route\":\"/controller/meta\",\"frontMatter\":{\"title\":\"Request Meta\",\"filePath\":\"src/app/controller/meta/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Request Meta\"},{\"name\":\"progressive\",\"route\":\"/controller/progressive\",\"frontMatter\":{\"title\":\"Progressive Response (Experimental)\",\"filePath\":\"src/app/controller/progressive/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Progressive Response ðŸ§ª\"},{\"name\":\"formdata\",\"route\":\"/controller/formdata\",\"frontMatter\":{\"title\":\"FormData\",\"filePath\":\"src/app/controller/formdata/page.mdx\",\"timestamp\":1761940944000},\"title\":\"FormData\"}],\"frontMatter\":{\"asIndexPage\":true,\"description\":\"Controller Documentation\",\"title\":\"Controller\",\"filePath\":\"src/app/controller/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Controller\"},{\"name\":\"#typescript\",\"type\":\"separator\",\"title\":\"TypeScript Client\"},{\"name\":\"typescript\",\"route\":\"/typescript\",\"frontMatter\":{\"title\":\"TypeScript RPC Client\",\"filePath\":\"src/app/typescript/page.mdx\",\"timestamp\":1761940944000},\"title\":\"TypeScript RPC\"},{\"name\":\"composed\",\"route\":\"/composed\",\"frontMatter\":{\"title\":\"Composed RPC Client\",\"filePath\":\"src/app/composed/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Composed Client\"},{\"name\":\"segmented\",\"route\":\"/segmented\",\"frontMatter\":{\"title\":\"Segmented RPC Client\",\"filePath\":\"src/app/segmented/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Segmented Client\"},{\"name\":\"imports\",\"route\":\"/imports\",\"frontMatter\":{\"title\":\"TypeScript RPC Customization\",\"filePath\":\"src/app/imports/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Imports Customization\"},{\"name\":\"#client-side\",\"type\":\"separator\",\"title\":\"Other Clients\"},{\"name\":\"python\",\"route\":\"/python\",\"frontMatter\":{\"title\":\"Python RPC Client (Experimental)\",\"filePath\":\"src/app/python/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Python RPC ðŸ§ª\"},{\"name\":\"rust\",\"route\":\"/rust\",\"frontMatter\":{\"title\":\"Rust RPC Client (Experimental)\",\"filePath\":\"src/app/rust/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Rust RPC ðŸ§ª\"},{\"name\":\"#cli\",\"type\":\"separator\",\"title\":\"Config \u0026 CLI\"},{\"name\":\"config\",\"route\":\"/config\",\"frontMatter\":{\"title\":\"vovk.config.{js,cjs,mjs}\",\"filePath\":\"src/app/config/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Config\"},{\"name\":\"cli\",\"route\":\"/cli\",\"frontMatter\":{\"title\":\"CLI\",\"filePath\":\"src/app/cli/page.mdx\",\"timestamp\":1754158036000},\"title\":\"CLI\"},{\"name\":\"bundle\",\"route\":\"/bundle\",\"frontMatter\":{\"title\":\"TypeScript Bundle (Experimental)\",\"filePath\":\"src/app/bundle/page.mdx\",\"timestamp\":1761940944000},\"title\":\"$2:props:children:1:props:children:props:children:props:children:2:props:pageMap:0:data:bundle:title\"},{\"name\":\"dev\",\"route\":\"/dev\",\"frontMatter\":{\"title\":\"vovk dev\",\"filePath\":\"src/app/dev/page.mdx\",\"timestamp\":1761940944000},\"title\":\"$2:props:children:1:props:children:props:children:props:children:2:props:pageMap:0:data:dev:title\"},{\"name\":\"generate\",\"route\":\"/generate\",\"frontMatter\":{\"title\":\"vovk generate\",\"filePath\":\"src/app/generate/page.mdx\",\"timestamp\":1754158036000},\"title\":\"$2:props:children:1:props:children:props:children:props:children:2:props:pageMap:0:data:generate:title\"},{\"name\":\"init\",\"route\":\"/init\",\"frontMatter\":{\"title\":\"vovk init\",\"filePath\":\"src/app/init/page.mdx\",\"timestamp\":1761940944000},\"title\":\"$2:props:children:1:props:children:props:children:props:children:2:props:pageMap:0:data:init:title\"},{\"name\":\"new\",\"route\":\"/new\",\"frontMatter\":{\"title\":\"vovk new\",\"filePath\":\"src/app/new/page.mdx\",\"timestamp\":1761940944000},\"title\":\"$2:props:children:1:props:children:props:children:props:children:2:props:pageMap:0:data:new:title\"},{\"name\":\"#etc\",\"type\":\"separator\",\"title\":\"etc.\"},{\"name\":\"openapi\",\"route\":\"/openapi\",\"frontMatter\":{\"title\":\"OpenAPI Specification with @operation Decorator\",\"filePath\":\"src/app/openapi/page.mdx\",\"timestamp\":1761940944000},\"title\":\"OpenAPI Specification\"},{\"name\":\"multitenant\",\"route\":\"/multitenant\",\"frontMatter\":{\"title\":\"Multitenancy (Experimental)\",\"filePath\":\"src/app/multitenant/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Multitenancy ðŸ§ª\"},{\"name\":\"codegen\",\"route\":\"/codegen\",\"frontMatter\":{\"title\":\"Code Generation via OpenAPI Mixins\",\"filePath\":\"src/app/codegen/page.mdx\",\"timestamp\":1761940944000},\"title\":\"OpenAPI Codegen\"},{\"name\":\"templates\",\"route\":\"/templates\",\"frontMatter\":{\"title\":\"Client Templates\",\"filePath\":\"src/app/templates/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Client Templates\"},{\"name\":\"packages\",\"route\":\"/packages\",\"frontMatter\":{\"title\":\"Packages and Repos\",\"filePath\":\"src/app/packages/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Packages\"},{\"name\":\"api-ref\",\"route\":\"/api-ref\",\"frontMatter\":{\"title\":\"API Reference\",\"filePath\":\"src/app/api-ref/page.mdx\",\"timestamp\":1761940944000},\"title\":\"API Reference ðŸš§\"},{\"name\":\"#ai\",\"type\":\"separator\",\"title\":\"AI Applications\"},{\"name\":\"llm\",\"route\":\"/llm\",\"frontMatter\":{\"title\":\"LLM Completions\",\"filePath\":\"src/app/llm/page.mdx\",\"timestamp\":1761940944000},\"title\":\"LLM Completions\"},{\"name\":\"function-calling\",\"route\":\"/function-calling\",\"frontMatter\":{\"title\":\"Turn Your Back-End into an AI Agent\",\"filePath\":\"src/app/function-calling/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Function Calling\"},{\"name\":\"realtime-ui\",\"route\":\"/realtime-ui\",\"frontMatter\":{\"title\":\"Real-time UI\",\"filePath\":\"src/app/realtime-ui/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Real-Time UI ðŸ§ª ðŸš§\"},{\"name\":\"polling\",\"route\":\"/polling\",\"frontMatter\":\"$0:f:0:1:1:children:1:children:0:props:children:0:props:children:props:children:1:props:metadata\",\"title\":\"Real-Time Polling ðŸ§ª ðŸš§\"},{\"name\":\"mcp\",\"route\":\"/mcp\",\"frontMatter\":{\"title\":\"MCP Server\",\"filePath\":\"src/app/mcp/page.mdx\",\"timestamp\":1761940944000},\"title\":\"MCP Server\"},{\"name\":\"#guides\",\"type\":\"separator\",\"title\":\"Random Recipes \u0026 Guides\"},{\"name\":\"authorization\",\"route\":\"/authorization\",\"frontMatter\":{\"title\":\"Authorization with Decorators\",\"filePath\":\"src/app/authorization/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Authorization with Decorators\"},{\"name\":\"proxy\",\"route\":\"/proxy\",\"frontMatter\":{\"title\":\"Proxy Endpoints\",\"filePath\":\"src/app/proxy/page.mdx\",\"timestamp\":1761940944000},\"title\":\"Proxy Endpoints\"},{\"name\":\"nestjs\",\"route\":\"/nestjs\",\"frontMatter\":{\"title\":\"RPC for NestJS\",\"filePath\":\"src/app/nestjs/page.mdx\",\"timestamp\":1761940944000},\"title\":\"RPC for NestJS\"},{\"name\":\"other-scenarios\",\"route\":\"/other-scenarios\",\"frontMatter\":{\"title\":\"Other Usage Scenarios\",\"filePath\":\"src/app/other-scenarios/page.mdx\",\"timestamp\":1754158036000},\"title\":\"Other Usage Scenarios\"}],\"navbar\":\"$Le7\",\"footer\":\"$Le8\",\"children\":[\"$Le9\",\"$Lea\"]}]]}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"ef:I[31277,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"Switchers\"]\nf0:I[34924,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"LocaleSwitch\"]\nf1:I[75684,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ThemeSwitch\"]\nf2:I[769,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"MobileNav\"]\neb:T1231,"])</script><script>self.__next_f.push([1,"M 483.009 360.176 C 481.58500000000004 347.11199999999997 479.659 334.54699999999997 477.31100000000004 322.562 C 471.36400000000003 291.575 462.48900000000003 264.261 453.355 241.397 C 433.66900000000004 192.478 412.31 163.831 412.31 163.831 C 412.31 163.831 422.196 149.589 424.794 96.31099999999999 C 425.042 92.62899999999999 425.125 88.85799999999999 425.21099999999996 84.833 C 426.299 41.525999999999996 409.799 12.879000000000005 396.81299999999993 3.495999999999995 C 390.95199999999994 -0.8560000000000052 385.8399999999999 -1.1920000000000046 383.40899999999993 2.742999999999995 C 380.31299999999993 7.520999999999995 369.17099999999994 23.937999999999995 356.27099999999996 42.532 C 355.097 44.128 353.92299999999994 45.805 352.753 47.562999999999995 C 331.72499999999997 77.969 307.683 112.311 307.683 112.311 L 256 112.311 L 204.316 112.311 C 204.316 112.311 180.274 77.97 159.247 47.563 C 158.07700000000003 45.805 156.90300000000002 44.128 155.73000000000002 42.532000000000004 C 142.829 23.94 131.687 7.522 128.591 2.744 C 126.162 -1.1909999999999998 121.049 -0.855 115.18700000000001 3.4970000000000003 C 102.20100000000001 12.879999999999999 85.70100000000001 41.527 86.78900000000002 84.834 C 86.87500000000001 88.85900000000001 86.95700000000002 92.63000000000001 87.20600000000002 96.312 C 89.80300000000001 149.59 99.68900000000002 163.832 99.68900000000002 163.832 C 99.68900000000002 163.832 78.33000000000001 192.48 58.64400000000002 241.398 C 49.511000000000024 264.262 40.63500000000002 291.576 34.68800000000002 322.563 C 32.341000000000015 334.54699999999997 30.414000000000016 347.113 28.991000000000017 360.17699999999996 C 28.90500000000002 360.76599999999996 28.90500000000002 361.43699999999995 28.823000000000018 362.02599999999995 L 29.997000000000018 361.936 L 30.66400000000002 361.85499999999996 L 31.67000000000002 361.85499999999996 L 78.74800000000002 358.92699999999996 L 72.46600000000002 409.68499999999995 L 122.05500000000002 401.9789999999999 L 130.43200000000002 438.2509999999999 L 166.741 419.1089999999999 C 178.348 450.25199999999995 193.609 489.7869999999999 199.99800000000002 500.1839999999999 C 210.936 518.0339999999999 235.01800000000003 512.9379999999999 252.532 502.7449999999999 C 253.829 501.98399999999987 254.90800000000002 501.2969999999999 255.87800000000001 500.6419999999999 C 256.84700000000004 501.2959999999999 257.91900000000004 501.98399999999987 259.232 502.7449999999999 C 276.742 512.9379999999999 300.817 518.0339999999999 311.75800000000004 500.1839999999999 C 318.14700000000005 489.7779999999999 333.50100000000003 450.2099999999999 345.182 419.0679999999999 L 381.56800000000004 438.25199999999995 L 389.94500000000005 401.97999999999996 L 439.53400000000005 409.686 L 433.25100000000003 358.928 L 480.32900000000006 361.856 L 481.33600000000007 361.856 L 482.00200000000007 361.937 L 483.17600000000004 362.027 C 483.094 361.436 483.094 360.765 483.009 360.176 z M 128.845 146.056 C 116.02199999999999 131.24200000000002 110.63499999999999 95.126 114.979 78.21700000000001 C 117.703 67.55700000000002 128.161 63.149000000000015 134.706 70.67500000000001 C 141.266 78.20900000000002 164.274 120.31300000000002 164.274 120.31300000000002 C 164.274 120.31300000000002 132.072 144.445 128.845 146.056 z M 168.045 329.386 C 168.045 329.386 154.08499999999998 300.06800000000004 151.29199999999997 288.90200000000004 C 186.19299999999998 288.90200000000004 200.15699999999998 308.44500000000005 205.73999999999998 314.03200000000004 L 214.11599999999999 332.184 L 168.045 329.386 z M 283.638 456.066 C 272.967 469.662 263.003 470.08799999999997 255.99599999999998 470.08799999999997 C 248.98999999999998 470.08799999999997 239.034 469.662 228.34999999999997 456.066 C 219.78899999999996 445.178 226.79099999999997 431.926 237.69999999999996 431.926 C 241.58999999999995 431.926 255.99499999999995 431.926 255.99499999999995 431.926 C 255.99499999999995 431.926 270.40899999999993 431.926 274.29799999999994 431.926 C 285.212 431.926 292.218 445.178 283.638 456.066 z M 343.955 329.386 L 297.883 332.184 L 306.26 314.03200000000004 C 311.843 308.44500000000005 325.807 288.90200000000004 360.70799999999997 288.90200000000004 C 357.915 300.067 343.955 329.386 343.955 329.386 z M 383.143 146.056 C 379.91999999999996 144.44500000000002 347.72299999999996 120.31300000000002 347.72299999999996 120.31300000000002 C 347.72299999999996 120.31300000000002 370.72599999999994 78.20900000000002 377.27799999999996 70.67500000000001 C 383.82599999999996 63.149000000000015 394.28099999999995 67.558 397.01699999999994 78.21700000000001 C 401.365 95.126 395.965 131.241 383.143 146.056 z"])</script><script>self.__next_f.push([1,"e7:[\"$\",\"header\",null,{\"className\":\"nextra-navbar x:sticky x:top-0 x:z-30 x:w-full x:bg-transparent x:print:hidden x:max-md:[.nextra-banner:not([class$=hidden])~\u0026]:top-(--nextra-banner-height)\",\"children\":[[\"$\",\"div\",null,{\"className\":\"nextra-navbar-blur x:absolute x:-z-1 x:size-full nextra-border x:border-b x:backdrop-blur-md x:bg-nextra-bg/70\"}],[\"$\",\"nav\",null,{\"style\":{\"height\":\"var(--nextra-navbar-height)\"},\"className\":\"x:mx-auto x:flex x:max-w-(--nextra-content-width) x:items-center x:gap-4 x:pl-[max(env(safe-area-inset-left),1.5rem)] x:pr-[max(env(safe-area-inset-right),1.5rem)] x:justify-end\",\"children\":[[\"$\",\"$Le\",null,{\"href\":\"/\",\"className\":\"x:flex x:items-center x:me-auto x:transition-opacity x:focus-visible:nextra-focus x:hover:opacity-75\",\"aria-label\":\"Home page\",\"children\":[\"$\",\"svg\",null,{\"className\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"width\":120,\"height\":34.5,\"viewBox\":\"0 0 320 92\",\"children\":[[\"$\",\"desc\",null,{\"children\":\"Created with Fabric.js 5.3.0\"}],[\"$\",\"defs\",null,{}],[\"$\",\"g\",null,{\"transform\":\"matrix(0.1737995768 0 0 0.1737995768 39.8512941892 44.8611051276)\",\"id\":\"k3p4mJoS6tEew0Q_1_q7m\",\"children\":[\"$\",\"path\",null,{\"style\":{\"stroke\":\"none\",\"strokeWidth\":1,\"strokeDasharray\":\"none\",\"strokeLinecap\":\"butt\",\"strokeDashoffset\":0,\"strokeLinejoin\":\"miter\",\"strokeMiterlimit\":4,\"fill\":\"currentColor\",\"fillRule\":\"nonzero\",\"opacity\":1},\"transform\":\" translate(-255.9995, -256.0001872585)\",\"d\":\"$eb\",\"strokeLinecap\":\"round\"}]}],\"$Lec\",\"$Led\"]}]}],\"$Lee\"]}]]}]\n"])</script><script>self.__next_f.push([1,"e8:[\"$\",\"div\",null,{\"className\":\"x:bg-gray-100 x:pb-[env(safe-area-inset-bottom)] x:dark:bg-neutral-900 x:print:bg-transparent\",\"children\":[[\"$\",\"$Lef\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"x:mx-auto x:flex x:max-w-(--nextra-content-width) x:gap-2 x:py-2 x:px-4\",\"children\":[[\"$\",\"$Lf0\",null,{}],[\"$\",\"$Lf1\",null,{}]]}]}],[\"$\",\"hr\",null,{\"className\":\"nextra-border\"}],[\"$\",\"footer\",null,{\"className\":\"x:mx-auto x:flex x:max-w-(--nextra-content-width) x:justify-center x:py-12 x:text-gray-600 x:dark:text-gray-400 x:md:justify-start x:pl-[max(env(safe-area-inset-left),1.5rem)] x:pr-[max(env(safe-area-inset-right),1.5rem)] justify-between\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"MIT Â© 2023-\",2025,\" \",[\"$\",\"a\",null,{\"href\":\"https://github.com/finom\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font] ml-1\",\"children\":[\"Andrey Gubanov\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}]]}],[\"$\",\"a\",null,{\"href\":\"https://github.com/sponsors/finom\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"className\":\"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font] ml-2 block\",\"children\":[\"Sponsor\",[\"Â \",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":1.7,\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"e9:[\"$\",\"$Lf2\",null,{}]\n"])</script><script>self.__next_f.push([1,"ea:[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]\n"])</script><script>self.__next_f.push([1,"f5:I[43634,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"ClientNavbar\"]\nf3:T573,"])</script><script>self.__next_f.push([1,"M 100.721 74.925 L 86.721 24.925 L 94.721 24.925 L 106.401 67.565 L 107.121 67.565 L 118.801 24.925 L 126.801 24.925 L 112.801 74.925 L 100.721 74.925 Z M 148.961 75.725 L 148.961 75.725 Q 143.681 75.725 140.321 74.805 Q 136.961 73.885 135.081 71.605 Q 133.201 69.325 132.401 65.245 Q 131.601 61.165 131.601 54.925 L 131.601 54.925 Q 131.601 48.605 132.401 44.565 Q 133.201 40.525 135.081 38.245 Q 136.961 35.965 140.321 35.045 Q 143.681 34.125 148.961 34.125 L 148.961 34.125 Q 154.241 34.125 157.641 35.005 Q 161.041 35.885 162.961 38.205 Q 164.881 40.525 165.601 44.565 Q 166.321 48.605 166.321 54.925 L 166.321 54.925 Q 166.321 61.165 165.561 65.245 Q 164.801 69.325 162.881 71.605 Q 160.961 73.885 157.601 74.805 Q 154.241 75.725 148.961 75.725 Z M 139.921 42.685 L 139.921 69.165 L 154.161 69.165 Q 156.401 69.165 157.201 68.765 Q 158.001 68.365 158.001 67.165 L 158.001 67.165 L 158.001 40.685 L 143.761 40.685 Q 141.441 40.685 140.681 41.085 Q 139.921 41.485 139.921 42.685 L 139.921 42.685 Z M 183.441 74.925 L 171.601 34.925 L 179.521 34.925 L 189.121 68.125 L 189.921 68.125 L 199.521 34.925 L 207.441 34.925 L 195.601 74.925 L 183.441 74.925 Z M 238.481 74.925 L 229.441 56.365 L 223.121 56.365 L 223.121 74.925 L 215.121 74.925 L 215.121 22.925 L 223.121 21.725 L 223.121 50.765 L 229.441 50.765 L 237.921 34.925 L 246.321 34.925 L 236.081 53.565 L 246.721 74.925 L 238.481 74.925 Z"])</script><script>self.__next_f.push([1,"ec:[\"$\",\"g\",null,{\"transform\":\"matrix(1 0 0 1 173.721 48.725)\",\"id\":\"q3VBAixAcNxARl4zxvCDl\",\"children\":[\"$\",\"path\",null,{\"style\":{\"stroke\":\"none\",\"strokeWidth\":1,\"strokeDasharray\":\"none\",\"strokeLinecap\":\"butt\",\"strokeDashoffset\":0,\"strokeLinejoin\":\"miter\",\"strokeMiterlimit\":4,\"fill\":\"currentColor\",\"fillRule\":\"nonzero\",\"opacity\":1},\"transform\":\" translate(-166.721, -48.725)\",\"d\":\"$f3\",\"strokeLinecap\":\"round\"}]}]\nf4:T6e4,"])</script><script>self.__next_f.push([1,"M 252.054 71.223 L 252.054 71.223 Q 252.054 69.099 252.762 68.125 Q 253.47 67.152 255.889 67.152 L 255.889 67.152 Q 258.249 67.152 258.987 68.125 Q 259.724 69.099 259.724 71.223 L 259.724 71.223 Q 259.724 73.406 258.987 74.32 Q 258.249 75.235 255.889 75.235 L 255.889 75.235 Q 253.47 75.235 252.762 74.32 Q 252.054 73.406 252.054 71.223 Z M 274.12 75.471 L 274.12 75.471 Q 271.937 75.471 270.846 74.379 Q 269.754 73.288 269.754 71.046 L 269.754 71.046 L 269.754 39.068 L 275.654 37.593 L 275.654 70.515 Q 276.48 70.574 277.424 70.662 Q 278.368 70.751 279.843 70.81 L 279.843 70.81 L 279.489 74.822 Q 277.66 75.176 276.333 75.323 Q 275.005 75.471 274.12 75.471 Z M 280.905 49.452 L 265.624 49.452 L 265.624 45.381 L 280.905 45.381 L 280.905 49.452 Z M 286.864 53.287 L 286.864 53.287 Q 286.864 48.744 289.549 46.62 Q 292.233 44.496 298.015 44.496 L 298.015 44.496 Q 300.67 44.496 303.03 44.791 Q 305.39 45.086 307.809 45.794 L 307.809 45.794 L 306.983 50.101 Q 305.508 49.688 303.532 49.422 Q 301.555 49.157 299.785 49.157 L 299.785 49.157 Q 297.897 49.157 296.127 49.304 Q 294.357 49.452 293.059 49.688 L 293.059 49.688 L 293.059 56.65 Q 298.192 57.358 301.378 58.125 Q 304.564 58.892 306.275 59.924 Q 307.986 60.957 308.635 62.55 Q 309.284 64.143 309.284 66.562 L 309.284 66.562 Q 309.284 69.925 308.075 71.931 Q 306.865 73.937 304.122 74.851 Q 301.378 75.766 296.894 75.766 L 296.894 75.766 Q 294.298 75.766 291.614 75.323 Q 288.929 74.881 286.215 74.055 L 286.215 74.055 L 287.159 69.335 Q 291.643 71.105 296.835 71.105 L 296.835 71.105 Q 298.605 71.105 299.933 70.957 Q 301.26 70.81 303.089 70.279 L 303.089 70.279 L 303.089 63.317 Q 297.661 62.55 294.416 61.842 Q 291.171 61.134 289.549 60.101 Q 287.926 59.069 287.395 57.446 Q 286.864 55.824 286.864 53.287 Z"])</script><script>self.__next_f.push([1,"ed:[\"$\",\"g\",null,{\"transform\":\"matrix(1 0 0 1 289.669 56.6795)\",\"id\":\"SAvuNLe2F3CeHCg_q6L8_\",\"children\":[\"$\",\"path\",null,{\"style\":{\"stroke\":\"none\",\"strokeWidth\":1,\"strokeDasharray\":\"none\",\"strokeLinecap\":\"butt\",\"strokeDashoffset\":0,\"strokeLinejoin\":\"miter\",\"strokeMiterlimit\":4,\"fill\":\"currentColor\",\"fillRule\":\"nonzero\",\"opacity\":1},\"transform\":\" translate(-280.669, -56.6795)\",\"d\":\"$f4\",\"strokeLinecap\":\"round\"}]}]\nf6:T481,M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Zf7:T49e,M26.0015 6.9529C24.0021 6.03845 21.8787 5.37198 19.6623 5C19.3833 5.48048 19.0733 6.13144 18.8563 6.64292C16.4989 6.30193 14.1585 6.30193 11.8336 6.64292C11.6166 6.13144 11.2911 5.48048 11.0276 5C8.79575 5.37198 6.67235 6.03845 4.6869 6.9529C0.672601 12.8736 -0.41235 18.6548 0.130124 24.3585C2.79599 26.2959 5.36889 27.4739 7.89682 28.2489C8.51679 27.4119 9.07477 26.5129 9.55525 25.5675C8.64079 25.2265 7.77283 24.808 6.93587 24.312C7.15286 24.1571 7.36986 23.9866 7.57135 23.8161C12.6241 26.1255 18.0969 26.1255 23.0876 23.8161C23.3046 23.9866 23.5061 24.1571 23.7231 24.312C22.8861 24.808 22.0182 25.2265 21.1037 25.5675C21.5842 26.5129 22.1422 27.4119 22.7621 28.2489C25.2885 27.4739 27.8769 26.2959 30.5288 24.3585C31.1952 17.7559 29.4733 12.0212 26.0015 6.9529ZM10.2527 20.8402C8.73376 20.8402 7.49382 19.4608 7.49382 17.7714C7.49382 16.082 8.70276 14.7025 10.2527 14.7025C11.7871 14.7025 13.0425 16.082 13.0115 17.7714C13.0115 19.4608 11.7871 20.8402 10.2527 20.8402ZM20.4373 20.8402C18.9183 20.8402 17.6768 19.4608 17.6768 17.7714C17.6768 16.082 18.8873 14.7025 20.4373 14.7025C21.9717 14.7025 23.2271 16.082 23.1961 17.7714C23.1961 19.4608 21.9872 20.8402 20.4373 20.8402Zee:[\"$\",\"$Lf5\",null,{\"className\":\"\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/finom/vovk\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"children\":[[\"$\",\"svg\",null,{\"fill\":\"currentColor\",\"viewBox\":\"3 3 18 18\",\"height\":\"24\",\"aria-label\":\"Project repository\",\"children\":[\"$\",\"path\",null,{\"d\":\"$f6\"}]}],false],\"className\":\"x:focus-visible:nextra-focus\"}],[\"$\",\"a\",null,{\"href\":\"https://discord.com/invite/qdT8WEHUuP\",\"target\":\"_blank\",\"rel\":\"noreferrer\",\"children\":[[\"$\",\"svg\",null,{\"fill\":\"currentColor\",\"viewBox\":\"0 5 30.67 23.25\",\"width\":\"24\",\"children\":[\"$\",\"path\",null,{\"d\":\"$f7\"}]}],false],\"className\":\"x:focus-visible:nextra-focus\"}],\"$undefined\"]}]\n"])</script><script>self.__next_f.push([1,"f8:I[17540,[\"/_next/static/chunks/2f545f6d145a6a33.js\",\"/_next/static/chunks/f663ddeedb906bce.js\",\"/_next/static/chunks/b42e1f87491709ea.js\",\"/_next/static/chunks/18261f32c8b1cd5d.js\",\"/_next/static/chunks/442cfc44547bfe65.js\",\"/_next/static/chunks/1aa8e0a9a6fe0f6f.js\",\"/_next/static/chunks/a4f78601a5cf1eea.js\",\"/_next/static/chunks/7a896a6378983d41.js\"],\"default\"]\nf9:T8d3,"])</script><script>self.__next_f.push([1,"import { JSONLinesResponse, type VovkIteration } from \"vovk\";\nimport { forEach, groupBy } from \"lodash\";\nimport type DatabasePollController from \"./DatabasePollController\";\nimport DatabaseEventsService, { type DBChange } from \"./DatabaseEventsService\";\nimport DatabaseService from \"./DatabaseService\";\n\nexport default class PollService {\n  static poll(\n    resp: JSONLinesResponse\u003cVovkIteration\u003ctypeof DatabasePollController.poll\u003e\u003e,\n  ) {\n    setTimeout(resp.close, 30_000);\n\n    let asOldAs = new Date();\n    // 10 minutes ago; TODO: use latest update date from registry\n    asOldAs.setMinutes(asOldAs.getMinutes() - 10);\n\n    DatabaseEventsService.emitter.on(\n      DatabaseEventsService.DB_KEY,\n      (changes) =\u003e {\n        const deleted = changes.filter((change) =\u003e change.type === \"delete\");\n        const createdOrUpdated = changes.filter(\n          (change) =\u003e change.type === \"create\" || change.type === \"update\",\n        );\n\n        for (const deletedEntity of deleted) {\n          resp.send({\n            id: deletedEntity.id,\n            entityType: deletedEntity.entityType,\n            __isDeleted: true,\n          });\n        }\n        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]\n        forEach(groupBy(createdOrUpdated, \"entityType\"), (changes) =\u003e {\n          const maxDateItem = changes.reduce(\n            (max, change) =\u003e {\n              const changeDate = new Date(change.date);\n              return changeDate.getTime() \u003e new Date(max.date).getTime()\n                ? change\n                : max;\n            },\n            { date: new Date(0) } as unknown as DBChange,\n          );\n\n          if (new Date(maxDateItem.date).getTime() \u003e asOldAs.getTime()) {\n            void DatabaseService.prisma[maxDateItem.entityType as \"user\"]\n              .findMany({\n                where: {\n                  updatedAt: {\n                    gt: asOldAs,\n                  },\n                },\n              })\n              .then((entities) =\u003e {\n                for (const entity of entities) {\n                  resp.send(entity);\n                }\n              });\n            asOldAs = new Date(maxDateItem.date);\n          }\n        });\n      },\n    );\n  }\n}\n"])</script><script>self.__next_f.push([1,"21:[\"$\",\"div\",null,{\"className\":\"bg-code rounded-lg mt-4\",\"id\":\"_S_1_\",\"children\":[[\"$\",\"$Lf8\",null,{\"githubFiles\":[{\"path\":\"src/modules/database/DatabasePollService.ts\",\"content\":\"$f9\"},{\"path\":\"src/modules/database/DatabasePollController.ts\",\"content\":\"import { EntityType } from \\\"../../../prisma/generated/client\\\";\\nimport { get, JSONLinesResponse, prefix, type VovkIteration } from \\\"vovk\\\";\\nimport { z } from \\\"zod\\\";\\nimport DatabasePollService from \\\"./DatabasePollService\\\";\\nimport { TaskSchema, UserSchema } from \\\"../../../prisma/generated/schemas\\\";\\nimport { withZod } from \\\"@/lib/withZod\\\";\\nimport { sessionGuard } from \\\"@/decorators/sessionGuard\\\";\\n\\n@prefix(\\\"poll\\\")\\nexport default class DatabasePollController {\\n  @get()\\n  @sessionGuard()\\n  static poll = withZod({\\n    preferTransformed: false,\\n    iteration: z.union([\\n      z.object({\\n        id: z.uuid(),\\n        entityType: z.enum(EntityType),\\n        __isDeleted: z.boolean().optional(),\\n      }),\\n      UserSchema,\\n      TaskSchema,\\n    ]),\\n    async handle(req) {\\n      const response = new JSONLinesResponse\u003c\\n        VovkIteration\u003ctypeof DatabasePollController.poll\u003e\\n      \u003e(req);\\n\\n      void DatabasePollService.poll(response);\\n\\n      return response;\\n    },\\n  });\\n}\\n\"}],\"owner\":\"finom\",\"repo\":\"vovk-kanban-demo\",\"ghRef\":\"main\",\"id\":\"_S_1_\"}],[\"$Lfa\",\"$Lfb\"]]}]\n"])</script><script>self.__next_f.push([1,"fc:T7c6,"])</script><script>self.__next_f.push([1,"import { EntityType } from \"../../../prisma/generated/client\";\nimport mitt from \"mitt\";\nimport { createClient } from \"redis\";\n\nexport type DBChange = {\n  id: string;\n  entityType: EntityType;\n  date: string;\n  type: \"create\" | \"update\" | \"delete\";\n};\n\nexport default class DatabaseEventsService {\n  public static readonly DB_KEY = \"db_updates\";\n\n  private static readonly INTERVAL = 1_000;\n  private static lastTimestamp = Date.now();\n\n  private static redisClient = createClient({\n    url: process.env.REDIS_URL,\n  });\n\n  public static emitter = mitt\u003c{\n    [DatabaseEventsService.DB_KEY]: DBChange[];\n  }\u003e();\n\n  // ensure Redis is connected\n  private static async connect() {\n    if (!this.redisClient.isOpen) {\n      await this.redisClient.connect();\n      this.redisClient.on(\"error\", (err) =\u003e {\n        console.error(\"Redis Client Error\", err);\n      });\n    }\n  }\n\n  // push one update into our ZSET, with score = timestamp\n  public static async createChanges(changes: DBChange[]) {\n    if (changes.length === 0) return;\n\n    await this.connect();\n\n    // build array of { score, value } objects\n    const entries = changes.map(({ id, entityType, type, date }) =\u003e ({\n      score: Date.now(),\n      value: JSON.stringify({ id, entityType, date, type }),\n    }));\n\n    // one multi(): batch ZADD + EXPIRE\n    await this.redisClient\n      .multi()\n      .zAdd(this.DB_KEY, entries)\n      .expire(this.DB_KEY, (this.INTERVAL * 60) / 1000)\n      .exec();\n  }\n\n  public static beginEmitting() {\n    setInterval(async () =\u003e {\n      await this.connect();\n\n      const now = Date.now();\n\n      // get everything with score âˆˆ (lastTimestamp, now]\n      const raw = await this.redisClient.zRangeByScore(\n        this.DB_KEY,\n        this.lastTimestamp + 1,\n        now,\n      );\n\n      this.lastTimestamp = now;\n\n      if (raw.length \u003e 0) {\n        const updates = raw.map((s) =\u003e JSON.parse(s) as DBChange);\n        this.emitter.emit(this.DB_KEY, updates);\n      }\n    }, this.INTERVAL);\n  }\n}\n"])</script><script>self.__next_f.push([1,"1e:[\"$\",\"div\",null,{\"className\":\"bg-code rounded-lg mt-4\",\"id\":\"_S_2_\",\"children\":[[\"$\",\"$Lf8\",null,{\"githubFiles\":[{\"path\":\"src/modules/database/DatabaseEventsService.ts\",\"content\":\"$fc\"}],\"owner\":\"finom\",\"repo\":\"vovk-kanban-demo\",\"ghRef\":\"main\",\"id\":\"_S_2_\"}],[[\"$\",\"div\",\"0\",{\"className\":\"h-full github-tab-content \",\"id\":\"tab-_S_2_-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"border dark:!border-gray-800 text-sm\",\"children\":[[\"$\",\"div\",null,{\"data-theme\":\"dark\",\"className\":\"hidden dark:block\",\"children\":\"$Lfd\"}],\" \",[\"$\",\"div\",null,{\"data-theme\":\"light\",\"className\":\"dark:hidden\",\"children\":\"$Lfe\"}]]}],[\"$\",\"$Le\",null,{\"href\":\"https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabaseEventsService.ts\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"View \",\"DatabaseEventsService.ts\",\" file on GitHub\",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":\"1.7\",\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]}]]}]]]}]\nff:Td76,"])</script><script>self.__next_f.push([1,"import { PrismaClient } from \"../../../prisma/generated/client\";\nimport { PrismaNeon } from \"@prisma/adapter-neon\";\nimport { neonConfig } from \"@neondatabase/serverless\";\nimport DatabaseEventsService, { type DBChange } from \"./DatabaseEventsService\";\nimport type { BaseEntity } from \"@/types\";\n\nif (!process.env.VERCEL_ENV) {\n  neonConfig.wsProxy = (host) =\u003e `${host}:5433/v1`;\n  neonConfig.useSecureWebSocket = false;\n  neonConfig.pipelineTLS = false;\n  neonConfig.pipelineConnect = false;\n}\n\nexport default class DatabaseService {\n  static get prisma() {\n    return (this.#prisma ??= this.getClient());\n  }\n  static #prisma: ReturnType\u003ctypeof DatabaseService.getClient\u003e | null = null;\n\n  private static getClient() {\n    const prisma = new PrismaClient({\n      adapter: new PrismaNeon({\n        connectionString: `${process.env.DATABASE_URL}`,\n      }),\n    });\n\n    DatabaseEventsService.beginEmitting();\n\n    return prisma.$extends({\n      name: \"events\",\n      query: {\n        $allModels: {\n          async $allOperations({ model, operation, args, query }) {\n            const allowedOperations = [\n              \"create\",\n              \"update\",\n              \"delete\",\n              \"findMany\",\n              \"findUnique\",\n              \"findFirst\",\n              \"count\",\n            ] as const;\n            type AllowedOperation = (typeof allowedOperations)[number];\n            if (!allowedOperations.includes(operation as AllowedOperation)) {\n              throw new Error(\n                `Unsupported database operation \"${operation}\" on model \"${model}\"`,\n              );\n            }\n            const result = (await query(args)) as BaseEntity | BaseEntity[];\n\n            const now = new Date().toISOString();\n            let change: DBChange | null = null;\n\n            const makeChange = (\n              entity: BaseEntity,\n              type: DBChange[\"type\"],\n            ) =\u003e ({\n              id: entity.id,\n              entityType: entity.entityType,\n              date:\n                type === \"delete\"\n                  ? now\n                  : entity.updatedAt\n                    ? new Date(entity.updatedAt).toISOString()\n                    : now,\n              type,\n            });\n\n            switch (operation as AllowedOperation) {\n              case \"create\":\n                if (\"entityType\" in result)\n                  change = makeChange(result, \"create\");\n                break;\n\n              case \"update\":\n                if (\"entityType\" in result)\n                  change = makeChange(result, \"update\");\n                break;\n\n              case \"delete\":\n                if (\"entityType\" in result) {\n                  change = makeChange(result, \"delete\");\n                  // Automatically add __isDeleted flag to deletion results\n                  Object.assign(result, { __isDeleted: true });\n                }\n                break;\n\n              case \"findMany\":\n              case \"findUnique\":\n              case \"findFirst\":\n              case \"count\":\n                // no events\n                break;\n\n              default:\n                console.warn(\n                  `Unhandled Prisma operation: ${operation} for model: ${model}`,\n                );\n                break;\n            }\n\n            if (change) {\n              await DatabaseEventsService.createChanges([change]);\n            }\n\n            return result;\n          },\n        },\n      },\n    });\n  }\n}\n"])</script><script>self.__next_f.push([1,"16:[\"$\",\"div\",null,{\"className\":\"bg-code rounded-lg mt-4\",\"id\":\"_S_3_\",\"children\":[[\"$\",\"$Lf8\",null,{\"githubFiles\":[{\"path\":\"src/modules/database/DatabaseService.ts\",\"content\":\"$ff\"}],\"owner\":\"finom\",\"repo\":\"vovk-kanban-demo\",\"ghRef\":\"main\",\"id\":\"_S_3_\"}],[\"$L100\"]]}]\n"])</script><script>self.__next_f.push([1,"fa:[\"$\",\"div\",\"0\",{\"className\":\"h-full github-tab-content \",\"id\":\"tab-_S_1_-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"border dark:!border-gray-800 text-sm\",\"children\":[[\"$\",\"div\",null,{\"data-theme\":\"dark\",\"className\":\"hidden dark:block\",\"children\":\"$L101\"}],\" \",[\"$\",\"div\",null,{\"data-theme\":\"light\",\"className\":\"dark:hidden\",\"children\":\"$L102\"}]]}],[\"$\",\"$Le\",null,{\"href\":\"https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabasePollService.ts\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"View \",\"DatabasePollService.ts\",\" file on GitHub\",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":\"1.7\",\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]}]]}]\nfb:[\"$\",\"div\",\"1\",{\"className\":\"h-full github-tab-content hidden\",\"id\":\"tab-_S_1_-1\",\"children\":[[\"$\",\"div\",null,{\"className\":\"border dark:!border-gray-800 text-sm\",\"children\":[[\"$\",\"div\",null,{\"data-theme\":\"dark\",\"className\":\"hidden dark:block\",\"children\":\"$L103\"}],\" \",[\"$\",\"div\",null,{\"data-theme\":\"light\",\"className\":\"dark:hidden\",\"children\":\"$L104\"}]]}],[\"$\",\"$Le\",null,{\"href\":\"https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabasePollController.ts\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"View \",\"DatabasePollController.ts\",\" file on GitHub\",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":\"1.7\",\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]}]]}]\n100:[\"$\",\"div\",\"0\",{\"className\":\"h-full github-tab-content \",\"id\":\"tab-_S_3_-0\",\"children\":[[\"$\",\"div\",null,{\"className\":\"border dark:!border-gray-800 text-sm\",\"children\":[[\"$\",\"div\",null,{\"data-theme\":\"dark\",\"className\":\"hidden dark:block\",\"children\":\"$L105\"}],\" \",[\"$\",\"div\",null,{\"data-theme\":\"light\",\"className\":\"dark:hidden\",\"children\":\"$L106\"}]]}],[\"$\",\"$Le\",null,{\"href\":\"https://github.com/finom/vovk-kanban-demo/blob/main/src/modules/database/DatabaseService.ts\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"block mt-2 x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]\",\"children\":[\"View \",\"DatabaseService.ts\",\" file on GitHub\",[\"$\",\"svg\",null,{\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":\"1.7\",\"viewBox\":\"0 0 24 24\",\"height\":\"1em\",\"className\":\"x:inline x:align-baseline x:shrink-0\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M7 17L17 7\"}],[\"$\",\"path\",null,{\"d\":\"M7 7h10v10\"}]]}]]}]]}]\nfd:[\"$L107\",\"$L108\"]\nfe:[\"$L109\",\"$L10a\"]\n"])</script><script>self.__next_f.push([1,"101:[\"$L10b\",\"$L10c\"]\n102:[\"$L10d\",\"$L10e\"]\n103:[\"$L10f\",\"$L110\"]\n104:[\"$L111\",\"$L112\"]\n105:[\"$L113\",\"$L114\"]\n106:[\"$L115\",\"$L116\"]\n"])</script><script>self.__next_f.push([1,"107:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" mitt \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"mitt\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { createClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"redis\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  id\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  entityType\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"EntityType\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  date\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],\"$L117\",\"$L118\",\"$L119\",\"$L11a\",\"$L11b\",\"$L11c\"],\"$L11d\"]}]}],\"$L11e\",\"$L11f\",\"$L120\",\"$L121\",\"$L122\",\"$L123\",\"$L124\",\"$L125\",\"$L126\",\"$L127\",\"$L128\",\"$L129\",\"$L12a\",\"$L12b\",\"$L12c\",\"$L12d\",\"$L12e\",\"$L12f\",\"$L130\",\"$L131\",\"$L132\",\"$L133\",\"$L134\",\"$L135\",\"$L136\",\"$L137\",\"$L138\",\"$L139\",\"$L13a\",\"$L13b\",\"$L13c\",\"$L13d\",\"$L13e\",\"$L13f\",\"$L140\",\"$L141\",\"$L142\",\"$L143\",\"$L144\",\"$L145\",\"$L146\",\"$L147\",\"$L148\",\"$L149\",\"$L14a\",\"$L14b\",\"$L14c\",\"$L14d\",\"$L14e\",\"$L14f\",\"$L150\",\"$L151\",\"$L152\",\"$L153\",\"$L154\",\"$L155\",\"$L156\",\"$L157\",\"$L158\",\"$L159\",\"$L15a\",\"$L15b\",\"$L15c\",\"$L15d\",\"$L15e\",\"$L15f\",\"$L160\",\"$L161\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"108:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" mitt \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"mitt\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { createClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"redis\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  id\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  entityType\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"EntityType\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  date\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  type\"}],\"$L162\",\"$L163\",\"$L164\",\"$L165\",\"$L166\",\"$L167\",\"$L168\"],\"$L169\"]}]}],\"$L16a\",\"$L16b\",\"$L16c\",\"$L16d\",\"$L16e\",\"$L16f\",\"$L170\",\"$L171\",\"$L172\",\"$L173\",\"$L174\",\"$L175\",\"$L176\",\"$L177\",\"$L178\",\"$L179\",\"$L17a\",\"$L17b\",\"$L17c\",\"$L17d\",\"$L17e\",\"$L17f\",\"$L180\",\"$L181\",\"$L182\",\"$L183\",\"$L184\",\"$L185\",\"$L186\",\"$L187\",\"$L188\",\"$L189\",\"$L18a\",\"$L18b\",\"$L18c\",\"$L18d\",\"$L18e\",\"$L18f\",\"$L190\",\"$L191\",\"$L192\",\"$L193\",\"$L194\",\"$L195\",\"$L196\",\"$L197\",\"$L198\",\"$L199\",\"$L19a\",\"$L19b\",\"$L19c\",\"$L19d\",\"$L19e\",\"$L19f\",\"$L1a0\",\"$L1a1\",\"$L1a2\",\"$L1a3\",\"$L1a4\",\"$L1a5\",\"$L1a6\",\"$L1a7\",\"$L1a8\",\"$L1a9\",\"$L1aa\",\"$L1ab\",\"$L1ac\",\"$L1ad\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"109:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" mitt \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"mitt\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { createClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"redis\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  id\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  entityType\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"EntityType\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  date\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],\"$L1ae\",\"$L1af\",\"$L1b0\",\"$L1b1\",\"$L1b2\",\"$L1b3\"],\"$L1b4\"]}]}],\"$L1b5\",\"$L1b6\",\"$L1b7\",\"$L1b8\",\"$L1b9\",\"$L1ba\",\"$L1bb\",\"$L1bc\",\"$L1bd\",\"$L1be\",\"$L1bf\",\"$L1c0\",\"$L1c1\",\"$L1c2\",\"$L1c3\",\"$L1c4\",\"$L1c5\",\"$L1c6\",\"$L1c7\",\"$L1c8\",\"$L1c9\",\"$L1ca\",\"$L1cb\",\"$L1cc\",\"$L1cd\",\"$L1ce\",\"$L1cf\",\"$L1d0\",\"$L1d1\",\"$L1d2\",\"$L1d3\",\"$L1d4\",\"$L1d5\",\"$L1d6\",\"$L1d7\",\"$L1d8\",\"$L1d9\",\"$L1da\",\"$L1db\",\"$L1dc\",\"$L1dd\",\"$L1de\",\"$L1df\",\"$L1e0\",\"$L1e1\",\"$L1e2\",\"$L1e3\",\"$L1e4\",\"$L1e5\",\"$L1e6\",\"$L1e7\",\"$L1e8\",\"$L1e9\",\"$L1ea\",\"$L1eb\",\"$L1ec\",\"$L1ed\",\"$L1ee\",\"$L1ef\",\"$L1f0\",\"$L1f1\",\"$L1f2\",\"$L1f3\",\"$L1f4\",\"$L1f5\",\"$L1f6\",\"$L1f7\",\"$L1f8\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"10a:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" mitt \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"mitt\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { createClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"redis\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  id\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  entityType\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"EntityType\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  date\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"string\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  type\"}],\"$L1f9\",\"$L1fa\",\"$L1fb\",\"$L1fc\",\"$L1fd\",\"$L1fe\",\"$L1ff\"],\"$L200\"]}]}],\"$L201\",\"$L202\",\"$L203\",\"$L204\",\"$L205\",\"$L206\",\"$L207\",\"$L208\",\"$L209\",\"$L20a\",\"$L20b\",\"$L20c\",\"$L20d\",\"$L20e\",\"$L20f\",\"$L210\",\"$L211\",\"$L212\",\"$L213\",\"$L214\",\"$L215\",\"$L216\",\"$L217\",\"$L218\",\"$L219\",\"$L21a\",\"$L21b\",\"$L21c\",\"$L21d\",\"$L21e\",\"$L21f\",\"$L220\",\"$L221\",\"$L222\",\"$L223\",\"$L224\",\"$L225\",\"$L226\",\"$L227\",\"$L228\",\"$L229\",\"$L22a\",\"$L22b\",\"$L22c\",\"$L22d\",\"$L22e\",\"$L22f\",\"$L230\",\"$L231\",\"$L232\",\"$L233\",\"$L234\",\"$L235\",\"$L236\",\"$L237\",\"$L238\",\"$L239\",\"$L23a\",\"$L23b\",\"$L23c\",\"$L23d\",\"$L23e\",\"$L23f\",\"$L240\",\"$L241\",\"$L242\",\"$L243\",\"$L244\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"117:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\" \"}]\n118:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}]\n119:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\" \"}]\n11a:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}]\n11b:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}]\n11c:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]\n11d:[\"$\",\"br\",null,{}]\n11e:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"};\"}]],[\"$\",\"br\",null,{}]]}]}]\n11f:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n120:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabaseEventsService {\"}]],[\"$\",\"br\",null,{}]]}]}]\n121:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DB_KEY \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"db_updates\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n122:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n123:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" INTERVAL \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1_000\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n124:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n125:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n126:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" redisClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children"])</script><script>self.__next_f.push([1,"\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n127:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    url: process.env.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"REDIS_URL\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n128:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n129:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n12a:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" emitter \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"mitt\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003c{\"}]],[\"$\",\"br\",null,{}]]}]}]\n12b:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"    [\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabaseEventsService\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"]\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DBChange[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n12c:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  }\u003e();\"}]],[\"$\",\"br\",null,{}]]}]}]\n12d:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n12e:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"  // ensure Redis is connected\"}]],[\"$\",\"br\",null,{}]]}]}]\n12f:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n130:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.isOpen) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n131:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"sty"])</script><script>self.__next_f.push([1,"le\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n132:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"on\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"error\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"err\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n133:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"Redis Client Error\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", err);\"}]],[\"$\",\"br\",null,{}]]}]}]\n134:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      });\"}]],[\"$\",\"br\",null,{}]]}]}]\n135:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }\"}]],[\"$\",\"br\",null,{}]]}]}]\n136:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n137:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n138:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"  // push one update into our ZSET, with score = timestamp\"}]],[\"$\",\"br\",null,{}]]}]}]\n139:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(changes\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DBChange[]) \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n13a:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (changes.\"}],[\"$\",\"span\",\"2"])</script><script>self.__next_f.push([1,"\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"return\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n13b:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n13c:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n13d:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n13e:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // build array of { score, value } objects\"}]],[\"$\",\"br\",null,{}]]}]}]\n13f:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"entries \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(({ \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"id\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"entityType\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"type\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"date\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" }) \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n140:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      score: Date.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n141:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      value: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"stringify\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({ id, entityType, date, type }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n142:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"chil"])</script><script>self.__next_f.push([1,"dren\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }));\"}]],[\"$\",\"br\",null,{}]]}]}]\n143:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n144:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // one multi(): batch ZADD + EXPIRE\"}]],[\"$\",\"br\",null,{}]]}]}]\n145:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient\"}]],[\"$\",\"br\",null,{}]]}]}]\n146:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"multi\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n147:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"zAdd\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", entries)\"}]],[\"$\",\"br\",null,{}]]}]}]\n148:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"expire\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", (\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"INTERVAL \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"* \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"60\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"/ \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1000\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n149:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"exec\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n14a:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n14b:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data"])</script><script>self.__next_f.push([1,"-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n14c:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n14d:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"    setInterval\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"async\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" () \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n14e:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n14f:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n150:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" Date.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n151:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n152:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"      // get everything with score âˆˆ (lastTimestamp, now]\"}]],[\"$\",\"br\",null,{}]]}]}]\n153:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"raw \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= await \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"zRangeByScore\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n154:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C"])</script><script>self.__next_f.push([1,"9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n155:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"2ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"+ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n156:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"2ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n157:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"2ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      );\"}]],[\"$\",\"br\",null,{}]]}]}]\n158:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"2ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n159:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"2ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now;\"}]],[\"$\",\"br\",null,{}]]}]}]\n15a:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"2ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n15b:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"2ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (raw.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n15c:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"2ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"updates \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" raw.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"s\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"parse\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(s) \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n15d:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},"])</script><script>self.__next_f.push([1,"\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"2ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".emitter.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"emit\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", updates);\"}]],[\"$\",\"br\",null,{}]]}]}]\n15e:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"2ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }\"}]],[\"$\",\"br\",null,{}]]}]}]\n15f:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"2ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }, \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"INTERVAL\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n160:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"2ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n161:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"2ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n162:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}]\n163:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\" \"}]\n164:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}]\n165:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\" \"}]\n166:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}]\n167:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}]\n168:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]\n169:[\"$\",\"br\",null,{}]\n16a:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"};\"}]],[\"$\",\"br\",null,{}]]}]}]\n16b:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n16c:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabaseEventsService {\"}]],[\"$\",\"br\",null,{}]]}]}]\n16d:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DB_KEY \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"db_updates\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n16e:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\""])</script><script>self.__next_f.push([1,"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n16f:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" INTERVAL \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1_000\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n170:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n171:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n172:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" redisClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n173:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    url: process.env.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"REDIS_URL\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n174:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n175:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n176:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" emitter \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"mitt\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003c{\"}]],[\"$\",\"br\",null,{}]]}]}]\n177:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"    [\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabaseEventsService\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"]\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\""])</script><script>self.__next_f.push([1,":\":\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DBChange[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n178:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  }\u003e();\"}]],[\"$\",\"br\",null,{}]]}]}]\n179:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n17a:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"  // ensure Redis is connected\"}]],[\"$\",\"br\",null,{}]]}]}]\n17b:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n17c:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.isOpen) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n17d:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n17e:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"on\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"error\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"err\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n17f:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"Redis Client Error\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", err);\"}]],[\"$\",\"br\",null,{}]]}]}]\n180:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      });\"}]],[\"$\""])</script><script>self.__next_f.push([1,",\"br\",null,{}]]}]}]\n181:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }\"}]],[\"$\",\"br\",null,{}]]}]}]\n182:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n183:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n184:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"  // push one update into our ZSET, with score = timestamp\"}]],[\"$\",\"br\",null,{}]]}]}]\n185:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(changes\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DBChange[]) \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n186:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (changes.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"return\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n187:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n188:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n189:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n18a:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // build array of { score, value } objects\"}]],[\"$\",\"br\",null,{}]]}]}]\n18b:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"entries \"}],[\"$\",\"spa"])</script><script>self.__next_f.push([1,"n\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(({ \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"id\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"entityType\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#953800\"},\"children\":\"type\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#953800\"},\"children\":\"date\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" }) \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n18c:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      score: Date.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n18d:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      value: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"stringify\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({ id, entityType, date, type }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n18e:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }));\"}]],[\"$\",\"br\",null,{}]]}]}]\n18f:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n190:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // one multi(): batch ZADD + EXPIRE\"}]],[\"$\",\"br\",null,{}]]}]}]\n191:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient\"}]],[\"$\",\"br\",null,{}]]}]}]\n192:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"multi\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n193:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"zAdd\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"}"])</script><script>self.__next_f.push([1,",\"children\":\", entries)\"}]],[\"$\",\"br\",null,{}]]}]}]\n194:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"expire\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", (\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"INTERVAL \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"* \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"60\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"/ \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1000\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n195:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"exec\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n196:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n197:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n198:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n199:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"    setInterval\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"async\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" () \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n19a:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n19b:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n19c:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"sp"])</script><script>self.__next_f.push([1,"an\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" Date.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n19d:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n19e:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"      // get everything with score âˆˆ (lastTimestamp, now]\"}]],[\"$\",\"br\",null,{}]]}]}]\n19f:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"raw \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= await \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"zRangeByScore\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a0:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a1:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"2ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"+ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a2:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"2ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a3:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"2ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      );\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a4:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"2ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a5:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"2ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now;\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a6:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\""])</script><script>self.__next_f.push([1,":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"2ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a7:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"2ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (raw.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a8:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"2ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"updates \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" raw.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"s\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"parse\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(s) \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n1a9:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"2ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".emitter.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"emit\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", updates);\"}]],[\"$\",\"br\",null,{}]]}]}]\n1aa:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"2ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ab:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"2ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }, \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"INTERVAL\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ac:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"2ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ad:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"2ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ae:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\" \""])</script><script>self.__next_f.push([1,"}]\n1af:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}]\n1b0:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\" \"}]\n1b1:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}]\n1b2:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}]\n1b3:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]\n1b4:[\"$\",\"br\",null,{}]\n1b5:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"};\"}]],[\"$\",\"br\",null,{}]]}]}]\n1b6:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1b7:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabaseEventsService {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1b8:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DB_KEY \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"db_updates\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n1b9:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ba:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" INTERVAL \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1_000\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n1bb:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1bc:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1bd:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" redisClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n1be:[\"$\",\"div\",\"18\",{\"style\":{\"padding\""])</script><script>self.__next_f.push([1,":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    url: process.env.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"REDIS_URL\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n1bf:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c0:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c1:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" emitter \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"mitt\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003c{\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c2:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"    [\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabaseEventsService\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"]\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DBChange[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c3:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  }\u003e();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c4:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c5:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"  // ensure Redis is connected\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c6:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c7:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.isOpen) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c8:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#"])</script><script>self.__next_f.push([1,"FF7B72\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1c9:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"on\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"error\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"err\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ca:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"Redis Client Error\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", err);\"}]],[\"$\",\"br\",null,{}]]}]}]\n1cb:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      });\"}]],[\"$\",\"br\",null,{}]]}]}]\n1cc:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1cd:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ce:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1cf:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"  // push one update into our ZSET, with score = timestamp\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d0:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(changes\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DBChange[]) \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d1:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (changes.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"s"])</script><script>self.__next_f.push([1,"tyle\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"return\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d2:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d3:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d4:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d5:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // build array of { score, value } objects\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d6:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"entries \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(({ \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"id\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"entityType\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"type\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"date\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" }) \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d7:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      score: Date.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d8:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      value: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"stringify\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({ id, entityType, date, type }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n1d9:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    "])</script><script>self.__next_f.push([1,"}));\"}]],[\"$\",\"br\",null,{}]]}]}]\n1da:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1db:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // one multi(): batch ZADD + EXPIRE\"}]],[\"$\",\"br\",null,{}]]}]}]\n1dc:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient\"}]],[\"$\",\"br\",null,{}]]}]}]\n1dd:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"multi\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n1de:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"zAdd\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", entries)\"}]],[\"$\",\"br\",null,{}]]}]}]\n1df:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"expire\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", (\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"INTERVAL \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"* \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"60\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"/ \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1000\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e0:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"exec\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e1:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e2:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{"])</script><script>self.__next_f.push([1,"\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e3:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  public static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e4:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"    setInterval\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"async\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" () \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e5:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e6:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e7:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" Date.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"now\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e8:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1e9:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"      // get everything with score âˆˆ (lastTimestamp, now]\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ea:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"raw \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= await \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"zRangeByScore\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n1eb:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"ch"])</script><script>self.__next_f.push([1,"ildren\":\"DB_KEY\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ec:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"2ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"+ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ed:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"2ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ee:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"2ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      );\"}]],[\"$\",\"br\",null,{}]]}]}]\n1ef:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"2ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f0:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"2ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now;\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f1:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"2ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f2:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"2ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (raw.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f3:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"2ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"updates \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" raw.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"s\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"parse\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(s) \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f4:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-l"])</script><script>self.__next_f.push([1,"n\":73,\"style\":{\"width\":\"2ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".emitter.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"emit\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", updates);\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f5:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"2ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f6:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"2ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }, \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"INTERVAL\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f7:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"2ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f8:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"2ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n1f9:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}]\n1fa:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\" \"}]\n1fb:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}]\n1fc:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\" \"}]\n1fd:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}]\n1fe:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}]\n1ff:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]\n200:[\"$\",\"br\",null,{}]\n201:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"};\"}]],[\"$\",\"br\",null,{}]]}]}]\n202:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n203:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabaseEventsService {\"}]],[\"$\",\"br\",null,{}]]}]}]\n204:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DB_KEY \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"db_updates\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n205:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"206:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static readonly\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" INTERVAL \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1_000\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n207:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n208:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n209:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" redisClient \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n20a:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    url: process.env.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"REDIS_URL\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n20b:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n20c:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n20d:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" emitter \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"mitt\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003c{\"}]],[\"$\",\"br\",null,{}]]}]}]\n20e:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"    [\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabaseEventsService\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"]\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DBChange"])</script><script>self.__next_f.push([1,"[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n20f:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  }\u003e();\"}]],[\"$\",\"br\",null,{}]]}]}]\n210:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n211:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"  // ensure Redis is connected\"}]],[\"$\",\"br\",null,{}]]}]}]\n212:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n213:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.isOpen) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n214:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n215:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"on\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"error\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"err\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n216:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"Redis Client Error\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", err);\"}]],[\"$\",\"br\",null,{}]]}]}]\n217:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      });\"}]],[\"$\",\"br\",null,{}]]}]}]\n218:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"chi"])</script><script>self.__next_f.push([1,"ldren\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }\"}]],[\"$\",\"br\",null,{}]]}]}]\n219:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n21a:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n21b:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"  // push one update into our ZSET, with score = timestamp\"}]],[\"$\",\"br\",null,{}]]}]}]\n21c:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(changes\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DBChange[]) \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n21d:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (changes.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"return\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n21e:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n21f:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n220:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n221:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // build array of { score, value } objects\"}]],[\"$\",\"br\",null,{}]]}]}]\n222:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"entries \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"st"])</script><script>self.__next_f.push([1,"yle\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(({ \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"id\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"entityType\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#953800\"},\"children\":\"type\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#953800\"},\"children\":\"date\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" }) \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n223:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      score: Date.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n224:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      value: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"stringify\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({ id, entityType, date, type }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n225:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }));\"}]],[\"$\",\"br\",null,{}]]}]}]\n226:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n227:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // one multi(): batch ZADD + EXPIRE\"}]],[\"$\",\"br\",null,{}]]}]}]\n228:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient\"}]],[\"$\",\"br\",null,{}]]}]}]\n229:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"multi\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n22a:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"zAdd\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", entries)\"}]],[\"$\",\"br\",null,{}]]}]}]\n22b:[\"$\",\"div\",\"51\",{"])</script><script>self.__next_f.push([1,"\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"expire\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", (\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"INTERVAL \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"* \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"60\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"/ \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1000\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n22c:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"exec\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n22d:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n22e:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n22f:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  public static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n230:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"    setInterval\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"async\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" () \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n231:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      await \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"connect\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n232:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n233:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"wid"])</script><script>self.__next_f.push([1,"th\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" Date.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"now\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n234:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n235:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"      // get everything with score âˆˆ (lastTimestamp, now]\"}]],[\"$\",\"br\",null,{}]]}]}]\n236:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"raw \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= await \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".redisClient.\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"zRangeByScore\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n237:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n238:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"2ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"+ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"1\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n239:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"2ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n23a:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"2ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      );\"}]],[\"$\",\"br\",null,{}]]}]}]\n23b:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"2ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n23c:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"2ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"      this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".lastTimestamp \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now;\"}]],[\"$\",\"br\",null,{}]]}]}]\n23d:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"2ch\"},\"children"])</script><script>self.__next_f.push([1,"\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n23e:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"2ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (raw.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"length \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n23f:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"2ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"updates \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" raw.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"map\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"s\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"JSON\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"parse\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(s) \"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"14\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"15\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n240:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"2ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"        this\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".emitter.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"emit\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", updates);\"}]],[\"$\",\"br\",null,{}]]}]}]\n241:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"2ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }\"}]],[\"$\",\"br\",null,{}]]}]}]\n242:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"2ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }, \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"INTERVAL\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n243:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"2ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n244:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"2ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"10b:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { JSONLinesResponse, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { forEach, groupBy } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"lodash\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollController \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabasePollController\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" PollService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static \"}],\"$L245\",\"$L246\"],\"$L247\"]}]}],\"$L248\",\"$L249\",\"$L24a\",\"$L24b\",\"$L24c\",\"$L24d\",\"$L24e\",\"$L24f\",\"$L250\",\"$L251\",\"$L252\",\"$L253\",\"$L254\",\"$L255\",\"$L256\",\"$L257\",\"$L258\",\"$L259\",\"$L25a\",\"$L25b\",\"$L25c\",\"$L25d\",\"$L25e\",\"$L25f\",\"$L260\",\"$L261\",\"$L262\",\"$L263\",\"$L264\",\"$L265\",\"$L266\",\"$L267\",\"$L268\",\"$L269\",\"$L26a\",\"$L26b\",\"$L26c\",\"$L26d\",\"$L26e\",\"$L26f\",\"$L270\",\"$L271\",\"$L272\",\"$L273\",\"$L274\",\"$L275\",\"$L276\",\"$L277\",\"$L278\",\"$L279\",\"$L27a\",\"$L27b\",\"$L27c\",\"$L27d\",\"$L27e\",\"$L27f\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"10c:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { JSONLinesResponse, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { forEach, groupBy } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"lodash\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollController \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabasePollController\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" PollService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static \"}],\"$L280\",\"$L281\"],\"$L282\"]}]}],\"$L283\",\"$L284\",\"$L285\",\"$L286\",\"$L287\",\"$L288\",\"$L289\",\"$L28a\",\"$L28b\",\"$L28c\",\"$L28d\",\"$L28e\",\"$L28f\",\"$L290\",\"$L291\",\"$L292\",\"$L293\",\"$L294\",\"$L295\",\"$L296\",\"$L297\",\"$L298\",\"$L299\",\"$L29a\",\"$L29b\",\"$L29c\",\"$L29d\",\"$L29e\",\"$L29f\",\"$L2a0\",\"$L2a1\",\"$L2a2\",\"$L2a3\",\"$L2a4\",\"$L2a5\",\"$L2a6\",\"$L2a7\",\"$L2a8\",\"$L2a9\",\"$L2aa\",\"$L2ab\",\"$L2ac\",\"$L2ad\",\"$L2ae\",\"$L2af\",\"$L2b0\",\"$L2b1\",\"$L2b2\",\"$L2b3\",\"$L2b4\",\"$L2b5\",\"$L2b6\",\"$L2b7\",\"$L2b8\",\"$L2b9\",\"$L2ba\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"10d:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { JSONLinesResponse, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { forEach, groupBy } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"lodash\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollController \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabasePollController\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" PollService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static \"}],\"$L2bb\",\"$L2bc\"],\"$L2bd\"]}]}],\"$L2be\",\"$L2bf\",\"$L2c0\",\"$L2c1\",\"$L2c2\",\"$L2c3\",\"$L2c4\",\"$L2c5\",\"$L2c6\",\"$L2c7\",\"$L2c8\",\"$L2c9\",\"$L2ca\",\"$L2cb\",\"$L2cc\",\"$L2cd\",\"$L2ce\",\"$L2cf\",\"$L2d0\",\"$L2d1\",\"$L2d2\",\"$L2d3\",\"$L2d4\",\"$L2d5\",\"$L2d6\",\"$L2d7\",\"$L2d8\",\"$L2d9\",\"$L2da\",\"$L2db\",\"$L2dc\",\"$L2dd\",\"$L2de\",\"$L2df\",\"$L2e0\",\"$L2e1\",\"$L2e2\",\"$L2e3\",\"$L2e4\",\"$L2e5\",\"$L2e6\",\"$L2e7\",\"$L2e8\",\"$L2e9\",\"$L2ea\",\"$L2eb\",\"$L2ec\",\"$L2ed\",\"$L2ee\",\"$L2ef\",\"$L2f0\",\"$L2f1\",\"$L2f2\",\"$L2f3\",\"$L2f4\",\"$L2f5\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"10e:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { JSONLinesResponse, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { forEach, groupBy } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"lodash\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollController \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabasePollController\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" PollService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static \"}],\"$L2f6\",\"$L2f7\"],\"$L2f8\"]}]}],\"$L2f9\",\"$L2fa\",\"$L2fb\",\"$L2fc\",\"$L2fd\",\"$L2fe\",\"$L2ff\",\"$L300\",\"$L301\",\"$L302\",\"$L303\",\"$L304\",\"$L305\",\"$L306\",\"$L307\",\"$L308\",\"$L309\",\"$L30a\",\"$L30b\",\"$L30c\",\"$L30d\",\"$L30e\",\"$L30f\",\"$L310\",\"$L311\",\"$L312\",\"$L313\",\"$L314\",\"$L315\",\"$L316\",\"$L317\",\"$L318\",\"$L319\",\"$L31a\",\"$L31b\",\"$L31c\",\"$L31d\",\"$L31e\",\"$L31f\",\"$L320\",\"$L321\",\"$L322\",\"$L323\",\"$L324\",\"$L325\",\"$L326\",\"$L327\",\"$L328\",\"$L329\",\"$L32a\",\"$L32b\",\"$L32c\",\"$L32d\",\"$L32e\",\"$L32f\",\"$L330\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"10f:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { get, JSONLinesResponse, prefix, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { z } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabasePollService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { TaskSchema, UserSchema } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/schemas\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { withZod } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/lib/withZod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { sessionGuard } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],\"$L331\",\"$L332\"],\"$L333\"]}]}],\"$L334\",\"$L335\",\"$L336\",\"$L337\",\"$L338\",\"$L339\",\"$L33a\",\"$L33b\",\"$L33c\",\"$L33d\",\"$L33e\",\"$L33f\",\"$L340\",\"$L341\",\"$L342\",\"$L343\",\"$L344\",\"$L345\",\"$L346\",\"$L347\",\"$L348\",\"$L349\",\"$L34a\",\"$L34b\",\"$L34c\",\"$L34d\",\"$L34e\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"110:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { get, JSONLinesResponse, prefix, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { z } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabasePollService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { TaskSchema, UserSchema } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/schemas\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { withZod } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/lib/withZod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { sessionGuard } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],\"$L34f\",\"$L350\"],\"$L351\"]}]}],\"$L352\",\"$L353\",\"$L354\",\"$L355\",\"$L356\",\"$L357\",\"$L358\",\"$L359\",\"$L35a\",\"$L35b\",\"$L35c\",\"$L35d\",\"$L35e\",\"$L35f\",\"$L360\",\"$L361\",\"$L362\",\"$L363\",\"$L364\",\"$L365\",\"$L366\",\"$L367\",\"$L368\",\"$L369\",\"$L36a\",\"$L36b\",\"$L36c\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"111:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { get, JSONLinesResponse, prefix, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { z } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabasePollService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { TaskSchema, UserSchema } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/schemas\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { withZod } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/lib/withZod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { sessionGuard } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],\"$L36d\",\"$L36e\"],\"$L36f\"]}]}],\"$L370\",\"$L371\",\"$L372\",\"$L373\",\"$L374\",\"$L375\",\"$L376\",\"$L377\",\"$L378\",\"$L379\",\"$L37a\",\"$L37b\",\"$L37c\",\"$L37d\",\"$L37e\",\"$L37f\",\"$L380\",\"$L381\",\"$L382\",\"$L383\",\"$L384\",\"$L385\",\"$L386\",\"$L387\",\"$L388\",\"$L389\",\"$L38a\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"112:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"2ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { EntityType } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"2ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { get, JSONLinesResponse, prefix, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" VovkIteration } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"vovk\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"2ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { z } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"2ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollService \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabasePollService\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"2ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { TaskSchema, UserSchema } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/schemas\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"2ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { withZod } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/lib/withZod\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"2ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { sessionGuard } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],\"$L38b\",\"$L38c\"],\"$L38d\"]}]}],\"$L38e\",\"$L38f\",\"$L390\",\"$L391\",\"$L392\",\"$L393\",\"$L394\",\"$L395\",\"$L396\",\"$L397\",\"$L398\",\"$L399\",\"$L39a\",\"$L39b\",\"$L39c\",\"$L39d\",\"$L39e\",\"$L39f\",\"$L3a0\",\"$L3a1\",\"$L3a2\",\"$L3a3\",\"$L3a4\",\"$L3a5\",\"$L3a6\",\"$L3a7\",\"$L3a8\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"113:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"3ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { PrismaClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"3ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { PrismaNeon } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@prisma/adapter-neon\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"3ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"3ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { BaseEntity } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/types\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"3ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"3ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabaseService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"3ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static get \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"3ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".#prisma \"}],\"$L3a9\",\"$L3aa\",\"$L3ab\",\"$L3ac\",\"$L3ad\"],\"$L3ae\"]}]}],\"$L3af\",\"$L3b0\",\"$L3b1\",\"$L3b2\",\"$L3b3\",\"$L3b4\",\"$L3b5\",\"$L3b6\",\"$L3b7\",\"$L3b8\",\"$L3b9\",\"$L3ba\",\"$L3bb\",\"$L3bc\",\"$L3bd\",\"$L3be\",\"$L3bf\",\"$L3c0\",\"$L3c1\",\"$L3c2\",\"$L3c3\",\"$L3c4\",\"$L3c5\",\"$L3c6\",\"$L3c7\",\"$L3c8\",\"$L3c9\",\"$L3ca\",\"$L3cb\",\"$L3cc\",\"$L3cd\",\"$L3ce\",\"$L3cf\",\"$L3d0\",\"$L3d1\",\"$L3d2\",\"$L3d3\",\"$L3d4\",\"$L3d5\",\"$L3d6\",\"$L3d7\",\"$L3d8\",\"$L3d9\",\"$L3da\",\"$L3db\",\"$L3dc\",\"$L3dd\",\"$L3de\",\"$L3df\",\"$L3e0\",\"$L3e1\",\"$L3e2\",\"$L3e3\",\"$L3e4\",\"$L3e5\",\"$L3e6\",\"$L3e7\",\"$L3e8\",\"$L3e9\",\"$L3ea\",\"$L3eb\",\"$L3ec\",\"$L3ed\",\"$L3ee\",\"$L3ef\",\"$L3f0\",\"$L3f1\",\"$L3f2\",\"$L3f3\",\"$L3f4\",\"$L3f5\",\"$L3f6\",\"$L3f7\",\"$L3f8\",\"$L3f9\",\"$L3fa\",\"$L3fb\",\"$L3fc\",\"$L3fd\",\"$L3fe\",\"$L3ff\",\"$L400\",\"$L401\",\"$L402\",\"$L403\",\"$L404\",\"$L405\",\"$L406\",\"$L407\",\"$L408\",\"$L409\",\"$L40a\",\"$L40b\",\"$L40c\",\"$L40d\",\"$L40e\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"114:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"3ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { PrismaClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"3ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { PrismaNeon } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@prisma/adapter-neon\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"3ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"3ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { BaseEntity } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/types\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"3ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"3ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabaseService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"3ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static get \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"3ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".#prisma \"}],\"$L40f\",\"$L410\",\"$L411\",\"$L412\",\"$L413\"],\"$L414\"]}]}],\"$L415\",\"$L416\",\"$L417\",\"$L418\",\"$L419\",\"$L41a\",\"$L41b\",\"$L41c\",\"$L41d\",\"$L41e\",\"$L41f\",\"$L420\",\"$L421\",\"$L422\",\"$L423\",\"$L424\",\"$L425\",\"$L426\",\"$L427\",\"$L428\",\"$L429\",\"$L42a\",\"$L42b\",\"$L42c\",\"$L42d\",\"$L42e\",\"$L42f\",\"$L430\",\"$L431\",\"$L432\",\"$L433\",\"$L434\",\"$L435\",\"$L436\",\"$L437\",\"$L438\",\"$L439\",\"$L43a\",\"$L43b\",\"$L43c\",\"$L43d\",\"$L43e\",\"$L43f\",\"$L440\",\"$L441\",\"$L442\",\"$L443\",\"$L444\",\"$L445\",\"$L446\",\"$L447\",\"$L448\",\"$L449\",\"$L44a\",\"$L44b\",\"$L44c\",\"$L44d\",\"$L44e\",\"$L44f\",\"$L450\",\"$L451\",\"$L452\",\"$L453\",\"$L454\",\"$L455\",\"$L456\",\"$L457\",\"$L458\",\"$L459\",\"$L45a\",\"$L45b\",\"$L45c\",\"$L45d\",\"$L45e\",\"$L45f\",\"$L460\",\"$L461\",\"$L462\",\"$L463\",\"$L464\",\"$L465\",\"$L466\",\"$L467\",\"$L468\",\"$L469\",\"$L46a\",\"$L46b\",\"$L46c\",\"$L46d\",\"$L46e\",\"$L46f\",\"$L470\",\"$L471\",\"$L472\",\"$L473\",\"$L474\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"115:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-dark\",\"data-bright-mode\":\"dark\",\"className\":\"$undefined\",\"style\":{\"color\":\"#c9d1d9\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#264F78\",\"--line-number-color\":\"#6e7681\",\"--tab-border\":\"#30363d\",\"--tab-background\":\"#0d1117\",\"--tab-color\":\"#c9d1d9\",\"--inactive-tab-background\":\"#010409\",\"--inactive-tab-color\":\"#8b949e\",\"--tab-top-border\":\"#f78166\",\"--tab-bottom-border\":\"#0d1117\",\"colorScheme\":\"dark\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"dark\\\"] { display: block }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"dark\\\"] { display: none }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#c9d1d9\",\"background\":\"#0d1117\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"3ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { PrismaClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"3ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { PrismaNeon } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@prisma/adapter-neon\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"3ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"3ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" { BaseEntity } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/types\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"3ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"3ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabaseService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"3ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static get \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"3ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".#prisma \"}],\"$L475\",\"$L476\",\"$L477\",\"$L478\",\"$L479\"],\"$L47a\"]}]}],\"$L47b\",\"$L47c\",\"$L47d\",\"$L47e\",\"$L47f\",\"$L480\",\"$L481\",\"$L482\",\"$L483\",\"$L484\",\"$L485\",\"$L486\",\"$L487\",\"$L488\",\"$L489\",\"$L48a\",\"$L48b\",\"$L48c\",\"$L48d\",\"$L48e\",\"$L48f\",\"$L490\",\"$L491\",\"$L492\",\"$L493\",\"$L494\",\"$L495\",\"$L496\",\"$L497\",\"$L498\",\"$L499\",\"$L49a\",\"$L49b\",\"$L49c\",\"$L49d\",\"$L49e\",\"$L49f\",\"$L4a0\",\"$L4a1\",\"$L4a2\",\"$L4a3\",\"$L4a4\",\"$L4a5\",\"$L4a6\",\"$L4a7\",\"$L4a8\",\"$L4a9\",\"$L4aa\",\"$L4ab\",\"$L4ac\",\"$L4ad\",\"$L4ae\",\"$L4af\",\"$L4b0\",\"$L4b1\",\"$L4b2\",\"$L4b3\",\"$L4b4\",\"$L4b5\",\"$L4b6\",\"$L4b7\",\"$L4b8\",\"$L4b9\",\"$L4ba\",\"$L4bb\",\"$L4bc\",\"$L4bd\",\"$L4be\",\"$L4bf\",\"$L4c0\",\"$L4c1\",\"$L4c2\",\"$L4c3\",\"$L4c4\",\"$L4c5\",\"$L4c6\",\"$L4c7\",\"$L4c8\",\"$L4c9\",\"$L4ca\",\"$L4cb\",\"$L4cc\",\"$L4cd\",\"$L4ce\",\"$L4cf\",\"$L4d0\",\"$L4d1\",\"$L4d2\",\"$L4d3\",\"$L4d4\",\"$L4d5\",\"$L4d6\",\"$L4d7\",\"$L4d8\",\"$L4d9\",\"$L4da\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"116:[\"$\",\"div\",null,{\"data-bright-theme\":\"github-light\",\"data-bright-mode\":\"light\",\"className\":\"$undefined\",\"style\":{\"color\":\"#24292f\",\"borderRadius\":\"4px\",\"overflow\":\"hidden\",\"margin\":\"1em 0\",\"--selection-background\":\"#ADD6FF\",\"--line-number-color\":\"#8c959f\",\"--tab-border\":\"#d0d7de\",\"--tab-background\":\"#ffffff\",\"--tab-color\":\"#24292f\",\"--inactive-tab-background\":\"#f6f8fa\",\"--inactive-tab-color\":\"#57606a\",\"--tab-top-border\":\"#fd8c73\",\"--tab-bottom-border\":\"#ffffff\",\"colorScheme\":\"light\"},\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"[data-bright-mode=\\\"light\\\"] { display: none }\\n[data-theme=\\\"light\\\"] [data-bright-mode=\\\"light\\\"] { display: block }\\n  [data-bright-theme] ::selection { background-color: var(--selection-background) }\\n  [data-bright-theme] [data-bright-ln] { \\n    color: var(--line-number-color); \\n    margin-right: 1.5ch; \\n    display: inline-block;\\n    text-align: right;\\n    user-select: none;\\n  }\\n  \"}}],\"$undefined\",[\"$\",\"pre\",null,{\"style\":{\"margin\":0,\"color\":\"#24292f\",\"background\":\"#ffffff\",\"padding\":\"1em 0\",\"overflow\":\"auto\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"display\":\"block\",\"minWidth\":\"fit-content\"},\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":1,\"style\":{\"width\":\"3ch\"},\"children\":1}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { PrismaClient } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"../../../prisma/generated/client\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"1\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":2,\"style\":{\"width\":\"3ch\"},\"children\":2}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { PrismaNeon } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@prisma/adapter-neon\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"2\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":3,\"style\":{\"width\":\"3ch\"},\"children\":3}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService, { \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"type\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DBChange } \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"./DatabaseEventsService\\\"\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"3\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":4,\"style\":{\"width\":\"3ch\"},\"children\":4}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"import type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" { BaseEntity } \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"from \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/types\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"4\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":5,\"style\":{\"width\":\"3ch\"},\"children\":5}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"5\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":6,\"style\":{\"width\":\"3ch\"},\"children\":6}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabaseService {\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"6\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":7,\"style\":{\"width\":\"3ch\"},\"children\":7}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static get \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}],[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"3ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".#prisma \"}],\"$L4db\",\"$L4dc\",\"$L4dd\",\"$L4de\",\"$L4df\"],\"$L4e0\"]}]}],\"$L4e1\",\"$L4e2\",\"$L4e3\",\"$L4e4\",\"$L4e5\",\"$L4e6\",\"$L4e7\",\"$L4e8\",\"$L4e9\",\"$L4ea\",\"$L4eb\",\"$L4ec\",\"$L4ed\",\"$L4ee\",\"$L4ef\",\"$L4f0\",\"$L4f1\",\"$L4f2\",\"$L4f3\",\"$L4f4\",\"$L4f5\",\"$L4f6\",\"$L4f7\",\"$L4f8\",\"$L4f9\",\"$L4fa\",\"$L4fb\",\"$L4fc\",\"$L4fd\",\"$L4fe\",\"$L4ff\",\"$L500\",\"$L501\",\"$L502\",\"$L503\",\"$L504\",\"$L505\",\"$L506\",\"$L507\",\"$L508\",\"$L509\",\"$L50a\",\"$L50b\",\"$L50c\",\"$L50d\",\"$L50e\",\"$L50f\",\"$L510\",\"$L511\",\"$L512\",\"$L513\",\"$L514\",\"$L515\",\"$L516\",\"$L517\",\"$L518\",\"$L519\",\"$L51a\",\"$L51b\",\"$L51c\",\"$L51d\",\"$L51e\",\"$L51f\",\"$L520\",\"$L521\",\"$L522\",\"$L523\",\"$L524\",\"$L525\",\"$L526\",\"$L527\",\"$L528\",\"$L529\",\"$L52a\",\"$L52b\",\"$L52c\",\"$L52d\",\"$L52e\",\"$L52f\",\"$L530\",\"$L531\",\"$L532\",\"$L533\",\"$L534\",\"$L535\",\"$L536\",\"$L537\",\"$L538\",\"$L539\",\"$L53a\",\"$L53b\",\"$L53c\",\"$L53d\",\"$L53e\",\"$L53f\",\"$L540\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"245:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"poll\"}]\n246:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(\"}]\n247:[\"$\",\"br\",null,{}]\n248:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"    resp\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" JSONLinesResponse\u003cVovkIteration\u003c\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabasePollController\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"poll\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003e\u003e,\"}]],[\"$\",\"br\",null,{}]]}]}]\n249:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n24a:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(resp.close, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"30_000\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n24b:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n24c:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" asOldAs \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n24d:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // 10 minutes ago; TODO: use latest update date from registry\"}]],[\"$\",\"br\",null,{}]]}]}]\n24e:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    asOldAs.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"setMinutes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(asOldAs.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getMinutes\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"- \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"10\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n24f:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n250:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    DatabaseEventsService.emitter.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\""])</script><script>self.__next_f.push([1,":\"#D2A8FF\"},\"children\":\"on\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n251:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n252:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"changes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n253:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"deleted \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n254:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"createdOrUpdated \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n255:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\" \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"||\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n256:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        );\"}]],[\"$\",\"br\",null,{}]]}]}]\n257:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"spa"])</script><script>self.__next_f.push([1,"n\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n258:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"deletedEntity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" deleted) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n259:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n25a:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            id: deletedEntity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n25b:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            entityType: deletedEntity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n25c:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            __isDeleted: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"true\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n25d:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          });\"}]],[\"$\",\"br\",null,{}]]}]}]\n25e:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        }\"}]],[\"$\",\"br\",null,{}]]}]}]\n25f:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]\"}]],[\"$\",\"br\",null,{}]]}]}]\n260:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"        forEach\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"groupBy\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(createdOrUpdated, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"), (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"changes\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n261:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\""])</script><script>self.__next_f.push([1,":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"maxDateItem \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"reduce\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n262:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"max\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n263:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"changeDate \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(change.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n264:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changeDate.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e new \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(max.date).\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n265:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change\"}]],[\"$\",\"br\",null,{}]]}]}]\n266:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" max;\"}]],[\"$\",\"br\",null,{}]]}]}]\n267:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            },\"}]],[\"$\",\"br\",null,{}]]}]}]\n268:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            { date: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") } \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\""])</script><script>self.__next_f.push([1,"#79C0FF\"},\"children\":\"unknown \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n269:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          );\"}]],[\"$\",\"br\",null,{}]]}]}]\n26a:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n26b:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(maxDateItem.date).\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" asOldAs.\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n26c:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseService.prisma[maxDateItem.entityType \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"]\"}]],[\"$\",\"br\",null,{}]]}]}]\n26d:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"findMany\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n26e:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                where: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n26f:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  updatedAt: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n270:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                    gt: asOldAs,\"}]],[\"$\",\"br\",null,{}]]}]}]\n271:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  },\"}]],[\"$\",\"br\",null,{}]]}]}]\n272:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                },\"}]],[\"$\",\"br\",null,{}]]}]}]\n273:["])</script><script>self.__next_f.push([1,"\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              })\"}]],[\"$\",\"br\",null,{}]]}]}]\n274:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"then\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"entities\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n275:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"entity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" entities) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n276:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(entity);\"}]],[\"$\",\"br\",null,{}]]}]}]\n277:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n278:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              });\"}]],[\"$\",\"br\",null,{}]]}]}]\n279:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            asOldAs \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(maxDateItem.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n27a:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          }\"}]],[\"$\",\"br\",null,{}]]}]}]\n27b:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        });\"}]],[\"$\",\"br\",null,{}]]}]}]\n27c:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n27d:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    );\"}]],[\"$\",\"br\",null,{}]]}]}]\n27e:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\""])</script><script>self.__next_f.push([1,"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n27f:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n280:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"poll\"}]\n281:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(\"}]\n282:[\"$\",\"br\",null,{}]\n283:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"    resp\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\" JSONLinesResponse\u003cVovkIteration\u003c\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabasePollController\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"poll\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003e\u003e,\"}]],[\"$\",\"br\",null,{}]]}]}]\n284:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n285:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(resp.close, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"30_000\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n286:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n287:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" asOldAs \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n288:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // 10 minutes ago; TODO: use latest update date from registry\"}]],[\"$\",\"br\",null,{}]]}]}]\n289:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    asOldAs.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"setMinutes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(asOldAs.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getMinutes\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"- \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"10\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n28a:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",nu"])</script><script>self.__next_f.push([1,"ll,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n28b:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    DatabaseEventsService.emitter.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"on\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n28c:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n28d:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"changes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n28e:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"deleted \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n28f:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"createdOrUpdated \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n290:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\" \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"||\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\""])</script><script>self.__next_f.push([1,",\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n291:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        );\"}]],[\"$\",\"br\",null,{}]]}]}]\n292:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n293:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"deletedEntity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" deleted) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n294:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n295:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            id: deletedEntity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n296:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            entityType: deletedEntity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n297:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            __isDeleted: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n298:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          });\"}]],[\"$\",\"br\",null,{}]]}]}]\n299:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        }\"}]],[\"$\",\"br\",null,{}]]}]}]\n29a:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]\"}]],[\"$\",\"br\",null,{}]]}]}]\n29b:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"        forEach\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"groupBy\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(createdOrUpdated, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\""])</script><script>self.__next_f.push([1,"},\"children\":\"), (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"changes\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n29c:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"maxDateItem \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"reduce\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n29d:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"max\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n29e:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"changeDate \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(change.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n29f:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changeDate.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e new \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(max.date).\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a0:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a1:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" max;\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a2:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a3:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"child"])</script><script>self.__next_f.push([1,"ren\":\"            { date: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") } \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"unknown \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a4:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          );\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a5:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a6:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(maxDateItem.date).\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" asOldAs.\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a7:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseService.prisma[maxDateItem.entityType \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"]\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a8:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"findMany\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n2a9:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                where: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2aa:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  updatedAt: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ab:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                    gt: asOldAs,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ac:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",nul"])</script><script>self.__next_f.push([1,"l,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ad:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ae:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              })\"}]],[\"$\",\"br\",null,{}]]}]}]\n2af:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"then\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"entities\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b0:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"entity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" entities) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b1:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(entity);\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b2:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b3:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              });\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b4:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            asOldAs \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(maxDateItem.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b5:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b6:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        });\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b7:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"widt"])</script><script>self.__next_f.push([1,"h\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b8:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    );\"}]],[\"$\",\"br\",null,{}]]}]}]\n2b9:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ba:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n2bb:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"poll\"}]\n2bc:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(\"}]\n2bd:[\"$\",\"br\",null,{}]\n2be:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"    resp\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" JSONLinesResponse\u003cVovkIteration\u003c\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabasePollController\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"poll\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003e\u003e,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2bf:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c0:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(resp.close, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"30_000\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c1:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c2:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" asOldAs \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c3:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"    // 10 minutes ago; TODO: use latest update date from registry\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c4:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    asOldAs.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"setMinutes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(asOldAs.\"}],[\"$\","])</script><script>self.__next_f.push([1,"\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getMinutes\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"- \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"10\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c5:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c6:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    DatabaseEventsService.emitter.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"on\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c7:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c8:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"changes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2c9:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"deleted \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ca:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"createdOrUpdated \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n2cb:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D"])</script><script>self.__next_f.push([1,"9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\" \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"||\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n2cc:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        );\"}]],[\"$\",\"br\",null,{}]]}]}]\n2cd:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ce:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"        for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"deletedEntity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" deleted) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2cf:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d0:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            id: deletedEntity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d1:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            entityType: deletedEntity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d2:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            __isDeleted: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"true\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d3:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          });\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d4:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d5:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d6:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":"])</script><script>self.__next_f.push([1,"33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"        forEach\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"groupBy\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(createdOrUpdated, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"), (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"changes\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d7:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"maxDateItem \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"reduce\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d8:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"max\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"change\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2d9:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"changeDate \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(change.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n2da:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" changeDate.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e new \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(max.date).\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n2db:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change\"}]],[\"$\",\"br\",null,{}]]}]}]\n2dc:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" max;\"}]],[\"$\",\"br\",null,{}]]}]}]\n2dd:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\""])</script><script>self.__next_f.push([1,"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2de:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            { date: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") } \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"unknown \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n2df:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          );\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e0:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e1:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(maxDateItem.date).\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"() \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" asOldAs.\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e2:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseService.prisma[maxDateItem.entityType \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"]\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e3:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"findMany\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e4:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                where: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e5:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"   "])</script><script>self.__next_f.push([1,"               updatedAt: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e6:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                    gt: asOldAs,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e7:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e8:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2e9:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              })\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ea:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"then\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"((\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"entities\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2eb:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"entity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" entities) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ec:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(entity);\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ed:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ee:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              });\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ef:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            asOldAs \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(maxDateItem.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f0:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\""])</script><script>self.__next_f.push([1,"          }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f1:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        });\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f2:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f3:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    );\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f4:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f5:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n2f6:[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"poll\"}]\n2f7:[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(\"}]\n2f8:[\"$\",\"br\",null,{}]\n2f9:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"    resp\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\" JSONLinesResponse\u003cVovkIteration\u003c\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabasePollController\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"poll\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003e\u003e,\"}]],[\"$\",\"br\",null,{}]]}]}]\n2fa:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n2fb:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"    setTimeout\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(resp.close, \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"30_000\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n2fc:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n2fd:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" asOldAs \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n2fe:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"    // 10 minutes ago; TODO: use l"])</script><script>self.__next_f.push([1,"atest update date from registry\"}]],[\"$\",\"br\",null,{}]]}]}]\n2ff:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    asOldAs.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"setMinutes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(asOldAs.\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getMinutes\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"- \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"10\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n300:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n301:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    DatabaseEventsService.emitter.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"on\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n302:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DB_KEY\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n303:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"changes\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n304:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"deleted \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n305:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"createdOrUpdated \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"filter\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n306:[\"$\",\"div\",\"21\",{\"style"])</script><script>self.__next_f.push([1,"\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\" \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"||\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change.type \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n307:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        );\"}]],[\"$\",\"br\",null,{}]]}]}]\n308:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n309:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"        for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"deletedEntity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" deleted) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n30a:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n30b:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            id: deletedEntity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n30c:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            entityType: deletedEntity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n30d:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            __isDeleted: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n30e:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          });\"}]],[\"$\",\"br\",null,{}]]}]}]\n30f:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        }\"}]],[\"$\",\"br\",null,{}]]}]}]\n310:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":["])</script><script>self.__next_f.push([1,"\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"        // group by entityType and date, so the date is maximum date for the given entity: { entityType: string, date: string }[]\"}]],[\"$\",\"br\",null,{}]]}]}]\n311:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"        forEach\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"groupBy\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(createdOrUpdated, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"), (\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\"changes\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n312:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"maxDateItem \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changes.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"reduce\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n313:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"2ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            (\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"max\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"change\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n314:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"2ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"changeDate \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(change.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n315:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"2ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" changeDate.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e new \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(max.date).\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n316:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"2ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                ?\"}],[\"$\",\"span\",\"1\",{\"style\""])</script><script>self.__next_f.push([1,":{\"color\":\"#24292F\"},\"children\":\" change\"}]],[\"$\",\"br\",null,{}]]}]}]\n317:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"2ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" max;\"}]],[\"$\",\"br\",null,{}]]}]}]\n318:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"2ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            },\"}]],[\"$\",\"br\",null,{}]]}]}]\n319:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"2ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            { date: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"0\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") } \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"unknown \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n31a:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"2ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          );\"}]],[\"$\",\"br\",null,{}]]}]}]\n31b:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"2ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n31c:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"2ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(maxDateItem.date).\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"() \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" asOldAs.\"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getTime\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n31d:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"2ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseService.prisma[maxDateItem.entityType \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"user\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"]\"}]],[\"$\",\"br\",null,{}]]}]}]\n31e:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"2ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"findMany\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n31f:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":"])</script><script>self.__next_f.push([1,"[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"2ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                where: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n320:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"2ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  updatedAt: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n321:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"2ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                    gt: asOldAs,\"}]],[\"$\",\"br\",null,{}]]}]}]\n322:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"2ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  },\"}]],[\"$\",\"br\",null,{}]]}]}]\n323:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"2ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                },\"}]],[\"$\",\"br\",null,{}]]}]}]\n324:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"2ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              })\"}]],[\"$\",\"br\",null,{}]]}]}]\n325:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"2ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              .\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"then\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"((\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"entities\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" {\"}]],[\"$\",\"br\",null,{}]]}]}]\n326:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"2ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                for\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"const \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"entity \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"of\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" entities) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n327:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"2ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  resp.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"send\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(entity);\"}]],[\"$\",\"br\",null,{}]]}]}]\n328:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"2ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n329:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"2ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              });\"}]],[\"$\",\"br\",null,{}]]}]}]\n32a:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"2ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            asOldAs \"}],[\"$\",\"span\",\"1\""])</script><script>self.__next_f.push([1,",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(maxDateItem.date);\"}]],[\"$\",\"br\",null,{}]]}]}]\n32b:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"2ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          }\"}]],[\"$\",\"br\",null,{}]]}]}]\n32c:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"2ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        });\"}]],[\"$\",\"br\",null,{}]]}]}]\n32d:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"2ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n32e:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"2ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    );\"}]],[\"$\",\"br\",null,{}]]}]}]\n32f:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"2ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n330:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"2ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n331:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/decorators/sessionGuard\\\"\"}]\n332:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]\n333:[\"$\",\"br\",null,{}]\n334:[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n335:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"@\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"prefix\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"poll\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n336:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabasePollController {\"}]],[\"$\",\"br\",null,{}]]}]}]\n337:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"get\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n338:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"sessionGuard\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n339:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"ch"])</script><script>self.__next_f.push([1,"ildren\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" poll \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"withZod\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n33a:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    preferTransformed: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"false\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n33b:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    iteration: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"union\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"([\"}]],[\"$\",\"br\",null,{}]]}]}]\n33c:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"object\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n33d:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        id: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"uuid\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n33e:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        entityType: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"enum\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(EntityType),\"}]],[\"$\",\"br\",null,{}]]}]}]\n33f:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        __isDeleted: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"boolean\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"().\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"optional\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n340:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n341:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      UserSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n342:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      TaskSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n343:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    ])\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n344:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\""])</script><script>self.__next_f.push([1,",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"handle\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(req) \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n345:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"response \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" JSONLinesResponse\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003c\"}]],[\"$\",\"br\",null,{}]]}]}]\n346:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        VovkIteration\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003ctypeof\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollController.poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]\n347:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      \u003e\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(req);\"}]],[\"$\",\"br\",null,{}]]}]}]\n348:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n349:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(response);\"}]],[\"$\",\"br\",null,{}]]}]}]\n34a:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n34b:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" response;\"}]],[\"$\",\"br\",null,{}]]}]}]\n34c:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n34d:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n34e:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n34f:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/decorators/sessionGuard\\\"\"}]\n350:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]\n351:[\"$\",\"br\",null,{}]\n352:[\"$\",\"div\","])</script><script>self.__next_f.push([1,"\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n353:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"@\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"prefix\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"poll\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n354:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabasePollController {\"}]],[\"$\",\"br\",null,{}]]}]}]\n355:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"get\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n356:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"sessionGuard\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n357:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" poll \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"withZod\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n358:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    preferTransformed: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"false\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n359:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    iteration: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"union\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"([\"}]],[\"$\",\"br\",null,{}]]}]}]\n35a:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"object\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n35b:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        id: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"uuid\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n35c:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"childr"])</script><script>self.__next_f.push([1,"en\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        entityType: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"enum\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(EntityType),\"}]],[\"$\",\"br\",null,{}]]}]}]\n35d:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        __isDeleted: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"boolean\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"().\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"optional\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n35e:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n35f:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      UserSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n360:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      TaskSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n361:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    ])\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n362:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"handle\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(req) \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n363:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"response \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" JSONLinesResponse\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003c\"}]],[\"$\",\"br\",null,{}]]}]}]\n364:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        VovkIteration\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003ctypeof\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollController.poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]\n365:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      \u003e\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(req);\"}]],[\"$\",\"br\",null,{}]]}]}]\n366:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n367:[\"$"])</script><script>self.__next_f.push([1,"\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(response);\"}]],[\"$\",\"br\",null,{}]]}]}]\n368:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n369:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" response;\"}]],[\"$\",\"br\",null,{}]]}]}]\n36a:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n36b:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n36c:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n36d:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"@/decorators/sessionGuard\\\"\"}]\n36e:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]\n36f:[\"$\",\"br\",null,{}]\n370:[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n371:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"@\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"prefix\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"poll\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n372:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" DatabasePollController {\"}]],[\"$\",\"br\",null,{}]]}]}]\n373:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"get\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n374:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"sessionGuard\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n375:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\""])</script><script>self.__next_f.push([1,",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" poll \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"withZod\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n376:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    preferTransformed: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"false\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n377:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    iteration: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"union\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"([\"}]],[\"$\",\"br\",null,{}]]}]}]\n378:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"object\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n379:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        id: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"uuid\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n37a:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        entityType: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"enum\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(EntityType),\"}]],[\"$\",\"br\",null,{}]]}]}]\n37b:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        __isDeleted: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"boolean\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"().\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"optional\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n37c:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n37d:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      UserSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n37e:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      TaskSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n37f:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    ])\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\""])</script><script>self.__next_f.push([1,",null,{}]]}]}]\n380:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"handle\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"(req) \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n381:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"response \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" JSONLinesResponse\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003c\"}]],[\"$\",\"br\",null,{}]]}]}]\n382:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        VovkIteration\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003ctypeof\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollController.poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]\n383:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      \u003e\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(req);\"}]],[\"$\",\"br\",null,{}]]}]}]\n384:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n385:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabasePollService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(response);\"}]],[\"$\",\"br\",null,{}]]}]}]\n386:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n387:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"      return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" response;\"}]],[\"$\",\"br\",null,{}]]}]}]\n388:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    }\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n389:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n38a:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n38b:[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"@/decorators/sessio"])</script><script>self.__next_f.push([1,"nGuard\\\"\"}]\n38c:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]\n38d:[\"$\",\"br\",null,{}]\n38e:[\"$\",\"div\",\"7\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":8,\"style\":{\"width\":\"2ch\"},\"children\":8}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n38f:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"2ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"@\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"prefix\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"poll\\\"\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")\"}]],[\"$\",\"br\",null,{}]]}]}]\n390:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"2ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"export default class\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" DatabasePollController {\"}]],[\"$\",\"br\",null,{}]]}]}]\n391:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"2ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"get\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n392:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"2ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  @\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"sessionGuard\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n393:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"2ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" poll \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"withZod\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#953800\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n394:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"2ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    preferTransformed: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"false\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n395:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"2ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    iteration: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"union\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"([\"}]],[\"$\",\"br\",null,{}]]}]}]\n396:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"2ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"object\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n397:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"2ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        id: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"uuid\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"("])</script><script>self.__next_f.push([1,"),\"}]],[\"$\",\"br\",null,{}]]}]}]\n398:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"2ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        entityType: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"enum\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(EntityType),\"}]],[\"$\",\"br\",null,{}]]}]}]\n399:[\"$\",\"div\",\"18\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"2ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        __isDeleted: z.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"boolean\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"().\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"optional\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(),\"}]],[\"$\",\"br\",null,{}]]}]}]\n39a:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"2ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n39b:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"2ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      UserSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n39c:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"2ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      TaskSchema,\"}]],[\"$\",\"br\",null,{}]]}]}]\n39d:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"2ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    ])\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n39e:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"2ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"handle\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"(req) \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n39f:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"2ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"response \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" JSONLinesResponse\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003c\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a0:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"2ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        VovkIteration\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003ctypeof\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollController.poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"\u003e\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a1:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"2ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      \u003e\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(req);\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a2:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\""])</script><script>self.__next_f.push([1,"2ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a3:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"2ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      void\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabasePollService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"poll\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(response);\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a4:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"2ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a5:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"2ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"      return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" response;\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a6:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"2ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    }\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a7:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"2ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"  });\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a8:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"2ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n3a9:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"??= \"}]\n3aa:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}]\n3ab:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}]\n3ac:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getClient\"}]\n3ad:[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"());\"}]\n3ae:[\"$\",\"br\",null,{}]\n3af:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"3ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b0:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"3ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" #prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" ReturnType\u003c\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabaseService\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b1:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"3ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b2:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\""])</script><script>self.__next_f.push([1,",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"3ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b3:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"3ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"prisma \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"PrismaClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b4:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"3ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      adapter: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"PrismaNeon\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b5:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"3ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        connectionString: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"`${\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"process\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\".\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"env\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DATABASE_URL\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}`\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b6:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"3ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b7:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"3ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b8:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"3ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3b9:[\"$\",\"span\",\"18\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"3ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n3ba:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"3ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3bb:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"3ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" prisma.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D"])</script><script>self.__next_f.push([1,"2A8FF\"},\"children\":\"$$extends\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n3bc:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"3ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      name: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"events\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3bd:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"3ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      query: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3be:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"3ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        $allModels: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3bf:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"3ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"$$allOperations\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"operation\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"args\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"query\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" }) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c0:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"3ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"allowedOperations \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" [\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c1:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"3ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"create\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c2:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"3ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"update\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c3:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"3ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"delete\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c4:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"3ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findMany\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c5:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"3ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findUnique\\"])</script><script>self.__next_f.push([1,"\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c6:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"3ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findFirst\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c7:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"3ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"count\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c8:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"3ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            ] \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as const\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3c9:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"3ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" allowedOperations)[\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"number\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"];\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ca:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"3ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"allowedOperations.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"includes\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(operation \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3cb:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"3ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              throw new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n3cc:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"3ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"                `Unsupported database operation \\\"${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}\\\" on model \\\"${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}\\\"`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3cd:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"3ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              );\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ce:[\"$\",\"div\",\"39\",{"])</script><script>self.__next_f.push([1,"\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"3ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n3cf:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"3ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"result \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"await \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"query\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(args)) \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d0:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"3ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d1:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"3ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"().\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d2:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"3ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d3:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"3ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d4:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"3ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d5:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"3ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"              entity\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"3\",{\"sty"])</script><script>self.__next_f.push([1,"le\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d6:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"3ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"              type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"[\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"],\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d7:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"3ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d8:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"3ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              id: entity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n3d9:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"3ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              entityType: entity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n3da:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"3ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              date:\"}]],[\"$\",\"br\",null,{}]]}]}]\n3db:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"3ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3dc:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"3ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                  ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now\"}]],[\"$\",\"br\",null,{}]]}]}]\n3dd:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"3ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                  :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" entity.updatedAt\"}]],[\"$\",\"br\",null,{}]]}]}]\n3de:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"3ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                    ? new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(entity.updatedAt).\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n3df:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"3ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                    :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e0:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"3ch\"},\"children\":58}],[[\"$\""])</script><script>self.__next_f.push([1,",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              type,\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e1:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"3ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            });\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e2:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"3ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e3:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"3ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            switch\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (operation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e4:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"3ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e5:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"3ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e6:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"3ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e7:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"3ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e8:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"3ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3e9:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"3ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ea:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"3ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D"])</script><script>self.__next_f.push([1,"6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n3eb:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"3ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ec:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"3ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ed:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"3ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ee:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"3ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ef:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"3ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f0:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"3ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f1:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"3ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"                  // Automatically add __isDeleted flag to deletion results\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f2:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"3ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  Object.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"assign\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, { __isDeleted: \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"true\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" });\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f3:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"3ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  "])</script><script>self.__next_f.push([1,"              }\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f4:[\"$\",\"div\",\"77\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":78,\"style\":{\"width\":\"3ch\"},\"children\":78}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f5:[\"$\",\"div\",\"78\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":79,\"style\":{\"width\":\"3ch\"},\"children\":79}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f6:[\"$\",\"div\",\"79\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":80,\"style\":{\"width\":\"3ch\"},\"children\":80}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findMany\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f7:[\"$\",\"div\",\"80\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":81,\"style\":{\"width\":\"3ch\"},\"children\":81}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findUnique\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f8:[\"$\",\"div\",\"81\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":82,\"style\":{\"width\":\"3ch\"},\"children\":82}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findFirst\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3f9:[\"$\",\"div\",\"82\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":83,\"style\":{\"width\":\"3ch\"},\"children\":83}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"count\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3fa:[\"$\",\"div\",\"83\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":84,\"style\":{\"width\":\"3ch\"},\"children\":84}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"                // no events\"}]],[\"$\",\"br\",null,{}]]}]}]\n3fb:[\"$\",\"div\",\"84\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":85,\"style\":{\"width\":\"3ch\"},\"children\":85}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n3fc:[\"$\",\"div\",\"85\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":86,\"style\":{\"width\":\"3ch\"},\"children\":86}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n3fd:[\"$\",\"div\",\"86\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":87,\"style\":{\"width\":\"3ch\"},\"children\":87}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              default\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n3fe:[\"$\",\"div\",\"87\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":88,\"style\":{\"width\":\"3ch\"},\"children\":88}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"warn\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n3ff:[\"$\",\"div\",\"88\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":89,\"style\":{\"width\":\"3ch\"},\"children\":89}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":"])</script><script>self.__next_f.push([1,"\"#A5D6FF\"},\"children\":\"                  `Unhandled Prisma operation: ${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"} for model: ${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n400:[\"$\",\"div\",\"89\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":90,\"style\":{\"width\":\"3ch\"},\"children\":90}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                );\"}]],[\"$\",\"br\",null,{}]]}]}]\n401:[\"$\",\"div\",\"90\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":91,\"style\":{\"width\":\"3ch\"},\"children\":91}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n402:[\"$\",\"div\",\"91\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":92,\"style\":{\"width\":\"3ch\"},\"children\":92}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n403:[\"$\",\"div\",\"92\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":93,\"style\":{\"width\":\"3ch\"},\"children\":93}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n404:[\"$\",\"div\",\"93\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":94,\"style\":{\"width\":\"3ch\"},\"children\":94}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (change) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n405:[\"$\",\"span\",\"94\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":95,\"style\":{\"width\":\"3ch\"},\"children\":95}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              await\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"([change]);\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n406:[\"$\",\"div\",\"95\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":96,\"style\":{\"width\":\"3ch\"},\"children\":96}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n407:[\"$\",\"div\",\"96\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":97,\"style\":{\"width\":\"3ch\"},\"children\":97}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n408:[\"$\",\"div\",\"97\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":98,\"style\":{\"width\":\"3ch\"},\"children\":98}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result;\"}]],[\"$\",\"br\",null,{}]]}]}]\n409:[\"$\",\"div\",\"98\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":99,\"style\":{\"width\":\"3ch\"},\"children\":99}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          },\"}]],[\"$\",\"br\",null,{}]]}]}]\n40a:[\"$\",\"div\",\"99\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":100,\"style\":{\"width\":\"3ch\"},\"children\":100}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        },\"}]],[\"$\",\"br\",null,{}]]}]}]\n40b:[\"$\",\"div\",\"100\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":101,\"style\":{\"width\":\"3ch\"},\"children\":101}],[[\"$\",\"span\",\"0\",{\"sty"])</script><script>self.__next_f.push([1,"le\":{\"color\":\"#C9D1D9\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n40c:[\"$\",\"div\",\"101\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":102,\"style\":{\"width\":\"3ch\"},\"children\":102}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n40d:[\"$\",\"div\",\"102\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":103,\"style\":{\"width\":\"3ch\"},\"children\":103}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n40e:[\"$\",\"div\",\"103\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":104,\"style\":{\"width\":\"3ch\"},\"children\":104}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n40f:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"??= \"}]\n410:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}]\n411:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}]\n412:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getClient\"}]\n413:[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"());\"}]\n414:[\"$\",\"br\",null,{}]\n415:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"3ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n416:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"3ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" #prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\" ReturnType\u003c\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabaseService\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n417:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"3ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n418:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"3ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n419:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"3ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"prisma \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"PrismaClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n41a:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"3ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\""])</script><script>self.__next_f.push([1,"      adapter: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"PrismaNeon\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n41b:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"3ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        connectionString: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"`${\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"process\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\".\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"env\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DATABASE_URL\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}`\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n41c:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"3ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n41d:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"3ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n41e:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"3ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n41f:[\"$\",\"span\",\"18\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"3ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n420:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"3ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n421:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"3ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" prisma.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"$$extends\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n422:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"3ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      name: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"events\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n423:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"3ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      query: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n424:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"3ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        $allModels: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n425:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span"])</script><script>self.__next_f.push([1,"\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"3ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"$$allOperations\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#953800\"},\"children\":\"operation\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"args\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#953800\"},\"children\":\"query\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" }) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n426:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"3ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"allowedOperations \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" [\"}]],[\"$\",\"br\",null,{}]]}]}]\n427:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"3ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"create\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n428:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"3ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"update\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n429:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"3ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"delete\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n42a:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"3ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findMany\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n42b:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"3ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findUnique\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n42c:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"3ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findFirst\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n42d:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"3ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"count\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n42e:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"3ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            ] \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as const\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null"])</script><script>self.__next_f.push([1,",{}]]}]}]\n42f:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"3ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" allowedOperations)[\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"number\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"];\"}]],[\"$\",\"br\",null,{}]]}]}]\n430:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"3ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"allowedOperations.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"includes\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(operation \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n431:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"3ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              throw new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n432:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"3ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"                `Unsupported database operation \\\"${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}\\\" on model \\\"${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}\\\"`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n433:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"3ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              );\"}]],[\"$\",\"br\",null,{}]]}]}]\n434:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"3ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n435:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"3ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"result \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"await \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"query\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(args)) \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity\"}],[\"$\","])</script><script>self.__next_f.push([1,"\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n436:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"3ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n437:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"3ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"().\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n438:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"3ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n439:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"3ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n43a:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"3ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}]],[\"$\",\"br\",null,{}]]}]}]\n43b:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"3ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"              entity\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n43c:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"3ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"              type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"[\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"],\"}]],[\"$\",\"br\",null,{}]]}]}]\n43d:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"3ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n43e:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",nul"])</script><script>self.__next_f.push([1,"l,{\"data-bright-ln\":50,\"style\":{\"width\":\"3ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              id: entity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n43f:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"3ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              entityType: entity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n440:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"3ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              date:\"}]],[\"$\",\"br\",null,{}]]}]}]\n441:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"3ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n442:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"3ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                  ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now\"}]],[\"$\",\"br\",null,{}]]}]}]\n443:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"3ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                  :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" entity.updatedAt\"}]],[\"$\",\"br\",null,{}]]}]}]\n444:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"3ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                    ? new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(entity.updatedAt).\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n445:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"3ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                    :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n446:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"3ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              type,\"}]],[\"$\",\"br\",null,{}]]}]}]\n447:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"3ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            });\"}]],[\"$\",\"br\",null,{}]]}]}]\n448:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"3ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n449:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"3ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            switch\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (operation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") {\"}]],[\"$\",\"br\",nul"])</script><script>self.__next_f.push([1,"l,{}]]}]}]\n44a:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"3ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n44b:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"3ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n44c:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"3ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n44d:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"3ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n44e:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"3ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n44f:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"3ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n450:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"3ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n451:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"3ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n452:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"3ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n453:[\"$\",\"div\",\""])</script><script>self.__next_f.push([1,"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"3ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n454:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"3ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n455:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"3ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n456:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"3ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n457:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"3ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"                  // Automatically add __isDeleted flag to deletion results\"}]],[\"$\",\"br\",null,{}]]}]}]\n458:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"3ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  Object.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"assign\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, { __isDeleted: \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" });\"}]],[\"$\",\"br\",null,{}]]}]}]\n459:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"3ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n45a:[\"$\",\"div\",\"77\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":78,\"style\":{\"width\":\"3ch\"},\"children\":78}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n45b:[\"$\",\"div\",\"78\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":79,\"style\":{\"width\":\"3ch\"},\"children\":79}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n45c:[\"$\",\"div\",\"79\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":80,\"style\":{\"width\":\"3ch\"},\"children\":80}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findMany\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n45d:[\"$\",\"div\",\"80\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright"])</script><script>self.__next_f.push([1,"-ln\":81,\"style\":{\"width\":\"3ch\"},\"children\":81}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findUnique\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n45e:[\"$\",\"div\",\"81\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":82,\"style\":{\"width\":\"3ch\"},\"children\":82}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findFirst\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n45f:[\"$\",\"div\",\"82\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":83,\"style\":{\"width\":\"3ch\"},\"children\":83}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"count\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n460:[\"$\",\"div\",\"83\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":84,\"style\":{\"width\":\"3ch\"},\"children\":84}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"                // no events\"}]],[\"$\",\"br\",null,{}]]}]}]\n461:[\"$\",\"div\",\"84\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":85,\"style\":{\"width\":\"3ch\"},\"children\":85}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n462:[\"$\",\"div\",\"85\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":86,\"style\":{\"width\":\"3ch\"},\"children\":86}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n463:[\"$\",\"div\",\"86\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":87,\"style\":{\"width\":\"3ch\"},\"children\":87}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              default\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n464:[\"$\",\"div\",\"87\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":88,\"style\":{\"width\":\"3ch\"},\"children\":88}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"warn\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n465:[\"$\",\"div\",\"88\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":89,\"style\":{\"width\":\"3ch\"},\"children\":89}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"                  `Unhandled Prisma operation: ${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"} for model: ${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n466:[\"$\",\"div\",\"89\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":90,\"style\":{\"width\":\"3ch\"},\"children\":90}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                );\"}]],[\"$\",\"br\",null,{}]]}]}]\n467:[\"$\",\"div\",\"90\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":91,\"style\":{\"width\":\"3ch\"},\"children\":91}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n468:[\"$\",\"div\",\"91\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bri"])</script><script>self.__next_f.push([1,"ght-ln\":92,\"style\":{\"width\":\"3ch\"},\"children\":92}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n469:[\"$\",\"div\",\"92\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":93,\"style\":{\"width\":\"3ch\"},\"children\":93}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n46a:[\"$\",\"div\",\"93\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":94,\"style\":{\"width\":\"3ch\"},\"children\":94}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (change) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n46b:[\"$\",\"span\",\"94\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":95,\"style\":{\"width\":\"3ch\"},\"children\":95}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              await\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"([change]);\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n46c:[\"$\",\"div\",\"95\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":96,\"style\":{\"width\":\"3ch\"},\"children\":96}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n46d:[\"$\",\"div\",\"96\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":97,\"style\":{\"width\":\"3ch\"},\"children\":97}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n46e:[\"$\",\"div\",\"97\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":98,\"style\":{\"width\":\"3ch\"},\"children\":98}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result;\"}]],[\"$\",\"br\",null,{}]]}]}]\n46f:[\"$\",\"div\",\"98\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":99,\"style\":{\"width\":\"3ch\"},\"children\":99}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          },\"}]],[\"$\",\"br\",null,{}]]}]}]\n470:[\"$\",\"div\",\"99\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":100,\"style\":{\"width\":\"3ch\"},\"children\":100}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        },\"}]],[\"$\",\"br\",null,{}]]}]}]\n471:[\"$\",\"div\",\"100\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":101,\"style\":{\"width\":\"3ch\"},\"children\":101}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n472:[\"$\",\"div\",\"101\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":102,\"style\":{\"width\":\"3ch\"},\"children\":102}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n473:[\"$\",\"div\",\"102\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":103,\"style\":{\"width\":\"3ch\"},\"children\":103}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n474:[\"$\",\"div\",\"103\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":104,\"style\":{\"width\":\"3ch\"},\"children\":104}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n475:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"??= \"}]\n476:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"this\"}]\n477:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\".\"}]\n478:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getClient\"}]\n479:[\"$\",\"span\",\"8\",{\"style\":{"])</script><script>self.__next_f.push([1,"\"color\":\"#C9D1D9\"},\"children\":\"());\"}]\n47a:[\"$\",\"br\",null,{}]\n47b:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"3ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n47c:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"3ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" #prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\":\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\" ReturnType\u003c\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"DatabaseService\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\".\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n47d:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"3ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n47e:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"3ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"  private static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n47f:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"3ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"prisma \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"PrismaClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n480:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"3ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      adapter: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"PrismaNeon\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n481:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"3ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        connectionString: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"`${\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"process\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\".\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"env\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"DATABASE_URL\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}`\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n482:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\""])</script><script>self.__next_f.push([1,":16,\"style\":{\"width\":\"3ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n483:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"3ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n484:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"3ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n485:[\"$\",\"span\",\"18\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"3ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n486:[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"3ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n487:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"3ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" prisma.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"$$extends\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n488:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"3ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      name: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"events\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n489:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"3ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      query: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n48a:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"3ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        $allModels: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n48b:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"3ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"          async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"$$allOperations\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"({ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"operation\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"args\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\", \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"query\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" }) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n48c:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"3ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"allowedOperations \"}],[\"$\","])</script><script>self.__next_f.push([1,"\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" [\"}]],[\"$\",\"br\",null,{}]]}]}]\n48d:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"3ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"create\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n48e:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"3ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"update\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n48f:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"3ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"delete\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n490:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"3ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findMany\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n491:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"3ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findUnique\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n492:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"3ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"findFirst\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n493:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"3ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"              \\\"count\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n494:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"3ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            ] \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as const\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n495:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"3ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" allowedOperations)[\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"number\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"];\"}]],[\"$\",\"br\",null,{}]]}]}]\n496:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"3ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":"])</script><script>self.__next_f.push([1,"\"#C9D1D9\"},\"children\":\"allowedOperations.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"includes\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(operation \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\")) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n497:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"3ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              throw new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n498:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"3ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"                `Unsupported database operation \\\"${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}\\\" on model \\\"${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}\\\"`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n499:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"3ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              );\"}]],[\"$\",\"br\",null,{}]]}]}]\n49a:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"3ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n49b:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"3ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"result \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"await \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"query\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(args)) \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n49c:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"3ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n49d:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"3ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"().\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n49e:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"3ch\"},\"chi"])</script><script>self.__next_f.push([1,"ldren\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"| \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"null\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n49f:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"3ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a0:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"3ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a1:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"3ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"              entity\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a2:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"3ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"              type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"[\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"],\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a3:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"3ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a4:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"3ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              id: entity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a5:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"3ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              entityType: entity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a6:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"3ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              date:\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a7:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"3ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"=== \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a8"])</script><script>self.__next_f.push([1,":[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"3ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                  ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now\"}]],[\"$\",\"br\",null,{}]]}]}]\n4a9:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"3ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                  :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" entity.updatedAt\"}]],[\"$\",\"br\",null,{}]]}]}]\n4aa:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"3ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                    ? new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(entity.updatedAt).\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ab:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"3ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                    :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ac:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"3ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"              type,\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ad:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"3ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            });\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ae:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"3ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4af:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"3ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            switch\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (operation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b0:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"3ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b1:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"3ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b2:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"3ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\""])</script><script>self.__next_f.push([1,"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b3:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"3ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b4:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"3ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b5:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"3ch\"},\"children\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b6:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"3ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b7:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"3ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b8:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"3ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4b9:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"3ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ba:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"3ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4bb:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"3ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result) {\"}]"])</script><script>self.__next_f.push([1,"],[\"$\",\"br\",null,{}]]}]}]\n4bc:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"3ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n4bd:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"3ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"                  // Automatically add __isDeleted flag to deletion results\"}]],[\"$\",\"br\",null,{}]]}]}]\n4be:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"3ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                  Object.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"assign\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(result, { __isDeleted: \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#79C0FF\"},\"children\":\"true\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" });\"}]],[\"$\",\"br\",null,{}]]}]}]\n4bf:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"3ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c0:[\"$\",\"div\",\"77\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":78,\"style\":{\"width\":\"3ch\"},\"children\":78}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c1:[\"$\",\"div\",\"78\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":79,\"style\":{\"width\":\"3ch\"},\"children\":79}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c2:[\"$\",\"div\",\"79\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":80,\"style\":{\"width\":\"3ch\"},\"children\":80}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findMany\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c3:[\"$\",\"div\",\"80\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":81,\"style\":{\"width\":\"3ch\"},\"children\":81}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findUnique\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c4:[\"$\",\"div\",\"81\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":82,\"style\":{\"width\":\"3ch\"},\"children\":82}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"findFirst\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c5:[\"$\",\"div\",\"82\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":83,\"style\":{\"width\":\"3ch\"},\"children\":83}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"\\\"count\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c6:[\"$\",\"div\",\"83\",{\"style\":{\"padding\":\"0 1em\"},\"children\""])</script><script>self.__next_f.push([1,":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":84,\"style\":{\"width\":\"3ch\"},\"children\":84}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#8B949E\"},\"children\":\"                // no events\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c7:[\"$\",\"div\",\"84\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":85,\"style\":{\"width\":\"3ch\"},\"children\":85}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c8:[\"$\",\"div\",\"85\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":86,\"style\":{\"width\":\"3ch\"},\"children\":86}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4c9:[\"$\",\"div\",\"86\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":87,\"style\":{\"width\":\"3ch\"},\"children\":87}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              default\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ca:[\"$\",\"div\",\"87\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":88,\"style\":{\"width\":\"3ch\"},\"children\":88}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"warn\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n4cb:[\"$\",\"div\",\"88\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":89,\"style\":{\"width\":\"3ch\"},\"children\":89}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"                  `Unhandled Prisma operation: ${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"} for model: ${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#A5D6FF\"},\"children\":\"}`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4cc:[\"$\",\"div\",\"89\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":90,\"style\":{\"width\":\"3ch\"},\"children\":90}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"                );\"}]],[\"$\",\"br\",null,{}]]}]}]\n4cd:[\"$\",\"div\",\"90\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":91,\"style\":{\"width\":\"3ch\"},\"children\":91}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ce:[\"$\",\"div\",\"91\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":92,\"style\":{\"width\":\"3ch\"},\"children\":92}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n4cf:[\"$\",\"div\",\"92\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":93,\"style\":{\"width\":\"3ch\"},\"children\":93}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d0:[\"$\",\"div\",\"93\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":94,\"style\":{\"width\":\"3ch\"},\"children\":94}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" (change) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d1:[\"$\",\"span\",\"94\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":95,\"style\":{\"width\":\"3ch\"},\"children\":95}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"              await\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" DatabaseEventsService.\"}],[\""])</script><script>self.__next_f.push([1,"$\",\"span\",\"2\",{\"style\":{\"color\":\"#D2A8FF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"([change]);\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n4d2:[\"$\",\"div\",\"95\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":96,\"style\":{\"width\":\"3ch\"},\"children\":96}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d3:[\"$\",\"div\",\"96\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":97,\"style\":{\"width\":\"3ch\"},\"children\":97}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d4:[\"$\",\"div\",\"97\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":98,\"style\":{\"width\":\"3ch\"},\"children\":98}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FF7B72\"},\"children\":\"            return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\" result;\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d5:[\"$\",\"div\",\"98\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":99,\"style\":{\"width\":\"3ch\"},\"children\":99}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"          },\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d6:[\"$\",\"div\",\"99\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":100,\"style\":{\"width\":\"3ch\"},\"children\":100}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"        },\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d7:[\"$\",\"div\",\"100\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":101,\"style\":{\"width\":\"3ch\"},\"children\":101}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d8:[\"$\",\"div\",\"101\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":102,\"style\":{\"width\":\"3ch\"},\"children\":102}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n4d9:[\"$\",\"div\",\"102\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":103,\"style\":{\"width\":\"3ch\"},\"children\":103}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#C9D1D9\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n4da:[\"$\",\"div\",\"103\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":104,\"style\":{\"width\":\"3ch\"},\"children\":104}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#FFA657\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n4db:[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"??= \"}]\n4dc:[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"this\"}]\n4dd:[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\".\"}]\n4de:[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getClient\"}]\n4df:[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"());\"}]\n4e0:[\"$\",\"br\",null,{}]\n4e1:[\"$\",\"div\",\"8\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":9,\"style\":{\"width\":\"3ch\"},\"children\":9}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e2:[\"$\",\"div\",\"9\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":10,\"style\":{\"width\":\"3ch\"},\"children\":10}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  static\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\" #prisma\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\":\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\" ReturnType\u003c\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"DatabaseService\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#953800\"},\"children\":\".\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\u003e \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\""])</script><script>self.__next_f.push([1,"span\",\"10\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null \"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"12\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null\"}],[\"$\",\"span\",\"13\",{\"style\":{\"color\":\"#953800\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e3:[\"$\",\"div\",\"10\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":11,\"style\":{\"width\":\"3ch\"},\"children\":11}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e4:[\"$\",\"div\",\"11\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":12,\"style\":{\"width\":\"3ch\"},\"children\":12}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"  private static \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"getClient\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"() \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"{\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e5:[\"$\",\"div\",\"12\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":13,\"style\":{\"width\":\"3ch\"},\"children\":13}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"prisma \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"PrismaClient\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e6:[\"$\",\"div\",\"13\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":14,\"style\":{\"width\":\"3ch\"},\"children\":14}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      adapter: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"new \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"PrismaNeon\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e7:[\"$\",\"div\",\"14\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":15,\"style\":{\"width\":\"3ch\"},\"children\":15}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        connectionString: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"`${\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"process\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\".\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"env\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\".\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"DATABASE_URL\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}`\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e8:[\"$\",\"div\",\"15\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":16,\"style\":{\"width\":\"3ch\"},\"children\":16}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      }),\"}]],[\"$\",\"br\",null,{}]]}]}]\n4e9:[\"$\",\"div\",\"16\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":17,\"style\":{\"width\":\"3ch\"},\"children\":17}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ea:[\"$\",\"div\",\"17\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":18,\"style\":{\"width\":\"3ch\"},\"children\":18}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4eb:[\"$\",\"span\",\"18\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":19,\"style\":{\"width\":\"3ch\"},\"children\":19}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    DatabaseEventsService.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"beginEmitting\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n4ec"])</script><script>self.__next_f.push([1,":[\"$\",\"div\",\"19\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":20,\"style\":{\"width\":\"3ch\"},\"children\":20}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ed:[\"$\",\"div\",\"20\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":21,\"style\":{\"width\":\"3ch\"},\"children\":21}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"    return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" prisma.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"$$extends\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ee:[\"$\",\"div\",\"21\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":22,\"style\":{\"width\":\"3ch\"},\"children\":22}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      name: \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"events\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ef:[\"$\",\"div\",\"22\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":23,\"style\":{\"width\":\"3ch\"},\"children\":23}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      query: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f0:[\"$\",\"div\",\"23\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":24,\"style\":{\"width\":\"3ch\"},\"children\":24}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        $allModels: {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f1:[\"$\",\"div\",\"24\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":25,\"style\":{\"width\":\"3ch\"},\"children\":25}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"          async \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"$$allOperations\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"({ \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#953800\"},\"children\":\"operation\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"args\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\", \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#953800\"},\"children\":\"query\"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" }) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f2:[\"$\",\"div\",\"25\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":26,\"style\":{\"width\":\"3ch\"},\"children\":26}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"allowedOperations \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" [\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f3:[\"$\",\"div\",\"26\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":27,\"style\":{\"width\":\"3ch\"},\"children\":27}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"create\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f4:[\"$\",\"div\",\"27\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":28,\"style\":{\"width\":\"3ch\"},\"children\":28}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"update\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f5:[\"$\",\"div\",\"28\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":29,\"style\":{\"width\":\"3ch\"},\"children\":29}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"delete\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}"])</script><script>self.__next_f.push([1,"]\n4f6:[\"$\",\"div\",\"29\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":30,\"style\":{\"width\":\"3ch\"},\"children\":30}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findMany\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f7:[\"$\",\"div\",\"30\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":31,\"style\":{\"width\":\"3ch\"},\"children\":31}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findUnique\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f8:[\"$\",\"div\",\"31\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":32,\"style\":{\"width\":\"3ch\"},\"children\":32}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"findFirst\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4f9:[\"$\",\"div\",\"32\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":33,\"style\":{\"width\":\"3ch\"},\"children\":33}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"              \\\"count\\\"\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4fa:[\"$\",\"div\",\"33\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":34,\"style\":{\"width\":\"3ch\"},\"children\":34}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            ] \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as const\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n4fb:[\"$\",\"div\",\"34\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":35,\"style\":{\"width\":\"3ch\"},\"children\":35}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"typeof\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" allowedOperations)[\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"number\"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"];\"}]],[\"$\",\"br\",null,{}]]}]}]\n4fc:[\"$\",\"div\",\"35\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":36,\"style\":{\"width\":\"3ch\"},\"children\":36}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"!\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"allowedOperations.\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"includes\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(operation \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\")) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n4fd:[\"$\",\"div\",\"36\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":37,\"style\":{\"width\":\"3ch\"},\"children\":37}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              throw new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Error\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n4fe:[\"$\",\"div\",\"37\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":38,\"style\":{\"width\":\"3ch\"},\"children\":38}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"                `Unsupported database operation \\\"${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"ope"])</script><script>self.__next_f.push([1,"ration\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}\\\" on model \\\"${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}\\\"`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n4ff:[\"$\",\"div\",\"38\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":39,\"style\":{\"width\":\"3ch\"},\"children\":39}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              );\"}]],[\"$\",\"br\",null,{}]]}]}]\n500:[\"$\",\"div\",\"39\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":40,\"style\":{\"width\":\"3ch\"},\"children\":40}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n501:[\"$\",\"div\",\"40\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":41,\"style\":{\"width\":\"3ch\"},\"children\":41}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"result \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"await \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"query\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(args)) \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity \"}],[\"$\",\"span\",\"9\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\"span\",\"10\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"11\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"[];\"}]],[\"$\",\"br\",null,{}]]}]}]\n502:[\"$\",\"div\",\"41\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":42,\"style\":{\"width\":\"3ch\"},\"children\":42}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n503:[\"$\",\"div\",\"42\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":43,\"style\":{\"width\":\"3ch\"},\"children\":43}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"now \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= new \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"().\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"toISOString\"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"();\"}]],[\"$\",\"br\",null,{}]]}]}]\n504:[\"$\",\"div\",\"43\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":44,\"style\":{\"width\":\"3ch\"},\"children\":44}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            let\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" change\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"| \"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null \"}],[\"$\",\"span\",\"6\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"7\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"null\"}],[\"$\",\"span\",\"8\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n505:[\"$\",\"div\",\"44\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":45,\"style\":{\"width\":\"3ch\"},\"children\":45}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n506:[\"$\",\"div\",\"45\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":46,\"style\":{\"width\":\"3ch\"},\"children\":46}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            const \"}],[\"$\",\"span\",\"1\",{\"style\":{\"co"])</script><script>self.__next_f.push([1,"lor\":\"#8250DF\"},\"children\":\"makeChange \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}]],[\"$\",\"br\",null,{}]]}]}]\n507:[\"$\",\"div\",\"46\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":47,\"style\":{\"width\":\"3ch\"},\"children\":47}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"              entity\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"BaseEntity\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n508:[\"$\",\"div\",\"47\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":48,\"style\":{\"width\":\"3ch\"},\"children\":48}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"              type\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\": \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#953800\"},\"children\":\"DBChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"[\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"type\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"],\"}]],[\"$\",\"br\",null,{}]]}]}]\n509:[\"$\",\"div\",\"48\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":49,\"style\":{\"width\":\"3ch\"},\"children\":49}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            ) \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" ({\"}]],[\"$\",\"br\",null,{}]]}]}]\n50a:[\"$\",\"div\",\"49\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":50,\"style\":{\"width\":\"3ch\"},\"children\":50}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              id: entity.id,\"}]],[\"$\",\"br\",null,{}]]}]}]\n50b:[\"$\",\"div\",\"50\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":51,\"style\":{\"width\":\"3ch\"},\"children\":51}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              entityType: entity.entityType,\"}]],[\"$\",\"br\",null,{}]]}]}]\n50c:[\"$\",\"div\",\"51\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":52,\"style\":{\"width\":\"3ch\"},\"children\":52}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              date:\"}]],[\"$\",\"br\",null,{}]]}]}]\n50d:[\"$\",\"div\",\"52\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":53,\"style\":{\"width\":\"3ch\"},\"children\":53}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                type \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"=== \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n50e:[\"$\",\"div\",\"53\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":54,\"style\":{\"width\":\"3ch\"},\"children\":54}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                  ?\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now\"}]],[\"$\",\"br\",null,{}]]}]}]\n50f:[\"$\",\"div\",\"54\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":55,\"style\":{\"width\":\"3ch\"},\"children\":55}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                  :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" entity.updatedAt\"}]],[\"$\",\"br\",null,{}]]}]}]\n510:[\"$\",\"div\",\"55\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":56,\"style\":{\"width\":\"3ch\"},\"children\":56}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                    ? new \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"Date\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(entity.updatedAt).\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"toISOString\"}],[\"$\","])</script><script>self.__next_f.push([1,"\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"()\"}]],[\"$\",\"br\",null,{}]]}]}]\n511:[\"$\",\"div\",\"56\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":57,\"style\":{\"width\":\"3ch\"},\"children\":57}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                    :\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" now,\"}]],[\"$\",\"br\",null,{}]]}]}]\n512:[\"$\",\"div\",\"57\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":58,\"style\":{\"width\":\"3ch\"},\"children\":58}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"              type,\"}]],[\"$\",\"br\",null,{}]]}]}]\n513:[\"$\",\"div\",\"58\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":59,\"style\":{\"width\":\"3ch\"},\"children\":59}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            });\"}]],[\"$\",\"br\",null,{}]]}]}]\n514:[\"$\",\"div\",\"59\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":60,\"style\":{\"width\":\"3ch\"},\"children\":60}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n515:[\"$\",\"div\",\"60\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":61,\"style\":{\"width\":\"3ch\"},\"children\":61}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            switch\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (operation \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"as \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#953800\"},\"children\":\"AllowedOperation\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\") {\"}]],[\"$\",\"br\",null,{}]]}]}]\n516:[\"$\",\"div\",\"61\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":62,\"style\":{\"width\":\"3ch\"},\"children\":62}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n517:[\"$\",\"div\",\"62\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":63,\"style\":{\"width\":\"3ch\"},\"children\":63}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n518:[\"$\",\"div\",\"63\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":64,\"style\":{\"width\":\"3ch\"},\"children\":64}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"create\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n519:[\"$\",\"div\",\"64\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":65,\"style\":{\"width\":\"3ch\"},\"children\":65}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n51a:[\"$\",\"div\",\"65\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":66,\"style\":{\"width\":\"3ch\"},\"children\":66}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n51b:[\"$\",\"div\",\"66\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":67,\"style\":{\"width\":\"3ch\"},\"childr"])</script><script>self.__next_f.push([1,"en\":67}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n51c:[\"$\",\"div\",\"67\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":68,\"style\":{\"width\":\"3ch\"},\"children\":68}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result)\"}]],[\"$\",\"br\",null,{}]]}]}]\n51d:[\"$\",\"div\",\"68\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":69,\"style\":{\"width\":\"3ch\"},\"children\":69}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"update\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n51e:[\"$\",\"div\",\"69\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":70,\"style\":{\"width\":\"3ch\"},\"children\":70}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n51f:[\"$\",\"div\",\"70\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":71,\"style\":{\"width\":\"3ch\"},\"children\":71}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n520:[\"$\",\"div\",\"71\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":72,\"style\":{\"width\":\"3ch\"},\"children\":72}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n521:[\"$\",\"div\",\"72\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":73,\"style\":{\"width\":\"3ch\"},\"children\":73}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"entityType\\\" \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"in\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n522:[\"$\",\"div\",\"73\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":74,\"style\":{\"width\":\"3ch\"},\"children\":74}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                  change \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"= \"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"makeChange\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, \"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"delete\\\"\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\");\"}]],[\"$\",\"br\",null,{}]]}]}]\n523:[\"$\",\"div\",\"74\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":75,\"style\":{\"width\":\"3ch\"},\"children\":75}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"                  // Automatically add __isDeleted flag to deletion results\"}]],[\"$\",\"br\",null,{}]]}]}]\n524:[\"$\",\"div\",\"75\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":76,\"style\":{\"width\":\"3ch\"},\"children\":76}],[[\"$\",\"span\",\"0\",{\"style"])</script><script>self.__next_f.push([1,"\":{\"color\":\"#24292F\"},\"children\":\"                  Object.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"assign\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(result, { __isDeleted: \"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#0550AE\"},\"children\":\"true\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" });\"}]],[\"$\",\"br\",null,{}]]}]}]\n525:[\"$\",\"div\",\"76\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":77,\"style\":{\"width\":\"3ch\"},\"children\":77}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                }\"}]],[\"$\",\"br\",null,{}]]}]}]\n526:[\"$\",\"div\",\"77\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":78,\"style\":{\"width\":\"3ch\"},\"children\":78}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n527:[\"$\",\"div\",\"78\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":79,\"style\":{\"width\":\"3ch\"},\"children\":79}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n528:[\"$\",\"div\",\"79\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":80,\"style\":{\"width\":\"3ch\"},\"children\":80}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findMany\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n529:[\"$\",\"div\",\"80\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":81,\"style\":{\"width\":\"3ch\"},\"children\":81}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findUnique\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n52a:[\"$\",\"div\",\"81\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":82,\"style\":{\"width\":\"3ch\"},\"children\":82}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"findFirst\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n52b:[\"$\",\"div\",\"82\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":83,\"style\":{\"width\":\"3ch\"},\"children\":83}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              case \"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"\\\"count\\\"\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n52c:[\"$\",\"div\",\"83\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":84,\"style\":{\"width\":\"3ch\"},\"children\":84}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#6E7781\"},\"children\":\"                // no events\"}]],[\"$\",\"br\",null,{}]]}]}]\n52d:[\"$\",\"div\",\"84\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":85,\"style\":{\"width\":\"3ch\"},\"children\":85}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n52e:[\"$\",\"div\",\"85\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":86,\"style\":{\"width\":\"3ch\"},\"children\":86}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n52f:[\"$\",\"div\",\"86\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":87,\"style\":{\"width\":\"3ch\"},\"children\":87}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              default\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\":\"}]],[\"$\",\"br\",null,{}]]}]}]\n530:[\"$\",\"d"])</script><script>self.__next_f.push([1,"iv\",\"87\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":88,\"style\":{\"width\":\"3ch\"},\"children\":88}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                console.\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"warn\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"(\"}]],[\"$\",\"br\",null,{}]]}]}]\n531:[\"$\",\"div\",\"88\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":89,\"style\":{\"width\":\"3ch\"},\"children\":89}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"                  `Unhandled Prisma operation: ${\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"operation\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"} for model: ${\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"model\"}],[\"$\",\"span\",\"4\",{\"style\":{\"color\":\"#0A3069\"},\"children\":\"}`\"}],[\"$\",\"span\",\"5\",{\"style\":{\"color\":\"#24292F\"},\"children\":\",\"}]],[\"$\",\"br\",null,{}]]}]}]\n532:[\"$\",\"div\",\"89\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":90,\"style\":{\"width\":\"3ch\"},\"children\":90}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"                );\"}]],[\"$\",\"br\",null,{}]]}]}]\n533:[\"$\",\"div\",\"90\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":91,\"style\":{\"width\":\"3ch\"},\"children\":91}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"                break\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\";\"}]],[\"$\",\"br\",null,{}]]}]}]\n534:[\"$\",\"div\",\"91\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":92,\"style\":{\"width\":\"3ch\"},\"children\":92}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n535:[\"$\",\"div\",\"92\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":93,\"style\":{\"width\":\"3ch\"},\"children\":93}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n536:[\"$\",\"div\",\"93\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":94,\"style\":{\"width\":\"3ch\"},\"children\":94}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            if\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" (change) {\"}]],[\"$\",\"br\",null,{}]]}]}]\n537:[\"$\",\"span\",\"94\",{\"className\":\"block dark:bg-[#d1edff33] bg-[#d1edff80]\",\"children\":[[\"$\",\"div\",\"0\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":95,\"style\":{\"width\":\"3ch\"},\"children\":95}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"              await\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" DatabaseEventsService.\"}],[\"$\",\"span\",\"2\",{\"style\":{\"color\":\"#8250DF\"},\"children\":\"createChanges\"}],[\"$\",\"span\",\"3\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"([change]);\"}]],[\"$\",\"br\",null,{}]]}]}]]}]\n538:[\"$\",\"div\",\"95\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":96,\"style\":{\"width\":\"3ch\"},\"children\":96}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"            }\"}]],[\"$\",\"br\",null,{}]]}]}]\n539:[\"$\",\"div\",\"96\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":97,\"style\":{\"width\":\"3ch\"},\"children\":97}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"\"}]],[\"$\",\"br\",null,{}]]}]}]\n53a:[\"$\",\"div\",\"97\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":98,\"style\":{\"width\":\"3ch\"},\"children\":98}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#CF222E\"},\"children\":\"            return\"}],[\"$\",\"span\",\"1\",{\"style\":{\"color\":\"#24292F\"},\"children\":\" result;\"}]],[\"$\",\"br\",null,{}]]}]}]\n53b:[\"$\",\"div\",\"98\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":99,\""])</script><script>self.__next_f.push([1,"style\":{\"width\":\"3ch\"},\"children\":99}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"          },\"}]],[\"$\",\"br\",null,{}]]}]}]\n53c:[\"$\",\"div\",\"99\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":100,\"style\":{\"width\":\"3ch\"},\"children\":100}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"        },\"}]],[\"$\",\"br\",null,{}]]}]}]\n53d:[\"$\",\"div\",\"100\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":101,\"style\":{\"width\":\"3ch\"},\"children\":101}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"      },\"}]],[\"$\",\"br\",null,{}]]}]}]\n53e:[\"$\",\"div\",\"101\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":102,\"style\":{\"width\":\"3ch\"},\"children\":102}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"    });\"}]],[\"$\",\"br\",null,{}]]}]}]\n53f:[\"$\",\"div\",\"102\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":103,\"style\":{\"width\":\"3ch\"},\"children\":103}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#24292F\"},\"children\":\"  }\"}]],[\"$\",\"br\",null,{}]]}]}]\n540:[\"$\",\"div\",\"103\",{\"style\":{\"padding\":\"0 1em\"},\"children\":[\"$\",\"span\",null,{\"children\":[[\"$\",\"span\",null,{\"data-bright-ln\":104,\"style\":{\"width\":\"3ch\"},\"children\":104}],[[\"$\",\"span\",\"0\",{\"style\":{\"color\":\"#953800\"},\"children\":\"}\"}]],[\"$\",\"br\",null,{}]]}]}]\n"])</script></body></html>