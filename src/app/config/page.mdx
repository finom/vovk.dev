# vovk.config.js

TODO rename fetcher to fetcherPath, rename validateOnClient to validateOnClientImport, createRPCImport, fetcherImport

Vovk.ts uses a config file to define options for the [CLI](/cli) TODO

## Valid config file names

The config can be implemented either as a CJS module or as a ESM module. It supports the following extensions: **.js**, **.cjs**, **.mjs** and can be stored at the root of the project as well as at **.config** folder. In other words, the following paths are valid:

- **vovk.config.js**
- **vovk.config.cjs**
- **vovk.config.mjs**
- **.config/vovk.config.js**
- **.config/vovk.config.cjs**
- **.config/vovk.config.mjs**

When [vovk init](/cli/vovk-init) is executed, it checks if the project is a module and, if true, uses **.mjs** extension and if it contains the **.config** folder it saves the config there.

## Config options

Shape of the config object is defined by `VovkConfig` type exported at [vovk-cli](/cli):

```ts
export type VovkConfig = {
  clientOutDir?: string;
  schemaOutDir?: string;
  fetcher?: string;
  validationLibrary?: string | null;
  validateOnClient?: string | null;
  modulesDir?: string;
  rootEntry?: string;
  origin?: string;
  rootSegmentModulesDirName?: string;
  logLevel?: LogLevelNames;
  prettifyClient?: boolean;
  devHttps?: boolean;
  templates?: {
    service?: string;
    controller?: string;
    [key: string]: string | undefined;
  };
  experimental_clientGenerateTemplateNames?: string[];
};
```

Some of the options can be overriden by the corresponding environment variables defined by `VovkEnv` type also exported at [vovk-cli](/cli):

```ts
// some technical vars are omitted for this documenation
export type VovkEnv = {
  PORT?: string;
  VOVK_CLIENT_OUT_DIR?: string;
  VOVK_SCHEMA_OUT_DIR?: string;
  VOVK_FETCHER?: string;
  VOVK_VALIDATE_ON_CLIENT?: string;
  VOVK_MODULES_DIR?: string;
  VOVK_VALIDATION_LIBRARY?: string;
  VOVK_ORIGIN?: string;
  VOVK_ROOT_ENTRY?: string;
  VOVK_API_ENTRY_POINT?: string;
  VOVK_ROOT_SEGMENT_MODULES_DIR_NAME?: string;
  VOVK_LOG_LEVEL?: LogLevelNames;
  VOVK_PRETTIFY_CLIENT?: string;
  VOVK_DEV_HTTPS?: string;
};
```

The config file allows to change default options in order to customise generated client or its path. The default config looks like that:

- `clientOutDir` - where the client is going to be compiled to. Can be overriden by `VOVK_CLIENT_OUT_DIR` env variable.
- `schemaOutDir` - where the schema is going to be compiled to. Can be overriden by `VOVK_SCHEMA_OUT_DIR` env variable.
- `fetcher` - allows to customize the fetching function that used internally by the client. Can be overriden by `VOVK_FETCHER` env variable. Please, check the [customization docs](/customization) for more info.
- `validationLibrary` - defines the validation library. See [validation docs](/validation) for more info. Can be overriden by `VOVK_VALIDATION_LIBRARY` env variable.
- `validateOnClient` - defines client-side validation library. See [validation docs](/validation) for more info. Can be overriden by `VOVK_VALIDATE_ON_CLIENT` env variable.
- `modulesDir` - defines the directory where the modules are located. Can be overriden by `VOVK_MODULES_DIR` env variable. Used to watch for changes in the modules and recompile the client.
- `rootEntry` - defines the root entry for the API routes (the root endpoint and the folder where [segments](/segments) are located). By default it's `api`. You can set it to `''` if you want to make the API served from the root of the domain. Can be overriden by `VOVK_ROOT_ENTRY` env variable.
- `origin` - defines the origin for the client (for example https://example.com). By default it equals to `''`. Can be overriden by `VOVK_ORIGIN` env variable.
- `rootSegmentModulesDirName` - the flag is used to define the name of the folder where the root segment modules are created by [the module generator](/cli/new) when multiple segments are used. By default root segment modules are located in the root of the `modulesDir`. If `rootSegmentModulesDirName` is set to a non-empty string, the root segment modules are going to be created in the folder with this name. For example if it's set to `"root"` then when `vovk new controller user` is executed the controller is going to be created at **src/modules/root/user/UserController.ts**. Can be overriden by `VOVK_ROOT_SEGMENT_MODULES_DIR_NAME` env variable.
- `logLevel` - defines the log level for the CLI. The values are `"trace"`, `"debug"`, `"info"`, `"warn"`, `"error"`. By default it's `"info"`. Can be overriden by `VOVK_LOG_LEVEL` env variable.
- `prettifyClient` - defines if the client code that by default is located at **node_modules/.vovk-client** is going to be prettified (making compilation a bit slower). By default it's `false`. Can be overriden by `VOVK_PRETTIFY_CLIENT=true` env variable.
- `devHttps` - defines if the dev server is going to use HTTPS. By default it's `false`. Can be overriden by `VOVK_DEV_HTTPS=true` env variable. See [https docs](/dev-https) for more info.
- `clientGenerateTemplateNames` - defines what kind of templates are going to be used `vovk generate` to generate the client. By default it equals to `['ts', 'compiled']` that means that the command is going to use `ts` template go generate `index.ts` and `compiled` template to generate `compiled.js` and `compiled.d.ts`. You can redefine it to generate the client from the custom templates, including an experimental Python template: `['ts', 'compiled', 'python', './client-templates/custom-template.js.ejs']`. Can't be overriden by env variable at the current version.
- `templates` - used by the [module generator](/cli/new) to define the templates for the service, controller, state or any other kind of module. By default it uses templates from the [vovk-cli](/cli) package. There is no env variable to override it.
- `experimental_clientGenerateTemplateNames` - defines the list of templates that are going to be used by `vovk generate` command. By default it's `['ts', 'compiled']`. Check [vovk generate](/cli/generate) for more info.



