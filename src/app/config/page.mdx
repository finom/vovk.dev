# `vovk.config.{js,cjs,mjs}`

The configuration file defines options for the CLI, updates [template definitions](/templates), and customizes other settings. In many cases, it’s optional because the CLI can rely on defaults or flags. For more advanced use, creating a config file is recommended.

## Valid Config File Names

The config can be authored as either a CJS or ESM module. It supports the following extensions: **.js**, **.cjs**, **.mjs**, and can live either at the project root or inside the [.config](https://dot-config.github.io/) folder. In other words, the following paths are valid:

- **vovk.config.js**
- **vovk.config.cjs**
- **vovk.config.mjs**
- **.config/vovk.config.js**
- **.config/vovk.config.cjs**
- **.config/vovk.config.mjs**

When [vovk init](/init) runs, it checks whether the project uses ES modules and whether the **.config** folder exists to choose the appropriate filename.

## Config Options

The configuration extends the `VovkConfig` type from the `vovk` package and exposes the following options:

<a name="exposeConfigKeys" />
### `exposeConfigKeys: boolean | string[]`

Controls whether to emit config options to [.vovk-schema/\_meta.json](/schema). If `true`, emits all options. If set to an array of strings, emits only the listed options. Default: <nobr>`["libs", "rootEntry"]`</nobr>.

<a name="clienttemplatedefs" />
### `clientTemplateDefs: object`

Extends [template definitions](/templates#defs) with custom entries that can be used as the `fromTemplates` field in the [composed client](/composed) or [segmented client](/segmented).

<a name="composedclient" />
### `composedClient: object`

Overrides configuration for the [composed client](/composed), such as [outDir](/composed#outdir), [fromTemplates](/composed#fromtemplates), [excludeSegments](/composed#excludesegments), and more.

<a name="segmentedclient" />
### `segmentedClient: object`

Overrides configuration for the [segmented client](/segmented), such as [outDir](/segmented#outdir), [fromTemplates](/segmented#fromtemplates), [excludeSegments](/segmented#excludesegments), and more.

<a name="bundle" />
### `bundle: object`

Overrides options for the [bundle](/bundle), including `excludeSegments` and `build` function to customize the bundler.

<a name="modulesdir" />
### `modulesDir = 'src/modules'`

Path to the directory containing module files. Used by [vovk new](/new) to generate modules and by [vovk dev](/dev) to watch for module changes.

<a name="schemaoutdir" />
### `schemaOutDir = '.vovk-schema'`

Directory where the schema is generated. Default: `.vovk-schema`.

<a name="rootentry" />
### `rootEntry = 'api'`

The root entry point for API routes. By default it is `api`, so routes are served under `/api`, and segment `route.ts` files live in `./src/app/api` (the `src/` directory is optional). To serve the API from the domain root, set it to an empty string `''`. In that case, segments are located in `./src/app`.

<a name="rootsegmentmodulesdirname" />
### `rootSegmentModulesDirName = ''`

Used exclusively by [vovk new](/new) when multiple segments are present. If set to a non-empty string, root-segment modules are created inside a folder with this name. For example, if it’s `"root"`, then running `vovk new controller user` will create **src/modules/root/user/UserController.ts** instead of **src/modules/user/UserController.ts** (the root of [modulesDir](#modulesdir)).

<a name="loglevel" />
### `logLevel = 'info'`

Sets the [log level](https://www.npmjs.com/package/loglevel) for the CLI. Accepted values: `"debug"`, `"info"`, `"warn"`, `"error"`. Default: `"info"`. Use `"debug"` to see underlying operations (e.g., file watching).

<a name="devhttps" />
### `devHttps = false`

[Progressive Web Apps](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Guides/What_is_a_progressive_web_app) require HTTPS in both development and production. To enable HTTPS in development, pass `--experimental-https` to `next dev` and enable HTTPS mode for [vovk dev](/dev) by setting `devHttps: true` or passing the `--https` flag.

```js filename="/vovk.config.mjs"
const config = {
  // ...
  devHttps: true,
};

export default config;
```

If you prefer not to enable HTTPS by default, create a separate NPM script with the necessary flags:

```json filename="/package.json"
"scripts": {
    "dev-https": "vovk dev --https --next-dev -- --experimental-https",
    "dev": "vovk dev --next-dev",
}
```

<a name="moduletemplates" />
### `moduleTemplates: object`

A record of module template names mapped to their paths. Used by [vovk new](/new) to define templates for services, controllers, or any other module type.

```js filename="/vovk.config.mjs"
/** @type {import('vovk').VovkConfig} */
const config = {
  // ...
  moduleTemplates: {
    state: './module-templates/state.ts.ejs',
    // you can add your own templates here
  },
};
```

You can then generate a module in [modulesDir](#modulesdir):

```sh npm2yarn copy
npx vovk new state thing # creates src/modules/thing/ThingState.ts
```

```sh npm2yarn copy
npx vovk new state segment/thing # creates src/modules/segment/thing/ThingState.ts
```

<a name="libs" />
### `libs: object`

A conventional place to define configuration for libraries used by the client—or any configuration you want exposed to the client. For example, it can define localization for [vovk-ajv](/validation/client).

```js filename="/vovk.config.mjs"
/** @type {import('vovk').VovkConfig} */
const config = {
  // ...
  libs: {
    /** @type {import('vovk-ajv').VovkAjvConfig} */
    ajv: {
      options: {
        strict: false,
      },
      localize: 'de',
    },
  },
};

export default config;
```

If `"libs"` is present in [exposeConfigKeys](#exposeConfigKeys), it is emitted to `.vovk-schema/_meta.json` and can be accessed in multiple ways:

```ts showLineNumbers copy
import { schema, UserRPC } from 'vovk-client';

console.log(schema.meta.config.libs.ajv.options.strict); // false
console.log(UserRPC.updateUser.fullSchema.meta.config.libs.ajv.localize); // 'de'
```

<a name="outputconfig" />
### `outputConfig`

The `outputConfig` object customizes the generated client code by changing [imports](/imports), `origin`, or adding [OpenAPI mixins](/mixins).

#### `origin: string | null`

Base origin used to generate client URLs. Defaults to `''` (relative URLs). To use absolute URLs, set it to your domain, e.g., `https://example.com`.

#### `package: PackageJson & { py_name?: string; rs_name?: string }`

Used to generate `package.json` (for the [TypeScript client](/typescript)), `Cargo.toml` (for the [Rust client](/rust)), or `pyproject.toml` (for the [Python client](/python)). It also influences `README.md` generation (name, version, description, etc.) and updates code samples to use the proper package name.

By default, Python and Rust package names are derived from `package.name` by converting `kebab-case` to `snake_case`. You can override them using the `py_name` and `rs_name` fields, respectively.

#### `readme: { banner?: string, installCommand?: string, description?: string }`

Customizes the generated `README.md`. Supports a `banner` appended to the top, an `installCommand`, and a `description` that overrides `package.description`.

#### `samples: { apiRoot?: string, headers?: Record<string, string> }`
Customizes generated code samples in `README.md` files and in [Scalar](https://scalar.com/) OpenAPI documentation. Allows the snippet function to explicitly render `apiRoot` and `headers` fields.

#### `openAPIObject: Partial<import('openapi3-ts/oas31').OpenAPIObject>`

Augments the generated OpenAPI schema. You can provide `info`, `servers`, and other fields; they are merged with the auto-generated schema.

#### `reExports: Record<string, string>`

Re-exports variables from other modules. Keys list the identifiers to re-export; values are module paths. Identifiers are placed inside curly braces, and paths are resolved relative to the output directory. This is useful when you want to re-export additional items alongside generated RPC modules (including the [bundled](/bundle) package).

```js filename="/vovk.config.mjs"
const config = {
  // ...
  outputConfig: {
    reExports: {
      'type MyType': './src/types',
      'MyClass, myFunction': './src/utils',
      'MyComponent as RenamedComponent': './src/components',
      'default as MyDefault': './src/defaultExport',
    },
  },
};
```

Will be compiled to:

```ts showLineNumbers copy
export { type MyType } from './src/types';
export { MyClass, myFunction } from './src/utils';
export { MyComponent as RenamedComponent } from './src/components';
export { default as MyDefault } from './src/defaultExport';
```

```ts showLineNumbers copy
import { type MyType, MyClass, myFunction, RenamedComponent, MyDefault } from 'vovk-client';
```

When the [segmented](/segmented) client is used, top-level `outputConfig.reExports` are applied to the root segment code.

```ts showLineNumbers copy
import { type MyType, MyClass, myFunction, RenamedComponent, MyDefault } from '@/client/root';
```

#### `imports: { fetcher: VovkFetcher, validateOnClient: VovkValidateOnClient }`

Customizes the imports for `fetcher` and `validateOnClient`. See [Imports](/imports) for details.

#### `segments`

Configures each segment individually. It accepts the same properties as `outputConfig` (such as `origin`, `package`, `readme`, `samples`, `openAPIObject`, `reExports`, `imports`) and adds a few more, described below.

##### `rootEntry: string | null`

Overrides the entry point for the segment. Useful for [multitenancy](/multitenant) to change the root entry from `api` to something else.

##### `segmentNameOverride: string | null`

Overrides the segment name used in generated code. Useful for [multitenancy](/multitenant) to change the served path.

##### `openAPIMixin: VovkOpenAPIMixin`

Turns the segment into an OpenAPI mixin, combining the generated client with third-party APIs. See [OpenAPI mixins](/mixins) for details.
