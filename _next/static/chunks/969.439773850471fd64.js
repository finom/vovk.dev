!function(){var e={969:function(e){(()=>{"use strict";var t={4652:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._HttpException=void 0;class r extends Error{statusCode;message;constructor(e,t){super(t),this.statusCode=e,this.message=t}}t._HttpException=r},1724:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t._Segment=void 0;let n=r(9452),s=r(4652),a=r(9314);class i{static getHeadersFromOptions(e){return e?{...e.cors?{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS, HEAD","Access-Control-Allow-Headers":"Content-Type, Authorization"}:{},...e.headers??{}}:{}}_routes={GET:new Map,POST:new Map,PUT:new Map,PATCH:new Map,DELETE:new Map,HEAD:new Map,OPTIONS:new Map};GET=(e,t)=>this.#e(n._HttpMethod.GET,e,t.params);POST=(e,t)=>this.#e(n._HttpMethod.POST,e,t.params);PUT=(e,t)=>this.#e(n._HttpMethod.PUT,e,t.params);PATCH=(e,t)=>this.#e(n._HttpMethod.PATCH,e,t.params);DELETE=(e,t)=>this.#e(n._HttpMethod.DELETE,e,t.params);HEAD=(e,t)=>this.#e(n._HttpMethod.HEAD,e,t.params);OPTIONS=(e,t)=>this.#e(n._HttpMethod.OPTIONS,e,t.params);#t=(e,t,r)=>new Response(JSON.stringify(t),{status:e,headers:{"Content-Type":"application/json",...o.getHeadersFromOptions(r)}});#r=(e,t,r)=>this.#t(e,{statusCode:e,message:t,isError:!0},r);#e=async(e,t,r)=>{let i=this._routes[e],E={};if("__ping"===r[Object.keys(r)[0]]?.[0])return this.#t(200,{message:"pong"});let l={};i.forEach((e,t)=>{let r=t._prefix??"";if(!t._activated)throw new s._HttpException(n._HttpStatus.INTERNAL_SERVER_ERROR,`Controller "${t.name}" found but not activated`);Object.entries(e).forEach(([e,o])=>{l[[r,e].filter(Boolean).join("/")]={staticMethod:o,controller:t}})});let _=(()=>{if(0===Object.keys(r).length)return l[""];let e=r[Object.keys(r)[0]],t=Object.keys(l),o=[];if((o=t.filter(t=>!t.includes(":")&&t===e.join("/"))).length||(o=t.filter(t=>{let r=t.split("/");if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++){let o=r[t],a=e[t];if(o.startsWith(":")){let e=o.slice(1);if(e in E)throw new s._HttpException(n._HttpStatus.INTERNAL_SERVER_ERROR,`Duplicate parameter "${e}"`);E[e]=a}else if(o!==a)return!1}return!0})),o.length>1)throw new s._HttpException(n._HttpStatus.INTERNAL_SERVER_ERROR,`Conflicting routes found: ${o.join(", ")}`);let[a]=o;return a?l[a]:null})();if(!_)return this.#r(n._HttpStatus.NOT_FOUND,"Route is not found");let{staticMethod:T,controller:d}=_;try{let e=await T.call(d,t,E);if("object"==typeof e&&e&&(Reflect.has(e,Symbol.iterator)&&"function"==typeof e[Symbol.iterator]||Reflect.has(e,Symbol.asyncIterator)&&"function"==typeof e[Symbol.asyncIterator])&&!(e instanceof Array)){let t=new a._StreamResponse({headers:{...a._StreamResponse.defaultHeaders,...o.getHeadersFromOptions(T._options)}});return(async()=>{try{for await(let r of e)await t.send(r)}catch(e){return t.throw(e)}t.close()})(),t}return e instanceof Response?e:this.#t(200,e??null,T._options)}catch(e){try{d._onError?.(e)}catch(e){console.error(e)}if("NEXT_REDIRECT"!==e.message&&"NEXT_NOT_FOUND"!==e.message){let t=e.statusCode??n._HttpStatus.INTERNAL_SERVER_ERROR;return this.#r(t,e.message,T._options)}throw e}}}t._Segment=i,o=i},9314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._StreamResponse=void 0;class r extends Response{static JSON_DIVIDER="__##DIV123##__";static defaultHeaders={"Content-Type":"text/event-stream",Connection:"keep-alive","Content-Encoding":"none","Cache-Control":"no-cache, no-transform"};writer;encoder;constructor(e){let t=new TransformStream,o=t.writable.getWriter(),n=new TextEncoder;super(t.readable,{...e,headers:e?.headers??r.defaultHeaders}),this.writer=o,this.encoder=n}send(e){let{writer:t,encoder:o}=this;return t.write(o.encode(JSON.stringify(e)+r.JSON_DIVIDER))}close(){let{writer:e}=this;return e.close()}async throw(e){let{writer:t}=this;return await this.send({isError:!0,reason:e instanceof Error?e.message:e}),await new Promise(e=>setTimeout(e,0)),t.close()}}t._StreamResponse=r},1860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._createDecorator=void 0,t._createDecorator=function(e,t){return function(...r){return function(o,n){let s=o[n];if("function"!=typeof s)throw Error(`Unable to decorate: ${n} is not a function`);let a=t?.call(o,...r);a?.clientValidators&&(o._handlers={...o._handlers,[n]:{...o._handlers?.[n],clientValidators:a.clientValidators}},a.clientValidators);let i=function(t,n){return e.call(o,t,async()=>await s.call(o,t,n),...r)};i._controller=o,s._controller=o,o[n]=i}}}},2064:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._createSegment=void 0;let o=r(1724),n=r(9452),s=e=>e.trim().replace(/^\/|\/$/g,"");t._createSegment=function(){let e=new o._Segment,t=t=>{let r=(r,o,n,s)=>{if("undefined"!=typeof window)throw Error("Decorators are intended for server-side use only. You have probably imported a controller on the client-side.");if("function"!=typeof r||!/class/.test(r.toString())){let e=t.toLowerCase();throw"delete"===e&&(e="del"),Error(`Decorator must be used on a static class method. Check the controller method named "${o}" used with @${e}.`)}let a=e._routes[t].get(r)??{};e._routes[t].set(r,a),r._handlers={...r._handlers,[o]:{...(r._handlers??{})[o],path:n,httpMethod:t}},r[o]._controller=r,a[n]=r[o],a[n]._options=s},o=function(e="",t){let o=s(e);return function(e,n){r(e,n,o,t)}};return o.auto=o=>function(n,s){let a=e._routes[t].get(n)??{};e._routes[t].set(n,a),n._handlers={...n._handlers,[s]:{...(n._handlers??{})[s],httpMethod:t}},r(n,s,s.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),o)},o};return{get:t(n._HttpMethod.GET),post:t(n._HttpMethod.POST),put:t(n._HttpMethod.PUT),patch:t(n._HttpMethod.PATCH),del:t(n._HttpMethod.DELETE),head:t(n._HttpMethod.HEAD),options:t(n._HttpMethod.OPTIONS),prefix:(e="")=>{let t=s(e);return e=>(e._prefix=t,e)},initVovk:t=>{for(let[e,r]of Object.entries(t.controllers))r._controllerName=e,r._activated=!0,r._onError=t?.onError;let r=(e=>{let t=e?.exposeValidation??!0,r={};for(let[o,n]of Object.entries(e.controllers))r[o]={_controllerName:o,_prefix:n._prefix??"",_handlers:{...t?n._handlers:Object.fromEntries(Object.entries(n._handlers).map(([e,t])=>[e,{...t,clientValidators:void 0}]))}};for(let[t,o]of Object.entries(e.workers??{}))r.workers=r.workers??{},r.workers[t]={_workerName:t,_handlers:{...o._handlers}};return r})(t);return!1!==t.emitMetadata&&t?.onMetadata&&t.onMetadata(r),{GET:e.GET,POST:e.POST,PUT:e.PUT,PATCH:e.PATCH,DELETE:e.DELETE,HEAD:e.HEAD,OPTIONS:e.OPTIONS}}}}},358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._generateStaticAPI=void 0,t._generateStaticAPI=function(e,t="vovk"){return[{[t]:["__ping"]},...Object.values(e).map(e=>{let r=e._handlers,o=e._prefix?.split("/")??[];return Object.values(r).map(e=>({[t]:[...o,...e.path.split("/")].filter(Boolean)}))}).flat()]}},437:(e,t,r)=>{var o;t.worker=void 0;let n=r(2064),s=(r(9452),r(4652),r(1860),r(9314),r(4096));Object.defineProperty(t,"worker",{enumerable:!0,get:function(){return s.worker}}),r(358),(o=(0,n._createSegment)()).get,o.post,o.put,o.patch,o.del,o.head,o.options,o.prefix,o.initVovk},9452:(e,t)=>{var r,o,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t._HttpStatus=t._HttpMethod=void 0,(n=r||(t._HttpMethod=r={})).GET="GET",n.POST="POST",n.PUT="PUT",n.PATCH="PATCH",n.DELETE="DELETE",n.HEAD="HEAD",n.OPTIONS="OPTIONS",(s=o||(t._HttpStatus=o={}))[s.NULL=0]="NULL",s[s.CONTINUE=100]="CONTINUE",s[s.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",s[s.PROCESSING=102]="PROCESSING",s[s.EARLYHINTS=103]="EARLYHINTS",s[s.OK=200]="OK",s[s.CREATED=201]="CREATED",s[s.ACCEPTED=202]="ACCEPTED",s[s.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",s[s.NO_CONTENT=204]="NO_CONTENT",s[s.RESET_CONTENT=205]="RESET_CONTENT",s[s.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",s[s.AMBIGUOUS=300]="AMBIGUOUS",s[s.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",s[s.FOUND=302]="FOUND",s[s.SEE_OTHER=303]="SEE_OTHER",s[s.NOT_MODIFIED=304]="NOT_MODIFIED",s[s.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",s[s.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",s[s.BAD_REQUEST=400]="BAD_REQUEST",s[s.UNAUTHORIZED=401]="UNAUTHORIZED",s[s.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",s[s.FORBIDDEN=403]="FORBIDDEN",s[s.NOT_FOUND=404]="NOT_FOUND",s[s.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",s[s.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",s[s.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",s[s.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",s[s.CONFLICT=409]="CONFLICT",s[s.GONE=410]="GONE",s[s.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",s[s.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",s[s.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",s[s.URI_TOO_LONG=414]="URI_TOO_LONG",s[s.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",s[s.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",s[s.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",s[s.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",s[s.MISDIRECTED=421]="MISDIRECTED",s[s.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",s[s.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",s[s.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",s[s.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",s[s.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",s[s.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",s[s.BAD_GATEWAY=502]="BAD_GATEWAY",s[s.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",s[s.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",s[s.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED"},4096:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.promisifyWorker=t.worker=void 0;let o=r(1660);Object.defineProperty(t,"worker",{enumerable:!0,get:function(){return o._worker}});let n=r(7066);Object.defineProperty(t,"promisifyWorker",{enumerable:!0,get:function(){return n._promisifyWorker}})},7066:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._promisifyWorker=void 0,t._promisifyWorker=function e(t,r){if(!r)throw Error("Worker metadata is not provided");let o={},n=0;for(let s of(o.terminate=()=>{o._isTerminated||(o._isTerminated=!0,t?.terminate(),t=null)},o.use=e=>(o._isTerminated||(o._isTerminated=!0,t=e),o),o.fork=t=>e(t,r),Object.keys(r._handlers))){let{isGenerator:e}=r._handlers[s];r[s],o[s]=e?(...e)=>{let r=n;return n+=1,{async *[Symbol.asyncIterator](){if(!t)throw Error("Worker is not provided or terminated");let o=t,n=[],a=null,i=e=>{let{method:t,key:o}=e.data;o===r&&t===s&&(a?(a(e.data),a=null):n.push(e.data))},E=e=>{throw a?(a({error:e.error}),a=null):n.push({error:e.error}),o.removeEventListener("message",i),o.removeEventListener("error",E),e.error};o.addEventListener("message",i),o.addEventListener("error",E),o.postMessage({key:r,args:e,method:s});try{for(;;){let{result:e,error:t,done:r}=n.length>0?n.shift():await new Promise(e=>{a=e});if(t)throw t;if(r)break;yield e}o.removeEventListener("message",i),o.removeEventListener("error",E)}catch(e){throw o.removeEventListener("message",i),o.removeEventListener("error",E),e}}}}:(...e)=>{if(!t)throw Error("Worker is not provided or terminated");let r=t;return new Promise((t,o)=>{let a=n;n+=1;let i=e=>{r.removeEventListener("message",E),r.removeEventListener("error",i),o(e)},E=e=>{let{result:n,error:l,key:_,method:T}=e.data;_===a&&T===s&&(r.removeEventListener("message",E),r.removeEventListener("error",i),l?o(l):t(n))};r.addEventListener("message",E),r.addEventListener("error",i),r.postMessage({key:a,args:e,method:s})})}}return o}},1660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._worker=void 0,t._worker=function(){return e=>{for(let t of(e._handlers={},Object.getOwnPropertyNames(e))){let r=e[t];if("function"==typeof r){let o=Object.getPrototypeOf(r),n=o===Object.getPrototypeOf(function*(){})||o===Object.getPrototypeOf(async function*(){});e._handlers[t]={},n&&(e._handlers[t].isGenerator=!0)}}if("undefined"==typeof self)return;let t=self;t.onmessage=async r=>{let{method:o,args:n,key:s}=r.data;try{let r=await e[o](...n);if(r&&"object"==typeof r&&"next"in r&&"function"==typeof r.next){for await(let e of r)t.postMessage({result:e,key:s,method:o});t.postMessage({done:!0,key:s,method:o})}else t.postMessage({result:r,key:s,method:o})}catch(e){t.postMessage({error:e,key:s,method:o})}}}}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{o.r(n),o.d(n,{default:()=>r});var e=o(437);let t=class{static factorize(e){let t=[];if(e<2n)return[e];for(;e%2n===0n;)t.push(2n),e/=2n;for(let r=3n;r*r<=e;r+=2n)for(;e%r===0n;)t.push(r),e/=r;return e>1n&&t.push(e),t}},r=t=function(e,t,r,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(a=(s<3?n(a):s>3?n(t,r,a):n(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}([(0,e.worker)()],t)})(),e.exports=n})()}},t={};_N_E=function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}},a=!0;try{e[o](s,s.exports,r),a=!1}finally{a&&delete t[o]}return s.exports}(969)}();